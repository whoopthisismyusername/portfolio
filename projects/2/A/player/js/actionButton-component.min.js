"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6266],{77873:(e,t,o)=>{const{registerComponent:n,registerEpics:i}=o(60633),{resetCourse:s}=o(36329),{reflectionComponentsSelector:c}=o(12177),{componentTrackableChange:r}=o(59345),a=o(241),l=o(12390),p=o(77695),{showConfirmResetDialog:u}=o(95307),{scormFinish:m}=o(39922),{trackerSaveSession:_}=o(7251),{actionButtonClicked:d,actionButtonDisable:C}=o(58910),{actionButtonExitExceedCourseEpic:R}=o(90870);n("actionButton",{component:a,reducer:l,trackingMap:p,mapStateToProps:e=>({courseAssessment:e.courseAssessment||{},certificate:e.certificate||{},reflection:e.reflection||{},reflectionComponents:c(e),learner:e.app.learner,tracker:e.tracker||{},isLivePreview:e.app.isLivePreview,config:e.config,device:e.device}),actions:{resetCourse:s,showConfirmResetDialog:u,trackerSaveSession:_,actionButtonClicked:d,actionButtonDisable:C,componentTrackableChange:r,scormFinish:m}}),i(R)},241:(e,t,o)=>{var n=o(8528),i=o(7914)(o(11504));const s=o(99729),c=o(52898),r=o(23615),a=o(27378),l=o(37238),p=o(20687),u=o(52875),{Component:m}=o(30189),_=o(79416),d=o(5644),C=o(77904),R=o(79325),f="RESET_ASSESSMENT",E="DOWNLOAD_CERTIFICATE",S="DOWNLOAD_REFLECTION",g=c({displayName:"ActionButton",propTypes:{component:r.object.isRequired,courseAssessment:r.object.isRequired,certificate:r.object.isRequired,reflection:r.object.isRequired,setComponentAsReady:r.func.isRequired,setComponentAsStarted:r.func.isRequired,setComponentAsComplete:r.func.isRequired,actionButtonClicked:r.func.isRequired,actionButtonDisable:r.func.isRequired,componentTrackableChange:r.func.isRequired,resetCourse:r.func.isRequired,showConfirmResetDialog:r.func.isRequired,trackerSaveSession:r.func.isRequired,scormFinish:r.func.isRequired,course:r.object.isRequired,learner:r.object.isRequired,reflectionComponents:r.array.isRequired,styles:r.object,isLivePreview:r.bool,config:r.object.isRequired,device:r.object},getDefaultProps:()=>({styles:void 0}),getInitialState:()=>({_isHover:!1}),componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},getImage(){const{component:e}=this.props,{_isHover:t}=this.state;return e._isButtonDisabled&&e._disabledImage&&e._disabledImage.src?e._disabledImage:e._isButtonClicked&&e._clickedImage&&e._clickedImage.src?e._clickedImage:t&&e._hoverImage&&e._hoverImage.src?e._hoverImage:e._buttonImage},onVisibilityChange(...e){const t="click"===this.props.component._setCompletionOn?this.props.setComponentAsStarted:this.props.setComponentAsComplete;u(...e,this,t)},onScrollToTopOfPage(){const{props:e}=this;n(window).animate({scrollTop:0},e.component._scrollDuration||0,"swing")},onExitExceedCourse(){const{trackerSaveSession:e,isLivePreview:t,config:o}=this.props;t||"exceed"!==s(o,"_tracker._platform")||e()},onClick(){const{props:e}=this;if(!e.component._isButtonDisabled){switch(e.component._disableOnClick&&(e.actionButtonDisable(e.component._id),"click"!==e.component._setCompletionOn&&e.componentTrackableChange(e.component._id)),"click"===e.component._setCompletionOn&&e.setComponentAsComplete(e.component._id),e.component._action){case"SCROLL":this.onScrollToTopOfPage();break;case"RESTART_COURSE":e.resetCourse();break;case f:e.showConfirmResetDialog();break;case"FINISH_SCORM_SESSION":e.scormFinish();break;case"EXIT_EXCEED_COURSE":this.onExitExceedCourse();break;case E:this.downloadCertificate();break;case S:this.downloadReflection()}e.actionButtonClicked(e.component._id)}},onMouseEnter(){this.setState({_isHover:!0})},onMouseLeave(){this.setState({_isHover:!1})},getIsDisabled(){const{component:e,courseAssessment:t,certificate:o,reflection:n,course:i}=this.props;let c=!1;return e._action===f&&(!s(i,"_courseAssessment._isEnabled")||!s(i,"_courseAssessment._canBeRetaken")||t._isPassed&&i._courseAssessment._shouldHideRetakeOnAssessmentPassed||!i._courseAssessment._allowUnlimitedRetakeAttempts&&t.retakeAttemptsTaken>=i._courseAssessment._retakeAttempts)&&(c=!0),e._action===E&&(c=!o.isComplete),e._action===S&&(c=!n.isComplete),e._isButtonDisabled&&(c=!0),c},downloadCertificate(){var e=this;return(0,i.default)((function*(){const{course:t,learner:o,device:n}=e.props,{firstName:i,lastName:c}=o,r=yield _(t._certificate,`${i} ${c}`);if(n.touch&&!n.isWindowsTouchScreen)return r.open();const a=s(t._certificate,"fileName","Certificate");r.download(`${a}.pdf`)}))()},downloadReflection(){var e=this;return(0,i.default)((function*(){const{course:t,device:o,reflectionComponents:n,learner:i}=e.props,s=`${i.firstName} ${i.lastName}`;if(t._reflection._isHtmlFormat)return void C(t._reflection,t,n,s);const c=yield d(t._reflection,t,n,s);if(o.touch&&!o.isWindowsTouchScreen)return c.open();const r=t._reflection?.fileName||"Reflection";c.download(`${r}.pdf`)}))()},render(){const{props:e}=this;return a.createElement(m,{component:e.component,styles:e.styles,isVisibilitySensorActive:p(e,"_isComplete"),onVisibilityChange:this.onVisibilityChange},a.createElement("div",{className:l(e.component),style:{textAlign:e.component._buttonAlignment}},a.createElement(R,{text:e.component.buttonText,icon:e.component._icon,iconSize:e.component._iconSize,iconPosition:e.component._iconPosition,showPulseAnimation:e.component._showPulseAnimation&&!e.component._isButtonDisabled&&!e.component._isButtonClicked,textAlignment:e.component._buttonTextAlignment,image:this.getImage(),imagePosition:e.component._buttonImagePosition,variant:e.component._buttonType,"aria-label":e.component.buttonAriaLabel,isDisabled:this.getIsDisabled(),onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:this.onMouseEnter,onBlur:this.onMouseLeave})))}});e.exports=g},90870:(e,t,o)=>{const n=o(8921),i=o(29115),{Observable:s}=o(49923),{updateComponents:c,setComponentAsComplete:r}=o(59345),a=o(84900),l=o(79021),{SAVE_TRACKER_DONE:p}=o(7251),{ACTION_BUTTON_COMPLETE_COMPONENTS_ON_PAGE:u,ACTION_BUTTON_CLICKED:m}=o(58910);t.actionButtonExitExceedCourseEpic=(e,t)=>e.filter((({type:e,payload:o})=>{if(e!==m)return!1;const{components:n}=t.getState(),i=n[o.componentId];return i&&i._isComplete&&"actionButton"===i._component&&"EXIT_EXCEED_COURSE"===i._action})).switchMap((t=>e.ofType(p).take(1).mapTo(t))).do((()=>{const{tracker:e}=t.getState();e&&e.back_path&&(window.location=e.back_path)})).ignoreElements(),t.actionButtonCompleteComponentsOnPageEpic=(e,t)=>e.ofType(u).mergeMap((e=>{const o=t.getState(),{components:p}=o,{componentId:u}=e.payload,m=p[u],_=a(o,m,"page"),d=l(o,_,"component"),C=n(d).mapValues((e=>i({},e,{_isComplete:!0}))).keyBy("_id").value();return s.of(c(C),r(u))}))},12390:(e,t,o)=>{const{RESET_COMPONENT:n}=o(59345),{ACTION_BUTTON_CLICKED:i,ACTION_BUTTON_DISABLE:s}=o(58910);e.exports=(e,t)=>{switch(t.type){case i:return{...e,_isButtonClicked:!0};case s:return{...e,_isButtonDisabled:!0};case n:return{...e,_isButtonClicked:!1,_isButtonDisabled:!1};default:return e}}},77695:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_isButtonDisabled:{fieldKey:"_isButtonDisabled",type:"Boolean",shouldRestore:!0},_isButtonClicked:{fieldKey:"_isButtonClicked",type:"Boolean",shouldRestore:!0}}},79416:(e,t,o)=>{var n=o(7914)(o(11504));const i=o(99729),s=o(96242),c=o(30300);function r(e){return"landscape"===e._orientation}e.exports=function(){var e=(0,n.default)((function*(e,t){const o=yield s(e),n={pageOrientation:e._orientation,content:[]},a=function(e,t){if(!t._primaryLogo&&!t._secondaryLogo)return null;const o={columns:[]},n=r(e)?[80,80]:[100,100];if(t._primaryLogo){const e={width:"50%",alignment:"left",stack:[{image:t._primaryLogo,fit:n}]};o.columns.push(e)}if(t._secondaryLogo){const e={width:"50%",alignment:"right",stack:[{image:t._secondaryLogo,fit:n}]};o.columns.push(e)}return o}(e,o);null!==a&&n.content.push(a);const l=function(e){if(!e.certificateTitle)return null;let t=[0,20,0,20],o=32;return r(e)&&(t=[0,10,0,15],o=26),{text:e.certificateTitle,alignment:"center",fontSize:o,margin:t}}(e);null!==l&&n.content.push(l);const p=function(e){if(!e.certificateMessage)return null;let t=[0,0,0,20],o=16;return r(e)&&(t=[0,0,0,15],o=12),{text:e.certificateMessage,alignment:"center",fontSize:o,margin:t}}(e);null!==p&&n.content.push(p);const u=function(e){if(!e.certificateGoal)return null;let t=[0,0,0,20],o=16;return r(e)&&(t=[0,0,0,15],o=12),{text:e.certificateGoal,alignment:"center",fontSize:o,margin:t}}(e);null!==u&&n.content.push(u);const m=function(e,t){if(!t._graphic)return null;let o=[0,0,0,20],n=[350,350];return r(e)&&(o=[0,0,0,15],n=[250,250]),{image:t._graphic,alignment:"center",fit:n,margin:o}}(e,o);null!==m&&n.content.push(m);const _=function(e,t){let o=[0,0,0,20],n=32;return r(e)&&(o=[0,0,0,15],n=24),{text:`${e.nameLabel} ${t}`,alignment:"center",italics:!0,fontSize:n,margin:o}}(e,t);n.content.push(_);const d=function(e){const t=i(e,"_dateFormat","DD/MM/YYYY"),o=c(t);let n=[0,0,0,20],s=16;return r(e)&&(n=[0,0,0,10],s=12),{text:`${e.dateLabel} ${o}`,alignment:"center",fontSize:s,margin:n}}(e);return n.content.push(d),window.pdfMake.createPdf(n)}));return function(t,o){return e.apply(this,arguments)}}()},39922:(e,t)=>{t.SCORM_WRAPPER_INIT="SCORM_WRAPPER_INIT",t.SCORM_WRAPPER_CHANGE="SCORM_WRAPPER_CHANGE",t.SCORM_DESERIALISE="SCORM_DESERIALISE",t.SCORM_ERROR="SCORM_ERROR",t.SCORM_FINISH="SCORM_FINISH",t.scormWrapperInit=()=>({type:t.SCORM_WRAPPER_INIT}),t.scormWrapperChange=e=>({type:t.SCORM_WRAPPER_CHANGE,payload:e}),t.scormDeserialise=()=>({type:t.SCORM_DESERIALISE}),t.scormError=e=>({type:t.SCORM_ERROR,payload:e}),t.scormFinish=e=>({type:t.SCORM_FINISH,payload:e})},7251:(e,t)=>{t.TRACKER_LOAD_DATA="TRACKER_LOAD_DATA",t.TRACKER_SAVE_SESSION="TRACKER_SAVE_SESSION",t.SET_TRACKER_AUTH="SET_TRACKER_AUTH",t.SAVE_TRACKER_DONE="SAVE_TRACKER_DONE",t.trackerLoadData=e=>({type:t.TRACKER_LOAD_DATA,payload:e}),t.trackerSaveSession=e=>({type:t.TRACKER_SAVE_SESSION,payload:e}),t.setTrackerAuth=e=>({type:t.SET_TRACKER_AUTH,payload:e}),t.saveTrackingDone=e=>({type:t.SAVE_TRACKER_DONE,payload:e})},20687:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:o,isPageReady:n}=e;return!0===n&&!0===o._isReady&&!0!==o[t]}},37238:(e,t,o)=>{const n=o(90005);e.exports=e=>n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},52875:e=>{e.exports=function(e,t,o,n,i){n&&n.props&&n.props.component?(t.top&&(n.isInviewTop=!0),t.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&i&&i(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);