(self.webpackChunk=self.webpackChunk||[]).push([[7462],{51578:(e,t)=>{"use strict";t.TEXT_INPUT_VALUE_CHANGED="TEXT_INPUT_VALUE_CHANGED",t.textInputValueChanged=(e,n,s)=>({type:t.TEXT_INPUT_VALUE_CHANGED,payload:{componentId:e,itemId:n,value:s}})},27896:(e,t,n)=>{"use strict";const s=n(55807),i=n(52898),{bool:r,func:o,object:a}=n(23615),c=n(27378),l=n(90005),{Component:p}=n(30189),u=n(98062),d=n(37238),m=n(20687),_=n(52875),h=n(43795),f=i({displayName:"TextInput",propTypes:{component:a.isRequired,actionButtonClicked:o.isRequired,setComponentAsReady:o.isRequired,setComponentAsViewed:o.isRequired,setComponentAsStarted:o.isRequired,showFeedback:o.isRequired,textInputValueChanged:o.isRequired,shouldHideMarking:r,styles:a,theme:a.isRequired},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback(!1)},showFeedback(e=!0){const t=u(this.props.component),n=e&&this.props.component._isComplete?{refocusSelector:".ev-buttons-feedback"}:{};this.props.showFeedback(t,n)},onTextInputValueChange(e,t){const{props:n}=this;n.component._hasStarted||n.setComponentAsStarted(n.component._id),n.textInputValueChanged(n.component._id,e,t)},onVisibilityChange(...e){_(...e,this,this.props.setComponentAsViewed)},getWidgetClassName(){const{component:e}=this.props;return l(d(e),{"ev-disabled":!e._isEnabled,"ev-correct":e._isComplete&&e._isCorrect,"ev-complete":e._isComplete,"ev-submitted":e._isSubmitted})},renderItems(){const{component:e,theme:t,shouldHideMarking:n}=this.props,i=e[e._selectedAnswerState];return s(i,(s=>c.createElement(h,{key:s._id,item:s,component:e,swatches:t._swatches,shouldHideMarking:n,onChange:this.onTextInputValueChange})))},render(){const{props:e}=this;return c.createElement(p,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,isVisibilitySensorActive:m(e),onVisibilityChange:this.onVisibilityChange,onActionButtonClicked:e.actionButtonClicked,onFeedbackButtonClicked:this.showFeedback},c.createElement("div",{className:this.getWidgetClassName()},this.renderItems()))}});e.exports=f},43795:(e,t,n)=>{"use strict";const s=n(99825),i=n(52898),{bool:r,func:o,object:a}=n(23615),c=n(27378),l=n(90005),p=n(42382),u=n(90219),d=n(31721),m=n(54794),_=i({displayName:"TextInputItem",propTypes:{item:a.isRequired,component:a.isRequired,onChange:o.isRequired,shouldHideMarking:r,swatches:a},getClassName(){const{component:e,item:t}=this.props;return l("ev-textinput-item ev-component-item ev-component-item-color ev-component-item-border ev-clearfix",{"ev-correct":t._isCorrect&&!e._isEnabled,"ev-incorrect":!t._isCorrect&&!e._isEnabled,"ev-display-component-item":e._displayAsComponentItem})},getPrefixSuffixStyle(){const{component:e,swatches:t}=this.props,n={},s=p(e._itemTextColor,t);return s&&"transparent"!==s&&(n.color=s),n},renderPrefix(){if(this.props.item.prefix)return c.createElement(m,{element:"span",className:"ev-textinput-item-prefix ev-component-item-text-color",html:this.props.item.prefix,style:this.getPrefixSuffixStyle()})},renderSuffix(){if(this.props.item.suffix)return c.createElement(m,{element:"span",className:"ev-textinput-item-suffix ev-component-item-text-color",html:this.props.item.suffix,style:this.getPrefixSuffixStyle()})},renderMarkingIcon(){const{component:e,item:t,shouldHideMarking:n}=this.props;if(!e._isEnabled&&e._isComplete&&!n)return c.createElement("div",{className:"ev-textinput-item-state"},c.createElement(u,{isCorrect:t._isCorrect}))},calculateInputWidth(){const{component:e,item:t}=this.props;if(!e._autoSizeInputFields&&!t.inputWidth)return null;if(!e._autoSizeInputFields)return`${t.inputWidth}px`;const n=[...t._answers,e.placeholder||""];return`${s(n,(e=>e.length)).length+3}ch`},render(){const{props:e}=this;return c.createElement("div",{className:this.getClassName()},c.createElement("div",{className:"ev-textinput-item-inner"},c.createElement("label",null,this.renderPrefix(),c.createElement("div",{className:"ev-textinput-item-input-container"},c.createElement(d,{className:"ev-textinput-item-input",value:e.item.value||"",ariaLabel:e.item.inputAriaLabel,placeholder:e.component.placeholder,isDisabled:!e.component._isEnabled,width:this.calculateInputWidth(),onChange:t=>e.onChange(e.item._id,t)}),this.renderMarkingIcon()),this.renderSuffix())))}});e.exports=_},21869:(e,t,n)=>{"use strict";const s=n(55807),{SETUP_COMPONENT:i,SETUP_ANSWER_STATE:r,RESET_QUESTION:o,SUBMIT_QUESTION:a,SHOW_CORRECT_ANSWER:c,HIDE_CORRECT_ANSWER:l}=n(59345),{TEXT_INPUT_VALUE_CHANGED:p}=n(51578);function u(e){const t=e._shouldNotResetAnswers||!1,n=s(e._items,(e=>({...e,value:t?e.value:void 0,_isCorrect:void 0})));return{...e,_items:n,_canSubmit:!1}}function d(e){return(e=(e=e.toLowerCase()).replace(/[.,-/#!$Â£%^&*;:{}=\-_`~()]/g,"")).trim()}function m(e){return{...e,_selectedAnswerState:"_correctAnswer"}}e.exports=(e,t)=>{switch(t.type){case i:return function(e){return e._isComplete?e._isComplete&&!e._hasUserAnswered?e._isCorrect?m(e):function(e){return{...e,_selectedAnswerState:"_incorrectAnswer"}}(e):e:u(e)}(e);case r:return function(e){return e._correctAnswer=s(e._items,(e=>({...e,_isCorrect:!0,value:e._answers[0]}))),e}(e);case p:return function(e,t){let n=!0;const i=s(e._items,(e=>(e._id===t.payload.itemId&&(e={...e,value:t.payload.value}),e.value||(n=!1),e)));return{...e,_items:i,_canSubmit:n}}(e,t);case a:return function(e){if(!e._canSubmit)return e;let t=0,n=!1,i=!1;const r=s(e._items,(i=>{let{value:r}=i,o=i._answers;!1===e._shouldBeMarkedStrictly&&(r=d(r),o=s(o,(e=>d(e))));const a=o.includes(r);return a&&(t++,n=!0),{...i,_isCorrect:a}}));return t===r.length&&(i=!0),{...e,_isCorrect:i,_isPartlyCorrect:!i&&n,_items:r,_hasUserAnswered:!0}}(e);case o:return u(e);case c:return m(e);case l:return function(e){return{...e,_selectedAnswerState:"_items"}}(e);default:return e}}},32287:(e,t,n)=>{"use strict";const{registerComponent:s}=n(60633),i=n(27896),r=n(21869),{textInputValueChanged:o}=n(51578);s("textInput",{component:i,actions:{textInputValueChanged:o},reducer:r,trackingMap:n(59249)})},59249:e=>{"use strict";e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"Boolean",shouldRestore:!0},value:{fieldKey:"value",type:"String",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0}}},31721:(e,t,n)=>{"use strict";const s=n(52898),{bool:i,func:r,number:o,oneOf:a,oneOfType:c,string:l}=n(23615),p=n(27378),u=n(90005),d=s({displayName:"Input",propTypes:{type:a(["text","number"]),value:c([l,o]),onChange:r.isRequired,onFocus:r,onBlur:r,className:l,placeholder:l,min:o,max:o,width:l,ariaLabel:l,isDisabled:i,shouldFocus:i},getDefaultProps:()=>({type:"text"}),componentDidUpdate(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._input.focus()},render(){const{props:e}=this;return p.createElement("input",{ref:e=>this._input=e,className:u("ev-input ev-input-text",e.className),type:e.type,value:e.value,onChange:({target:t})=>e.onChange(t.value),onFocus:e.onFocus,onBlur:e.onBlur,placeholder:e.placeholder,min:e.min,max:e.max,disabled:e.isDisabled,"aria-label":e.ariaLabel,style:e.width?{width:e.width}:{}})}});e.exports=d},98062:(e,t,n)=>{"use strict";const{store:s}=n(60633),i=n(26614);function r(e,t,n){const r=e._feedback[n],o=i(r);return t&&!o?s.getState().course._globals._feedbackText[n]:o?r:null}function o(e,t){const n=e._feedbackNavigation;if(n&&n[t]&&n[t]._isEnabled&&n[t]._linkType)return{_link:n[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?s.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:r(e,t,"_correctGraphic"),feedbackNavigation:o(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,n=t._shouldUseGlobalPartlyCorrectFeedback,i=s.getState().course._globals._feedbackText;return 0===e._attemptsLeft?{feedbackMessage:(n?i.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:r(e,n,"_partlyCorrectFinalGraphic"),feedbackNavigation:o(e,"_partlyCorrect")}:{feedbackMessage:(n?i.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:r(e,n,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:o(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,n=t._shouldUseGlobalIncorrectFeedback,i=s.getState().course._globals._feedbackText;return 0===e._attemptsLeft||!t.notFinal&&!n||!i.incorrectNotFinalFeedback&&n?{feedbackMessage:(n?i.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:r(e,n,"_incorrectFinalGraphic"),feedbackNavigation:o(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}:{feedbackMessage:(n?i.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:r(e,n,"_incorrectNotFinalGraphic"),feedbackNavigation:o(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},20687:e=>{"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:n,isPageReady:s}=e;return!0===s&&!0===n._isReady&&!0!==n[t]}},37238:(e,t,n)=>{"use strict";const s=n(90005);e.exports=e=>s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},52875:e=>{"use strict";e.exports=function(e,t,n,s,i){s&&s.props&&s.props.component?(t.top&&(s.isInviewTop=!0),t.bottom&&(s.isInviewBottom=!0),s.isInviewTop&&s.isInviewBottom&&i&&i(s.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},58403:(e,t,n)=>{var s=n(55193);e.exports=function(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],a=t(o);if(null!=a&&(void 0===c?a==a&&!s(a):n(a,c)))var c=a,l=o}return l}},59517:e=>{e.exports=function(e,t){return e>t}},99825:(e,t,n)=>{var s=n(58403),i=n(59517),r=n(89278);e.exports=function(e,t){return e&&e.length?s(e,r(t,2),i):void 0}}}]);