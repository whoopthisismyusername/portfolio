(self.webpackChunk=self.webpackChunk||[]).push([[8582],{96648:(e,t)=>{"use strict";t.SEARCH_VALUE_CHANGED="SEARCH_VALUE_CHANGED",t.SEARCH_TAGS_CHANGED="SEARCH_TAGS_CHANGED",t.NEW_SEARCH_RESULTS="NEW_SEARCH_RESULTS",t.MENU_FILTER_CHANGED="MENU_FILTER_CHANGED",t.RESOURCE_FILTER_CHANGED="RESOURCE_FILTER_CHANGED",t.searchValueChanged=e=>({type:t.SEARCH_VALUE_CHANGED,payload:e}),t.searchTagsChanged=e=>({type:t.SEARCH_TAGS_CHANGED,payload:e}),t.menuFilterChanged=e=>({type:t.MENU_FILTER_CHANGED,payload:e}),t.resourceFilterChanged=e=>({type:t.RESOURCE_FILTER_CHANGED,payload:e})},67529:(e,t,s)=>{"use strict";var r=s(7914)(s(2398));const a=s(27378),i=s(23615),n=s(90005),c=s(79325),l=({isOpen:e,search:t,activeOverlay:s,toggleActiveOverlay:i})=>a.createElement(c,(0,r.default)({className:"ev-navigation-item ev-search-button",icon:(()=>{const s=`ev-icon-${t._searchNavigationItemIcon}`;return n("ev-icon",{"ev-icon-cross":e,[s]:!e})})(),iconSize:23,tabIndex:s&&!e?"-1":"0"},t.searchAriaLabel&&{"aria-label":t.searchAriaLabel},{"aria-expanded":e,"aria-controls":"ev-search-panel",variant:"chromeless",onClick:()=>i("search")}));l.propTypes={isOpen:i.bool.isRequired,search:i.object.isRequired,activeOverlay:i.string,toggleActiveOverlay:i.func.isRequired},e.exports=l},38116:(e,t,s)=>{"use strict";var r=s(7914)(s(2398));const a=s(52898),{bool:i,func:n,string:c}=s(23615),l=s(27378),o=a({displayName:"SearchInput",propTypes:{label:c,value:c.isRequired,placeholder:c.isRequired,ariaLabel:c,isOpen:i.isRequired,onChange:n.isRequired},componentDidUpdate({isOpen:e}){!e&&this.props.isOpen&&this._input?.focus?.()},onChange(e){this.props.onChange(e.target.value)},render(){const{props:e}=this;return l.createElement("div",{className:"ev-search-input"},e.label&&l.createElement("label",{htmlFor:"ev-search-input"},e.label),l.createElement("input",(0,r.default)({id:"ev-search-input",ref:e=>this._input=e,type:"search",className:"ev-input-text",value:e.value},e.ariaLabel&&{"aria-label":e.ariaLabel},{placeholder:e.placeholder,onChange:this.onChange})))}});e.exports=o},89026:(e,t,s)=>{"use strict";const r=s(55807),a=s(99729),i=s(52898),{array:n,bool:c,func:l,object:o,string:u}=s(23615),h=s(27378),d=s(90005),p=s(39313),g=s(54157),m=s(38116),_=s(49155),E=s(28262),y=s(41704),R=i({displayName:"SearchPanel",propTypes:{isOpen:c.isRequired,search:o.isRequired,searchValue:u.isRequired,searchValueChanged:l.isRequired,searchTagsChanged:l.isRequired,menuFilterChanged:l.isRequired,resourceFilterChanged:l.isRequired,results:n.isRequired,isSearching:c.isRequired,toggleActiveOverlay:l.isRequired,device:o.isRequired,menus:n.isRequired,currentMenuId:u.isRequired,currentResourceId:u.isRequired,currentTags:n.isRequired},onItemClicked(){this.props.toggleActiveOverlay("search")},onTagChanged(e){this.props.searchTagsChanged(e)},onMenuFilterChanged(e){this.props.menuFilterChanged(e)},onResourceChanged(e){this.props.resourceFilterChanged(e)},getStyle:()=>({top:g()}),getHasNoResults(){const{isSearching:e,searchValue:t,currentTags:s,currentResourceId:r,results:a}=this.props;let i=!1;return e||a.length||!t&&!s.length&&"NONE"===r||(i=!0),i},renderSearchTagsPicker(){if(this.props.search._isSearchTagsEnabled)return h.createElement(E,{label:this.props.search.tagsLabelText,tags:this.props.search._tags,currentTags:this.props.currentTags,onTagChanged:this.onTagChanged})},renderMenuFilter(){const{props:e}=this;if(!e.search._isMenuFilterEnabled||e.menus.length<2)return;const t=r(e.menus,(e=>({text:a(e,"_search.menuFilterText",e.displayTitle),value:e._id})));return h.createElement(y,{id:"ev-search-menus",label:e.search.menuFilterLabelText,options:t,value:e.currentMenuId,onChange:this.onMenuFilterChanged})},renderResourceFilter(){const{props:e}=this;if(!e.search._isResourcesEnabled)return;const t=r(e.search._resources,(e=>({text:e.name,value:e._id})));return t.unshift({text:e.search.resourcesPlaceholderText||"",value:"NONE"}),h.createElement(y,{id:"ev-search-resources",label:e.search.resourcesLabelText,options:t,value:e.currentResourceId,onChange:this.onResourceChanged})},render(){const{props:e}=this,{search:t}=e;return h.createElement(p,{elementId:"ev-search-panel",name:"search",style:this.getStyle(),isVisible:e.isOpen,ariaLabel:t.searchSidePanelAriaLabel,className:d("ev-search-panel",{"ev-is-right":t._isOnRightSide,"ev-is-visible":e.isOpen})},h.createElement("div",{className:"ev-search-panel-inner"},h.createElement(m,{label:t.title,value:e.searchValue,placeholder:t.searchInputPlaceholder,ariaLabel:t.searchInputAriaLabel,isOpen:e.isOpen,onChange:e.searchValueChanged}),this.renderSearchTagsPicker(),this.renderMenuFilter(),this.renderResourceFilter(),h.createElement(_,{results:e.results,onItemClicked:this.onItemClicked,windowHeight:e.device.windowHeight,noResultsText:t.noResultsText,isOpen:e.isOpen,isSearchTagsEnabled:t._isSearchTagsEnabled,tags:t._tags,hasNoResults:this.getHasNoResults()})))}});e.exports=R},48241:(e,t,s)=>{"use strict";const r=s(52501),a=s(8921),i=s(99729),n=s(52898),{bool:c,func:l,object:o}=s(23615),u=s(27378),{Link:h}=s(57002),d=s(54794),p=n({displayName:"SearchResultItem",propTypes:{item:o.isRequired,shouldDisplayTags:c.isRequired,tags:o.isRequired,onItemClicked:l.isRequired,styles:o},renderPageTitle(){if(this.props.item.pageTitle)return u.createElement("h2",{className:"ev-search-result-item-sub-title"},this.props.item.pageTitle)},renderBody(){if(this.props.item.body)return u.createElement(d,{className:"ev-search-result-item-body",html:this.props.item.body})},renderSearchText(){const{item:e}=this.props;if(e.searchText&&r(e.matchKeys,"searchText"))return u.createElement(d,{className:"ev-search-result-item-ev-search-text",html:e.searchText})},renderTags(){if(!this.props.shouldDisplayTags)return;const e=a(this.props.tags).pick(i(this.props.item,"tagIds",[])).map((e=>u.createElement("li",{key:e._id,className:"ev-search-result-item-tag",style:{backgroundColor:e._color}},e.label))).value();return u.createElement("ul",{className:"ev-search-result-item-tags"},e)},render(){return u.createElement("li",{className:"ev-search-result-item",style:this.props.styles},u.createElement(d,{element:h,className:"ev-search-result-item-title",to:this.props.item.link,onClick:this.props.onItemClicked,html:this.props.item.title}),this.renderPageTitle(),this.renderBody(),this.renderSearchText(),this.renderTags())}});e.exports=p},49155:(e,t,s)=>{"use strict";const r=s(83864),a=s(52898),{array:i,bool:n,func:c,number:l,string:o}=s(23615),u=s(27378),h=s(31542),{Transition:d}=s(24450),p=s(48241),g=a({displayName:"SearchResults",propTypes:{results:i.isRequired,onItemClicked:c.isRequired,windowHeight:l.isRequired,noResultsText:o.isRequired,hasNoResults:n.isRequired,tags:i.isRequired,isSearchTagsEnabled:n.isRequired},getInitialState:()=>({height:window.innerHeight}),componentDidMount(){this.setHeight(this.props.windowHeight)},UNSAFE_componentWillReceiveProps(e){e.windowHeight!==this.props.windowHeight&&this.setHeight(e.windowHeight),e.results!==this.props.results&&(h.findDOMNode(this).scrollTop=0)},setHeight(e){const t=h.findDOMNode(this),{top:s}=t.getBoundingClientRect(),r=e-s;this.setState({height:r})},renderNoResults(){if(this.props.hasNoResults)return u.createElement("div",{className:"ev-search-no-results"},this.props.noResultsText)},renderResults(){const{props:e}=this,t=r(e.tags,"_id");return u.createElement(d,{keys:e.results.map((e=>e._id)),items:e.results,from:{opacity:0,x:20},enter:{opacity:1,x:0},leave:{opacity:0,x:20}},(s=>({opacity:r,x:a})=>u.createElement(p,{key:s._id,item:s,tags:t,shouldDisplayTags:e.isSearchTagsEnabled,onItemClicked:e.onItemClicked,styles:{opacity:r,transform:`translate3d(${a}%,0,0)`}})))},render(){return u.createElement("div",{className:"ev-search-results",style:{height:this.state.height}},this.renderNoResults(),u.createElement("ul",{className:"ev-search-results-list"},this.renderResults()))}});e.exports=g},41704:(e,t,s)=>{"use strict";var r=s(8528);const a=s(55807),i=s(27378),n=s(52898),c=s(23615),l=n({displayName:"SearchSelectFilter",propTypes:{id:c.string.isRequired,label:c.string.isRequired,options:c.array.isRequired,value:c.string.isRequired,onChange:c.func.isRequired},onChange({target:e}){this.props.onChange(e.value)},renderOptions(){const{options:e}=this.props;return a(e,(e=>i.createElement("option",{key:e.value,value:e.value},r(`<div>${e.text}</div>`).text())))},render(){const{id:e,value:t,label:s}=this.props;return i.createElement("div",{className:"ev-search-select-filter"},i.createElement("label",{className:"ev-search-select-filter-label",htmlFor:e},s),i.createElement("select",{id:e,className:"ev-search-select-filter-select",value:t,onChange:this.onChange},this.renderOptions()))}});e.exports=l},28262:(e,t,s)=>{"use strict";const r=s(55807),a=s(52501),i=s(27378),{arrayOf:n,func:c,shape:l,string:o}=s(23615),u=s(34860),h=e=>i.createElement("fieldset",{className:"ev-search-tags-picker"},i.createElement("legend",{className:"ev-search-tags-picker-label"},e.label),r(e.tags,(t=>i.createElement(u,{key:t._id,tag:t,isSelected:a(e.currentTags,t._id),onTagChanged:e.onTagChanged}))));h.propTypes={label:o.isRequired,currentTags:n(o).isRequired,tags:n(l({_id:o.isRequired,label:o.isRequired,_color:o.isRequired})).isRequired,onTagChanged:c.isRequired},e.exports=h},34860:(e,t,s)=>{"use strict";const r=s(27378),{bool:a,func:i,object:n}=s(23615),c=s(90005),l=e=>r.createElement("div",{className:c("ev-search-tags-picker-item",{"ev-is-selected":e.isSelected})},r.createElement("input",{className:"ev-input-checkbox",type:"checkbox",id:e.tag._id,checked:e.isSelected,name:"ev-search-tags",onChange:()=>e.onTagChanged(e.tag._id)}),r.createElement("label",{htmlFor:e.tag._id},e.tag.label),r.createElement("span",{className:"ev-search-tags-picker-item-color",style:{backgroundColor:e.tag._color}}));l.propTypes={isSelected:a.isRequired,tag:n.isRequired,onTagChanged:i.isRequired},e.exports=l},77992:(e,t,s)=>{"use strict";const r=s(52898),a=s(27378),{connect:i}=s(13844),n=s(93534),{toggleActiveOverlay:c}=s(49637),l=s(67529),o=r({displayName:"SearchButtonContainer",render(){return a.createElement(l,this.props)}});e.exports=i((e=>({isOpen:n("search",e),activeOverlay:e.overlay.activeOverlay})),{toggleActiveOverlay:c})(o)},7326:(e,t,s)=>{"use strict";const r=s(52898),a=s(27378),{connect:i}=s(13844),{toggleActiveOverlay:n}=s(49637),c=s(93534),l=s(89026),{menusSelector:o}=s(28431),{searchValueChanged:u,searchTagsChanged:h,menuFilterChanged:d,resourceFilterChanged:p}=s(96648),g=r({displayName:"SearchPanelContainer",render(){return a.createElement(l,this.props)}});e.exports=i(((e,t)=>({isOpen:c("search",e),searchValue:e.search.searchValue,currentTags:e.search.currentTags,currentMenuId:e.search.currentMenuId,currentResourceId:e.search.currentResourceId,results:e.search.results,isSearching:e.search.isSearching,device:e.device,menus:o(e,t),navigation:e.navigation})),{searchValueChanged:u,toggleActiveOverlay:n,searchTagsChanged:h,menuFilterChanged:d,resourceFilterChanged:p})(g)},73376:(e,t,s)=>{"use strict";const r=s(64925),{Observable:a}=s(49923),{SETUP_APP:i,PUSH_LOCATION:n}=s(36329),{addElement:c}=s(15766),l=s(25401),o=s(77992),u=s(7326),h=s(74916),{SEARCH_VALUE_CHANGED:d,NEW_SEARCH_RESULTS:p,SEARCH_TAGS_CHANGED:g,MENU_FILTER_CHANGED:m,RESOURCE_FILTER_CHANGED:_,menuFilterChanged:E}=s(96648);t.setupSearchEpic=(e,t)=>e.filter((({type:e})=>{if(e===i){const{course:e}=t.getState();return e._search&&e._search._isEnabled}return!1})).mergeMap((()=>{const e=t.getState(),{course:s}=e,r=s._search;h.initialize(e);const i=void 0===r._isOnRightSide||r._isOnRightSide,n=i?"right":"left",l=i?8:0;return a.of(c({name:"searchButton",parent:"navigationTop",component:o,position:n,priority:l,props:{search:r}}),c({name:"searchPanel",parent:"container",component:u,props:{search:r}}),E(s._id))})),t.searchChangedEpic=(e,t)=>e.ofType(d,g,m,_).debounce((({type:e})=>a.timer(e===d?500:0))).map((()=>{const e=t.getState(),{searchValue:s,currentTags:r,currentResourceId:a}=e.search;let i=[];return(s||r.length||"NONE"!==a)&&(i=h.search(e)),{type:p,payload:i}})),t.syncMenuFilterEpic=(e,t)=>e.filter((({type:e})=>{if(e!==n)return;const{course:s}=t.getState(),r=s._search||{};return r._isEnabled&&r._isMenuFilterEnabled&&r._shouldSyncMenuFilter})).mergeMap((()=>{const e=t.getState(),{location:s,search:i,contentObjects:n,course:c}=e,{currentContentType:o,currentId:u}=s;let h;if("menu"===o)h=u;else if("page"===o){const t=l(n[u],e),s=r(t,{_type:"menu"});h=s?s._id:c._id}else h=c._id;return h&&h!==i.currentMenuId?a.of(E(h)):a.empty()}))},49696:e=>{"use strict";e.exports={_about:{title:"title",body:"description",additionalFields:["_aboutContent"],link:"/about"},_achievements:{title:"title",body:"body",link:"/achievements"},_courseAssessment:{title:"title",body:"body",link:"/courseAssessment/showResults"},_bookShelf:{title:"title",body:"body",link:"/bookShelf"},_glossary:{title:"title",body:"description",link:"/glossary"},_resources:{title:"title",body:"description",link:"/resources"},_tags:{title:"title",body:"body",additionalFields:["overviewTitle","overviewBody"],link:"/tags"}}},74475:(e,t,s)=>{"use strict";const r=s(52501),a=s(81889),{SETUP_APP:i}=s(36329),{SEARCH_VALUE_CHANGED:n,NEW_SEARCH_RESULTS:c,SEARCH_TAGS_CHANGED:l,MENU_FILTER_CHANGED:o,RESOURCE_FILTER_CHANGED:u}=s(96648),h={results:[],isSearching:!1,searchValue:"",currentTags:[],currentMenuId:"",currentResourceId:"NONE"};e.exports=(e=h,t)=>{switch(t.type){case i:return{...h};case n:return{...e,searchValue:t.payload,isSearching:!0};case l:return{...e,currentTags:r(e.currentTags,t.payload)?a(e.currentTags,t.payload):[...e.currentTags,t.payload],isSearching:!0};case o:return{...e,currentMenuId:t.payload,isSearching:!0};case u:return{...e,currentResourceId:t.payload,isSearching:!0};case c:return{...e,results:t.payload,isSearching:!1};default:return e}}},38856:(e,t,s)=>{"use strict";const{registerEpics:r,registerReducer:a}=s(60633),{setupSearchEpic:i,searchChangedEpic:n,syncMenuFilterEpic:c}=s(73376),l=s(74475);r(i,n,c),a("search",l)},74916:(e,t,s)=>{"use strict";const r=s(69238),a=s(83864),i=s(93254),n=s(64925),c=s(8921),l=s(72856),o=s(52501),u=s(29115),h=s(43605),d=s(99729),p=s(34172),g=s(14648),m=s(36417),_=s(98659),E=s(83766),y=s(18623),R=s(79557),v=s(25401),b=s(85156),C=s(64264),T=s(49696);let f;function S(e,t){const s=["_id","_refId","_type","_parentId"],r=[],a=t.course._search,i=a._shouldUseTitleIfNoDisplayTitle,c=a._shouldDisplayParentPage;return l(e,(e=>{if(!(e.displayTitle||i||e.body||d(e,"_search.searchText")))return;const a=v(e,t),l=p(a,((e,t)=>("menu"===t._type&&e.push(t._id),e)),[]),h=u(g(e,s),{title:R(e.displayTitle),body:R(e.body),link:b(e._refId),searchText:d(e,"_search.searchText",""),tagIds:d(e,"_search._searchTagIds",[]),menuIds:l});if(!h.title&&i&&(h.title=e.title),c&&o(["component","block","article"],e._type)){const e=n(a,(e=>"page"===e._type));h.pageTitle=d(e,"_search.searchResultPageTitle",R(e.displayTitle))}r.push(h)})),r}function N(e="",t=[]){const s=[];let r=0;for(let a=0;a<t.length;a++){const[i,n]=t[a],c=d(t,[[a+1],0]),l=A(e,i,4),o=I(e,n,4);null!==l&&l>r&&(r=l,s.push("...")),s.push(e.substring(r,i)),s.push(`<span class="ev-search-highlight">${e.substring(i,n)}</span>`),a!==t.length-1?null!==o&&o<c?(s.push(e.slice(n,o)),r=o):r=n:o?s.push(`${e.slice(n,o)}...`):s.push(e.slice(n))}return s.join("")}function A(e,t,s){const r=e.slice(0,t),{length:a}=r;let i=0,n=null;for(let e=a-1;e>0&&i!==s;e--)" "===r[e]&&(i++,i===s&&(n=e+1));return n}function I(e,t,s){const r=e.slice(t),{length:a}=r;let i=0,n=null;for(let e=0;e<a&&i!==s;e++)" "===r[e]&&(i++,i===s&&(n=e+t));return n}function x(e="",t){return e.length<=t?e:`${e.substr(0,e.lastIndexOf(" ",t))}...`}t.initialize=function(e){const{course:t,components:s,blocks:a,articles:i,contentObjects:n}=e,c=t._search._searchableContent,o=[];if(c.component&&o.push(...S(s,e)),c.block&&o.push(...S(a,e)),c.article&&o.push(...S(i,e)),c.page){const t=r(n,(e=>"page"===e._type));o.push(...S(t,e))}if(c.menu){const s=r(n,(e=>"menu"===e._type));o.push(...S([t,...s],e))}c.extension&&o.push(...function(e){const t=[];return l(T,((s,r)=>{if(!d(e,[r,"_isEnabled"]))return;let a="";l(s.additionalFields,(t=>{const s=e[r][t];s&&(a+=`${s}...`)})),t.push({_id:r,_type:"extension",title:R(e[r][s.title]),body:R(e[r][s.body]),searchText:R(a),link:s.link})})),t}(t)),f=o},t.search=function(e){const{search:t,course:s,isShowingHiddenContent:r}=e,{currentTags:p,currentMenuId:R,currentResourceId:v,searchValue:b}=t,T=a(p,(e=>e));let S,A=b.replace("/","").trim();A&&s._search._isTokenized&&(A=i(A).join("|")),A&&(S=new RegExp(A,"gi"));const I=[];let k=f;if(s._search._isResourcesEnabled&&"NONE"!==v){const e=n(s._search._resources,{_id:v});e&&e._resourceIds&&(k=c(f).filter((e=>"extension"!==e._type)).keyBy("_refId").pick(e._resourceIds).values().value())}return l(k,(t=>{const a="extension"===t._type;if(!r&&!a&&C(t._refId,e)._isHidden)return;if(s._search._isSearchTagsEnabled&&p.length){if(a)return;if(!function(e,t){const s=d(e,"tagIds",[]),r=g(t,s);return!!m(r)}(t,T))return}if(s._search._isMenuFilterEnabled&&R!==s._id){if(a)return;if(!o(t.menuIds,R))return}if(!a&&y(C(t._refId,e),e))return;let i;if(A){const e=function(e,t){const s=["title","body","searchText"],r={matchKeys:[],matches:0,matchWords:0},a=[];for(let i=0;i<s.length;i++){const n=s[i],c=e[n],l=[];let o;for(;o=t.exec(c);){const e=o[0];a.push(_(e)),l.push([o.index,o.index+e.length])}l.length?(r.matchKeys.push(n),r[n]=N(c,l)):r[n]=x(c,50),r.matches+=l.length}return r.matchWords=E(a).length,r}(t,S);e.matches&&(i=u({},t,e))}else i=u({},t,{title:x(t.title,50),body:x(t.body,50),matchKeys:[]});i&&I.push(i)})),A?h(I,["matchWords","matches"],["desc","desc"]):I}},28431:(e,t,s)=>{"use strict";const r=s(69238),{createSelector:a}=s(80406),i=s(18623);t.menusSelector=a([e=>e.contentObjects,e=>e.course],((e,t)=>{const s=r(e,(e=>"menu"===e._type&&!i(e)));return s.unshift(t),s}))},25401:(e,t,s)=>{"use strict";const{store:r}=s(60633),a=s(90766);function i(e,t,s){const r=a(e,t);return s.push(r),"course"!==r._type&&i(r,t,s),s}e.exports=function(e,t){t||(t=r.getState());const s=[];return i(e,t,s),s}},18623:(e,t,s)=>{"use strict";const r=s(99729),a=s(64925),{store:i}=s(60633),n=s(25401);e.exports=function(e,t){if(t=t||i.getState(),!r(t,"course._contentLocking._isEnabled",!1)||"course"===e._type)return!1;if(e._isLocked)return!0;const s=n(e,t);return void 0!==a(s,(e=>e._isLocked))}},11005:(e,t,s)=>{var r=s(52485),a=s(58095),i=s(21796),n=s(66070),c=s(39334),l=s(65581);e.exports=function(e,t,s,o){var u=-1,h=a,d=!0,p=e.length,g=[],m=t.length;if(!p)return g;s&&(t=n(t,c(s))),o?(h=i,d=!1):t.length>=200&&(h=l,d=!1,t=new r(t));e:for(;++u<p;){var _=e[u],E=null==s?_:s(_);if(_=o||0!==_?_:0,d&&E==E){for(var y=m;y--;)if(t[y]===E)continue e;g.push(_)}else h(t,E,o)||g.push(_)}return g}},36468:(e,t,s)=>{var r=s(80068),a=s(92360);e.exports=function(e){return a(e)&&r(e)}},81889:(e,t,s)=>{var r=s(11005),a=s(1197),i=s(36468),n=a((function(e,t){return i(e)?r(e,t):[]}));e.exports=n}}]);