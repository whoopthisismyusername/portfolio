"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1854],{30618:(e,t,s)=>{const n=s(52898),i=s(23615),o=s(27378),r=s(31542),a=n({displayName:"Swipeable",propTypes:{onSwipe:i.func.isRequired,threshold:i.number,allowedTime:i.number,restraint:i.number},getDefaultProps:function(){return{threshold:30,allowedTime:400,restraint:100}},getInitialState:function(){return{_startX:0,_startY:0,_startTime:0}},onTouchStart:function(e){const t=e.changedTouches[0];this.setState({_startX:t.pageX,_startY:t.pageY,_startTime:(new Date).getTime()}),e.target===r.findDOMNode(this)&&e.preventDefault()},onTouchMove:function(){},onTouchEnd:function(e){const t=e.changedTouches[0],s=t.pageX-this.state._startX,n=t.pageY-this.state._startY,i=(new Date).getTime()-this.state._startTime;let o="none";i<=this.props.allowedTime&&(Math.abs(s)>=this.props.threshold&&Math.abs(n)<=this.props.restraint?o=s<0?"left":"right":Math.abs(n)>=this.props.threshold&&Math.abs(s)<=this.props.restraint&&(o=n<0?"up":"down"));const a={direction:o,speed:{x:s/i,y:n/i},distance:{x:s,y:n},timeTaken:i};this.props.onSwipe(a),this.setState({_startX:0,_startY:0,_startTime:0}),e.target===r.findDOMNode(this)&&e.preventDefault()},render:function(){return o.createElement("div",{className:"ev-swipeable",onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd},this.props.children)}});e.exports=a},65529:e=>{e.exports=function(e){const t=e.displayTitle,s=e._heroImage?._isEnabled?e._heroImage.title:null;return t||s}},40727:(e,t,s)=>{const n=s(99729),{Observable:i}=s(49923),{setLocationReadyState:o,PUSH_LOCATION:r}=s(36329),a=s(75967),l=s(35550);e.exports=e=>(t,s)=>t.filter((({type:t})=>{if(t!==r)return;const{location:n,settings:i}=s.getState();return"menu"===n.currentContentType&&i._menu===e})).switchMap((()=>{const t=s.getState(),{location:r,contentObjects:u,device:h,course:c}=t,{currentId:m}=r,d=m===c._id?c:u[m],p=n(d,[`_${e}`,"_heroImage"]);if(!p||!p._graphic)return i.empty();const w=a(p._graphic.src,p._graphic.srcAdvanced,!0);return w?i.concat(i.of(o(!1)),i.bindCallback(l)(w,!1).map((()=>o(!0)))):i.empty()}))},9256:(e,t,s)=>{const n=s(99729),i=s(55807),o=s(52898),{array:r,bool:a,object:l}=s(23615),u=s(27378),h=s(30618),c=s(90005),{Menu:m}=s(73931),d=s(94985),p=o({displayName:"SwipeMenu",propTypes:{menu:l.isRequired,device:l.isRequired,theme:l.isRequired,itemIds:r.isRequired,location:l.isRequired,hasActionBar:a.isRequired,course:l},getInitialState:()=>({currentIndex:0}),UNSAFE_componentWillReceiveProps({device:e}){const{props:t}=this;t.device.orientation!==e.orientation&&this.setState({currentIndex:0})},getMenuItemsContainerClass(){const{menu:e,device:t}=this.props;let s=e._swipeMenu._shouldShowControlsOnHover;const n=e._swipeMenu._shouldShowControlsOnBottom,i=e._swipeMenu._shouldPartiallyShowNextItem,o=e._swipeMenu._shouldDisableItemScaling;return(t.touch&&!t.isWindowsTouchScreen||n)&&(s=!1),c("ev-menu-items-container ev-clearfix",{"ev-show-controls-on-hover":s,"ev-show-controls-bottom":n,"ev-partially-show-next-item":i,"ev-should-disable-item-scaling":o})},getMenuItemsStyle(){let e="auto";const t=this.props.menu._swipeMenu;return t._shouldShowControlsOnBottom?e="auto":!t._shouldShowControlsOnBottom&&t._shouldShowControlsOnHover?e=this.props.device.touch&&!this.props.device.isWindowsTouchScreen?"0 34px":"auto":t._shouldShowControlsOnBottom||t._shouldShowControlsOnHover||(e="0 34px"),{margin:e,overflow:this.props.menu._swipeMenu._shouldAlwaysShowItems?"visible":"hidden"}},getMenuItemsInnerStyle(e){const{device:t,menu:s}=this.props,{currentIndex:n}=this.state,i=this.getItemsVisible(),{_shouldPartiallyShowNextItem:o,_shouldShowControlsOnHover:r,_shouldShowControlsOnBottom:a}=s._swipeMenu;let l=100/i*n;if(o&&(!r||!a))switch(t.screenSize){case"medium":l=46*n;break;case"small":l=90*n;break;default:l=31*n}return{transform:`translate3d(${e?`${l}%`:`-${l}%`}, 0, 0)`}},getItemsVisible(){const{device:e,itemIds:t}=this.props,s=t.length;let n;switch(e.screenSize){case"medium":n=2;break;case"small":n=1;break;default:n=3}return s<n?s:n},showItemContent(e){this.setState({_itemSelectedId:e})},onLeftClicked(e){e.preventDefault(),e.stopPropagation(),this.setState({currentIndex:this.state.currentIndex-1,_itemSelectedId:null})},onRightClicked(e){e.preventDefault(),e.stopPropagation(),this.setState({currentIndex:this.state.currentIndex+1,_itemSelectedId:null})},onMenuItemsSwipe(e){"left"!==e.direction?"right"===e.direction&&this.onSwipeRight():this.onSwipeLeft()},onSwipeLeft(){this.state.currentIndex<this.props.itemIds.length-this.getItemsVisible()&&this.setState({currentIndex:this.state.currentIndex+1})},onSwipeRight(){this.state.currentIndex>0&&this.setState({currentIndex:this.state.currentIndex-1})},renderLeftControl(e){const t=0===this.state.currentIndex;if(t&&this.props.menu._swipeMenu._shouldHideDisabledControl)return;const s=c("ev-menu-controls",{"ev-menu-controls-left":!e,"ev-menu-controls-right":e,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom}),n=c("ev-button ev-primary ev-menu-control ev-menu-control-left",{"ev-is-active":!t});return u.createElement("div",{className:s},u.createElement("button",{className:n,onClick:this.onLeftClicked,disabled:t,"aria-label":this.props.menu._swipeMenu.prevButtonAriaLabel},u.createElement("i",{className:c("ev-icon",{"ev-icon-arrow-left":!e,"ev-icon-arrow-right":e})})))},renderRightControl(e){const t=this.state.currentIndex===this.props.itemIds.length-this.getItemsVisible();if(t&&this.props.menu._swipeMenu._shouldHideDisabledControl)return;const s=c("ev-menu-controls",{"ev-menu-controls-right":!e,"ev-menu-controls-left":e,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom}),n=c("ev-button ev-primary ev-menu-control ev-menu-control-right",{"ev-is-active":!t,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom});return u.createElement("div",{className:s},u.createElement("button",{className:n,onClick:this.onRightClicked,disabled:t,"aria-label":this.props.menu._swipeMenu.nextButtonAriaLabel},u.createElement("i",{className:c("ev-icon",{"ev-icon-arrow-right":!e,"ev-icon-arrow-left":e})})))},getShouldShowProgressBars(){const{props:e}=this,t=n(e.theme,"_menu._settings._shouldShowProgressBarsOnMenus","content"),s=n(e.menu,"_swipeMenu._shouldShowProgressBarsOnMenus",!0);return"content"===t?s:"true"===t},renderItems(){const{props:e}=this,t=n(e.menu,"_swipeMenu._shouldShowIconOnMenuItems",!1),s=n(e.theme,"_menu._settings._durationIcon",null),o=e.course._swipeMenu?._shouldDisableDetailOnHover,r=this.getShouldShowProgressBars();return i(e.itemIds,((n,i)=>{const a=i>=this.state.currentIndex&&i<this.state.currentIndex+this.getItemsVisible(),l=n===this.state._itemSelectedId;return u.createElement(d,{key:n,itemId:n,showItemContent:this.showItemContent,isContentVisible:l,isVisibleItem:a,shouldShowProgressBarsOnMenus:r,shouldShowIconOnMenuItems:t,shouldAlwaysShowContent:o,shouldAlwaysShowItems:e.menu._swipeMenu._shouldAlwaysShowItems,durationIcon:s})}))},render(){const{props:e}=this,t=n(e.course,"_isRTL",!1);return u.createElement(m,{className:"ev-swipe-menu",menu:e.menu,menuSettings:e.menu._swipeMenu,device:e.device,theme:e.theme,location:e.location,hasActionBar:e.hasActionBar},u.createElement("div",{className:this.getMenuItemsContainerClass()},this.renderLeftControl(t),u.createElement(h,{onSwipe:this.onMenuItemsSwipe},u.createElement("div",{className:"ev-menu-items",ref:"menuItems",style:this.getMenuItemsStyle()},u.createElement("div",{className:"ev-menu-items-inner",style:this.getMenuItemsInnerStyle(t)},this.renderItems()))),this.renderRightControl(t)))}});e.exports=p},94985:(e,t,s)=>{const n=s(52898),i=s(27378),o=s(90005),r=s(65529),a=s(77919),l=s(26614),u=s(75967),h=s(92807),c=s(96155),m=s(50998),{MenuItemProgress:d,MenuItemDuration:p,MenuItemHOC:w,MenuItemLink:v}=s(73931),I=s(39313),g=n({displayName:"SwipeMenuItem",showItemContent(){this.props.showItemContent(this.props.item._id)},onLinkPressed(e){e.stopPropagation()},getStyle(){const{width:e,height:t,item:s,isContentVisible:n}=this.props,i={width:`${e}px`,height:`${t}px`},o=s._swipeMenu?._graphic,r=s._swipeMenu?._hoverGraphic;return l(o)&&(i.backgroundImage=`url(${u(o.src,o.srcAdvanced,!0)})`),n&&l(r)&&(i.backgroundImage=`url(${u(r.src,r.srcAdvanced,!0)})`),i},getItemClass(){const{props:e}=this;return o(`ev-menu-item ev-collection-item ev-menu-item-${e.item._id}`,{"ev-is-visible-item":!!e.shouldAlwaysShowItems||e.isVisibleItem,"ev-is-content-visible":e.isContentVisible,"ev-static-content":e.shouldAlwaysShowContent})},renderTitle(){const e=r(this.props.item);if(e)return i.createElement(c,{id:`${this.props.item._id}-title`,headingElement:"h2",displayTitle:e,className:"ev-menu-item-title",innerClassName:"ev-menu-item-title-inner"})},renderBody(){if(this.props.item.description)return i.createElement(m,{id:`${this.props.item._id}-description`,body:this.props.item.description,className:"ev-menu-item-body",innerClassName:"ev-menu-item-body-inner"})},renderDuration(){if(this.props.item.duration)return i.createElement(p,{duration:this.props.item.duration,durationIcon:this.props.durationIcon,durationLabel:this.props.item.durationLabel})},renderProgress(){const{props:e}=this;if(e.shouldShowProgressBarsOnMenus)return i.createElement(d,{item:e.item,pageMenuItemsCompletedCount:e.pageMenuItemsCompletedCount,pageMenuItemsCount:e.pageMenuItemsCount,completedChildrenAsPercentage:e.completedChildrenAsPercentage})},renderLink(){const{item:e}=this.props;return i.createElement(v,{id:e._id,isLocked:e._isLocked,isVisited:e._isVisited,linkText:e.linkText,linkIcon:e.linkIcon,isLinkIconRightPosition:e.isLinkIconRightPosition,link:`/${e._type}/${e._id}`,onClick:this.onLinkPressed,onTouchMove:this.onLinkPressed,onTouchStart:this.onLinkPressed,onTouchEnd:this.onLinkPressed})},renderElements(e){return h("menuItem",e,{item:this.props.item})},render(){return i.createElement(I,{id:this.props.item._id,name:"menu item",className:this.getItemClass(),style:this.getStyle(),onMouseOver:this.showItemContent,onMouseOut:this.showItemContent,onTouchStart:this.showItemContent},this.renderElements("root"),a(this.props.item,"menuitem"),i.createElement("div",{className:"ev-menu-item-inner ev-collection-item-inner"},i.createElement("div",{className:"ev-collection-item-content"},i.createElement("div",{className:"ev-collection-item-content-inner ev-clearfix"},this.renderTitle(),i.createElement("div",{className:"ev-menu-item-hidden-content"},this.renderBody(),this.renderDuration(),this.renderElements("content"),this.renderProgress(),this.renderLink())))))}});e.exports=w(g)},77939:(e,t,s)=>{const{registerMenu:n,registerEpics:i}=s(60633),o=s(40727),r=s(9256);i(o("swipeMenu")),n("swipeMenu",r)}}]);