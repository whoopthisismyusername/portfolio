"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1552],{52445:(e,t)=>{t.DRAG_AND_DROP_ITEM_DROPPED_INTO_ZONE="DRAG_AND_DROP_ITEM_DROPPED_INTO_ZONE",t.DRAG_AND_DROP_ITEM_DROPPED_OUT_OF_ZONE="DRAG_AND_DROP_ITEM_DROPPED_OUT_OF_ZONE",t.DRAG_AND_DROP_ITEM_SELECTED="DRAG_AND_DROP_ITEM_SELECTED",t.itemDroppedIntoZone=(e,o,r)=>({type:t.DRAG_AND_DROP_ITEM_DROPPED_INTO_ZONE,payload:{componentId:e,itemId:o,zoneId:r}}),t.itemDroppedOutOfZone=(e,o)=>({type:t.DRAG_AND_DROP_ITEM_DROPPED_OUT_OF_ZONE,payload:{componentId:e,itemId:o}}),t.itemSelected=(e,o)=>({type:t.DRAG_AND_DROP_ITEM_SELECTED,payload:{componentId:e,itemId:o}})},16008:(e,t,o)=>{const r=o(18180),n=o(64925),s=o(55807),i=o(52898),{bool:a,func:p,object:c}=o(23615),d=o(27378),_=o(31542),l=o(90005),{Component:m}=o(30189),h=o(37238),u=o(98062),D=o(20687),g=o(52875),I=o(51191),b=o(18795),Z=i({displayName:"DragAndDrop",propTypes:{component:c.isRequired,itemSelected:p.isRequired,itemDroppedIntoZone:p.isRequired,itemDroppedOutOfZone:p.isRequired,submitQuestion:p.isRequired,actionButtonClicked:p.isRequired,setComponentAsReady:p.isRequired,setComponentAsViewed:p.isRequired,setComponentAsStarted:p.isRequired,showFeedback:p.isRequired,resetQuestion:p.isRequired,shouldHideMarking:a,styles:c},getInitialState:()=>({_isItemDragging:!1}),componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback()},UNSAFE_componentWillReceiveProps(e){const{component:t}=this.props;!e.component._canSubmit||!t._canAutoSubmit||t._canSubmit||t._isSubmitted||t._canSubmitAtAnyTime||this.props.submitQuestion(t._id),t._canAutoSubmit&&!t._isSubmitted&&!t._canSubmitAtAnyTime&&e.component._attemptsLeft>0&&e.component._isSubmitted&&!e.component._isCorrect&&this.props.resetQuestion(t._id)},showFeedback(){const e=u(this.props.component);this.props.showFeedback(e)},setFocusOnDroppedItem(e){r((()=>{if(this.props.component._isComplete)return;const t=_.findDOMNode(this).querySelector(`[id='${e}']`);t?.focus?.()}))},onItemDragMove(){this.setState({_isItemDragging:!0})},onItemDragEnd(){this.setState({_isItemDragging:!1})},getWidgetClassName(){const{component:e}=this.props;return l(h(e),`ev-${e._dropZonelayout}`,{"ev-draggable-items-grid-layout":e._useItemGridLayout,"ev-drop-zones-compact":e._hasCompactDropZones,"ev-drop-zones-horizontal-layout":e._hasHorizontalDropZones})},onItemDroppedOutOfZone(e){const{props:t}=this;n(t.component._items,{_id:e})._currentDropZone&&t.itemDroppedOutOfZone(t.component._id,e),this.setFocusOnDroppedItem(e)},onItemDroppedIntoZone(e,t){const{props:o}=this;o.component._hasStarted||o.setComponentAsStarted(o.component._id),o.itemDroppedIntoZone(o.component._id,e,t),this.setFocusOnDroppedItem(e)},onItemSelected(e){this.props.itemSelected(this.props.component._id,e)},onDropZoneSelected(e){this.onItemDroppedIntoZone(this.props.component._selectedItemId,e)},onVisibilityChange(...e){g(...e,this,this.props.setComponentAsViewed)},renderDropZones(e){const{component:t,shouldHideMarking:o}=this.props;return t._dropZones?d.createElement("div",{className:"ev-drop-zones ev-clearfix"},s(t._dropZones,(r=>d.createElement(b,{key:r._id,modelId:t._id,id:r._id,text:r.text,onItemDroppedOutOfZone:this.onItemDroppedOutOfZone,onItemDroppedIntoZone:this.onItemDroppedIntoZone,onItemSelected:this.onItemSelected,onDropZoneSelected:this.onDropZoneSelected,allItems:t._items,droppedItems:r._droppedItems,graphic:r._graphic,isComplete:t._isComplete,tabIndex:e?-1:0,selectedItemId:t._selectedItemId,shouldRejectIncorrect:t._shouldZonesRejectIncorrect,shouldUseCoverBackgroundSize:r._shouldUseCoverBackgroundSize,isSingleDropZone:1===t._dropZones.length,shouldHideMarking:o,onItemDragMove:this.onItemDragMove,onItemDragEnd:this.onItemDragEnd,isItemDragging:this.state._isItemDragging,shouldDisplayDropZonePointers:t._shouldDisplayDropZonePointers,ariaLabel:r.ariaLabel})))):null},renderDraggableItems(){const{component:e}=this.props,t=e[e._selectedAnswerState];return d.createElement("div",{className:"ev-draggable-items"},s(t,(t=>t._currentDropZone?null:d.createElement(I,{key:t._id,modelId:e._id,id:t._id,text:t.text,tabIndex:t._isDisabled?-1:0,isSelected:t._id===e._selectedItemId,onItemDroppedOutOfZone:this.onItemDroppedOutOfZone,showMarking:t._showMarking,isCorrect:t._isInCorrectDropZone,isComplete:e._isComplete,isDisabled:t._isDisabled,onItemSelected:this.onItemSelected,correctDropZones:t._correctDropZones,graphic:t._graphic,onItemDragMove:this.onItemDragMove,onItemDragEnd:this.onItemDragEnd}))))},renderContent(){const{component:e}=this.props,{_dropZonelayout:t}=e,o=!1===e._isEnabled;return"drop-zones-top"!==t?d.createElement("div",{className:"ev-drag-and-drop-layout-container","aria-hidden":o},this.renderDraggableItems(),this.renderDropZones(o)):d.createElement("div",{className:"ev-drag-and-drop-layout-container","aria-hidden":o},this.renderDropZones(o),this.renderDraggableItems())},render(){const{props:e}=this;return d.createElement(m,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,onActionButtonClicked:e.actionButtonClicked,isVisibilitySensorActive:D(e),onVisibilityChange:this.onVisibilityChange,onFeedbackButtonClicked:this.showFeedback},d.createElement("div",{role:"application","aria-roledescription":e.component.ariaRoleDescription,className:this.getWidgetClassName()},this.renderContent(),e.component._isEnabled?null:d.createElement("div",{className:"ev-draggable-blocker"})))}});e.exports=Z},51191:(e,t,o)=>{const r=o(52898),n=o(48121),s=o(13914),i=o(5859),a=o(27378),p=o(31542),c=o(46451),d=o(90005),_=o(40155),l=o(54794),m=o(90219),h=r({displayName:"DraggableItem",mixins:[n],getInitialState:()=>({_isDragging:!1,_x:0,_y:0}),componentDidMount(){this._isMounted=!0,c(p.findDOMNode(this)).draggable({onmove:this.onDragMove,onend:this.onDragEnd,autoScroll:!0,modifiers:[c.modifiers.restrict({restriction:".ev-dragAndDrop-widget"})]})},componentDidUpdate(e,t){this.state._isDragging&&!t._isDragging&&(this._item.focus(),this.props.onItemSelected(this.props.id))},componentWillUnmount(){this._isMounted=!1,c(p.findDOMNode(this)).unset()},onDragMove({dx:e,dy:t}){this.setState({_x:this.state._x+e,_y:this.state._y+t,_isDragging:!0},this.props.onItemDragMove)},onDragEnd(e){this._isMounted&&(this.setState({_isDragging:!1,_x:0,_y:0},this.props.onItemDragEnd),e.dropzone||this.props.onItemDroppedOutOfZone(this.props.id),this.props.onItemSelected(void 0))},onKeyPress(e){const{props:t}=this;s.isSpaceKey(e)&&t.onItemSelected(t.id),s.isEscapeKey(e)&&this.props.isSelected&&(t.isInDropZone?t.onItemDroppedOutOfZone(t.id):t.onItemSelected(void 0))},getClassName(){return d("ev-draggable-item",`ev-draggable-item-${this.props.modelId}`,"ev-component-item",{"ev-is-dragging":this.state._isDragging||this.props.isSelected,"ev-is-disabled":this.props.isDisabled})},renderIcon(){return this.props.isComplete?this.props.showMarking?a.createElement(m,{className:"ev-draggable-item-icon",isCorrect:this.props.isCorrect}):void 0:a.createElement(_,{className:"ev-draggable-item-icon",icon:"move"})},renderGraphic(){return this.props.graphic&&this.props.graphic.src?a.createElement(i,{className:"ev-draggable-item-graphic",graphicSrc:this.props.graphic.src,altText:this.props.graphic.alt}):null},render(){return a.createElement("button",{ref:e=>this._item=e,id:this.props.id,className:this.getClassName(),style:{left:`${this.state._x}px`,top:`${this.state._y}px`},tabIndex:this.props.tabIndex,onKeyDown:this.onKeyPress,"aria-grabbed":this.state._isDragging||this.props.isSelected},this.renderIcon(),this.renderGraphic(),a.createElement(l,{element:"span",html:this.props.text}))}});e.exports=h},18795:(e,t,o)=>{const r=o(64925),n=o(52501),s=o(55807),i=o(52898),a=o(48121),p=o(13914),c=o(27378),d=o(31542),_=o(90005),l=o(46451),m=o(13756),h=o(50998),u=o(40155),D=o(51191),g=i({displayName:"DropZone",mixins:[a],getInitialState:()=>({_isDropActive:!1}),componentDidMount(){l(d.findDOMNode(this)).dropzone({accept:this.getAcceptableItemClassName,ondropactivate:this.onDropActivate,ondragenter:this.onDragEnter,ondragleave:this.onDragLeave,ondrop:this.onDrop,ondropdeactivate:this.onDropDeactivate,overlap:"pointer"})},componentWillUnmount(){l(d.findDOMNode(this)).unset()},getAcceptableItemClassName(){return`.ev-draggable-item-${this.props.modelId}`},onDropActivate(){this.setState({_isDropActive:!0})},onDragEnter(){this.setState({_isDragEnter:!0})},onDragLeave(){this.setState({_isDragEnter:!1})},onDrop(e){this.setState({_isDragEnter:!1});const t=e.relatedTarget.id;if(this.props.shouldRejectIncorrect){const e=r(this.props.allItems,{_id:t});if(e&&!n(e._correctDropZones,this.props.id))return}r(this.props.droppedItems,{_id:t})||(this.props.onItemDroppedIntoZone(t,this.props.id),this.props.onItemDragEnd())},onDropDeactivate(){this.setState({_isDropActive:!1})},onKeyPress(e){p.isEnterKey(e)&&this.props.selectedItemId&&this.props.onDropZoneSelected(this.props.id)},getClassName(){return _("ev-drop-zone",{"ev-drop-zone-item-over":this.state._isDragEnter,"ev-single-drop-zone":this.props.isSingleDropZone,"ev-is-item-dragging":this.props.isItemDragging,"ev-has-no-text":!this.props.text})},renderGraphic(){if(!this.props.graphic)return;const e={backgroundImage:`url(${m(this.props.graphic.src)})`};return this.props.shouldUseCoverBackgroundSize&&(e.backgroundSize="cover"),c.createElement("div",{role:"img",className:"ev-drop-zone-graphic",style:e,"aria-label":this.props.graphic.alt})},render(){return c.createElement("div",{tabIndex:this.props.tabIndex,className:this.getClassName(),"aria-dropeffect":this.state._isDropActive||this.props.selectedItemId?"move":null,"aria-label":this.props.ariaLabel,onKeyDown:this.onKeyPress},c.createElement(h,{className:"ev-drop-zone-text",body:this.props.text,hasInner:!1}),c.createElement("div",{className:"ev-drop-zone-content"},this.renderGraphic(),c.createElement("div",{className:"ev-drop-zone-dropped-items"},s(this.props.droppedItems,(e=>c.createElement(D,{key:e._id,modelId:this.props.modelId,id:e._id,text:e.text,onItemDroppedOutOfZone:this.props.onItemDroppedOutOfZone,onItemSelected:this.props.onItemSelected,showMarking:e._showMarking&&!this.props.shouldHideMarking,isCorrect:e._isInCorrectDropZone,isInDropZone:!0,tabIndex:this.props.tabIndex,isComplete:this.props.isComplete,isSelected:this.props.selectedItemId===e._id,correctDropZones:e._correctDropZones,graphic:e._graphic,onItemDragMove:this.props.onItemDragMove,onItemDragEnd:this.props.onItemDragEnd})))),this.props.shouldDisplayDropZonePointers?c.createElement(u,{className:"ev-drop-zone-pointer-icon",icon:"arrow-down"}):null))}});e.exports=g},19240:(e,t,o)=>{const{registerComponent:r}=o(60633),n=o(16008),s=o(17633),{itemDroppedIntoZone:i,itemDroppedOutOfZone:a,itemSelected:p}=o(52445);r("dragAndDrop",{component:n,actions:{itemDroppedIntoZone:i,itemDroppedOutOfZone:a,itemSelected:p},reducer:s,trackingMap:o(10806)})},17633:(e,t,o)=>{const r=o(55807),n=o(69238),s=o(64925),i=o(19193),a=o(66259),p=o(52501),{SETUP_COMPONENT:c,SETUP_ANSWER_STATE:d,RESET_QUESTION:_,SUBMIT_QUESTION:l,SHOW_CORRECT_ANSWER:m,HIDE_CORRECT_ANSWER:h}=o(59345),{DRAG_AND_DROP_ITEM_DROPPED_INTO_ZONE:u,DRAG_AND_DROP_ITEM_DROPPED_OUT_OF_ZONE:D,DRAG_AND_DROP_ITEM_SELECTED:g}=o(52445);function I(e){const t=r(e._items,(e=>({...e,_currentDropZone:void 0,_showMarking:!1,_isInCorrectDropZone:!1,_isDisabled:!1})));return{...e,_items:t,_dropZones:Z(e._dropZones,t),_canSubmit:b(e,t)}}function b(e,t){return!(!e._canSubmitAtAnyTime||e._canAutoSubmit)||n(t,(e=>!!e._currentDropZone)).length===t.length}function Z(e,t){return r(e,(e=>({...e,_droppedItems:n(t,{_currentDropZone:e._id})})))}function f(e){return{...e,_selectedAnswerState:"_correctAnswer",_dropZones:Z(e._dropZones,e._correctAnswer)}}e.exports=function(e,t){switch(t.type){case c:return function(e){if(e._isComplete)e._isComplete&&!e._hasUserAnswered&&e._isCorrect&&(e=f(e));else{let t=r(e._items,(t=>{const o=n(t._correctDropZones,(t=>s(e._dropZones,{_id:t})));return{...t,_correctDropZones:o}})),o=e._dropZones;e._randomizeItems&&(t=i(t)),e._randomizeDropZones&&(o=i(o)),e=I(e={...e,_items:t,_dropZones:o,_canSubmit:b(e,t),_canAutoSubmit:!0===e._canAutoSubmit&&!0!==e._canSubmitAtAnyTime})}return e._dropZones=Z(e._dropZones,e._items),e._selectedItemId=void 0,e}(e);case d:return function(e){return e._correctAnswer=r(e._items,(e=>{const t={};return e._correctDropZones&&e._correctDropZones.length?(t._currentDropZone=e._correctDropZones.at(0),t._isInCorrectDropZone=!0,t._showMarking=!0):e._currentDropZone&&(t._currentDropZone=void 0,t._showMarking=!1),{...e,...t}})),e._incorrectAnswer=r(e._items,(e=>({...e,_isInCorrectDropZone:!1,_showMarking:!0,_isDisabled:!0}))),e}(e);case g:return{...e,_selectedItemId:t.payload.itemId};case u:return function(e,t){const{itemId:o,zoneId:r}=t.payload,n=a(e._items,(e=>e._id===o));if(-1===n)return e;const s={...e._items[n],_currentDropZone:r},i=[...e._items.slice(0,n),s,...e._items.slice(n+1)];return{...e,_items:i,_dropZones:Z(e._dropZones,i),_canSubmit:b(e,i),_selectedItemId:void 0}}(e,t);case D:return function(e,t){const{itemId:o}=t.payload,r=a(e._items,{_id:o}),n=e._items[r];if(!n._currentDropZone)return e;const s=[...e._items.slice(0,r),{...n,_currentDropZone:void 0},...e._items.slice(r+1)];return{...e,_items:s,_dropZones:Z(e._dropZones,s),_canSubmit:b(e,s),_selectedItemId:void 0}}(e,t);case l:return function(e){if(!e._canSubmit)return e;let t=0,o=0,n=!1;const s=r(e._items,(e=>{let r=!1;return e._correctDropZones&&e._correctDropZones.length?(o++,r=p(e._correctDropZones,e._currentDropZone),r&&t++):e._currentDropZone&&(n=!0),{...e,_isInCorrectDropZone:r,_showMarking:!0,_isDisabled:!0}})),i=t===o&&!n,a=!i&&t>0;return{...e,_items:s,_isCorrect:i,_isPartlyCorrect:a,_hasUserAnswered:!0,_dropZones:Z(e._dropZones,s),_selectedItemId:void 0}}(e);case _:return I(e);case m:return f(e);case h:return function(e){return{...e,_selectedAnswerState:"_items",_dropZones:Z(e._dropZones,e._items)}}(e);default:return e}}},10806:e=>{e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_currentDropZone:{fieldKey:"_currentDropZone",type:"String",shouldRestore:!0},_isInCorrectDropZone:{fieldKey:"_isInCorrectDropZone",type:"Boolean",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0}}},98062:(e,t,o)=>{const{store:r}=o(60633),n=o(26614);function s(e,t,o){const s=e._feedback[o],i=n(s);return t&&!i?r.getState().course._globals._feedbackText[o]:i?s:null}function i(e,t){const o=e._feedbackNavigation;if(o&&o[t]&&o[t]._isEnabled&&o[t]._linkType)return{_link:o[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?r.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:s(e,t,"_correctGraphic"),feedbackNavigation:i(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,o=t._shouldUseGlobalPartlyCorrectFeedback,n=r.getState().course._globals._feedbackText;return 0===e._attemptsLeft?{feedbackMessage:(o?n.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:s(e,o,"_partlyCorrectFinalGraphic"),feedbackNavigation:i(e,"_partlyCorrect")}:{feedbackMessage:(o?n.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:s(e,o,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:i(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,o=t._shouldUseGlobalIncorrectFeedback,n=r.getState().course._globals._feedbackText;return 0===e._attemptsLeft||!t.notFinal&&!o||!n.incorrectNotFinalFeedback&&o?{feedbackMessage:(o?n.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:s(e,o,"_incorrectFinalGraphic"),feedbackNavigation:i(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}:{feedbackMessage:(o?n.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:s(e,o,"_incorrectNotFinalGraphic"),feedbackNavigation:i(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},20687:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:o,isPageReady:r}=e;return!0===r&&!0===o._isReady&&!0!==o[t]}},37238:(e,t,o)=>{const r=o(90005);e.exports=e=>r(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},52875:e=>{e.exports=function(e,t,o,r,n){r&&r.props&&r.props.component?(t.top&&(r.isInviewTop=!0),t.bottom&&(r.isInviewBottom=!0),r.isInviewTop&&r.isInviewBottom&&n&&n(r.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);