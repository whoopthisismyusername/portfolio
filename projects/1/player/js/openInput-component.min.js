"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8830],{63484:(e,s)=>{s.SAVE_USER_ANSWER="openInput/SAVE_USER_ANSWER",s.saveUserAnswer=e=>({type:s.SAVE_USER_ANSWER,payload:e})},95657:(e,s,t)=>{const o=t(98779),n=t(30644),r=t(52898),{func:a,object:i}=t(23615),p=t(27378),l=t(90005),{Component:c}=t(30189),d=t(79325),h=t(5523),u=t(7726),m=t(20687),A=t(52875),_=t(37238),v=r({displayName:"OpenInput",propTypes:{component:i.isRequired,setComponentAsReady:a.isRequired,setComponentAsViewed:a.isRequired,setComponentAsComplete:a.isRequired,showFeedback:a.isRequired,saveUserAnswer:a.isRequired,setAriaLive:a.isRequired,styles:i},getInitialState(){return{_userAnswer:this.props.component._userAnswer||"",showMessageModal:!1,modalMessage:null}},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps({component:e}){n(e._userAnswer)||e._userAnswer===this.state._userAnswer||this.setState({_userAnswer:e._userAnswer})},saveUserAnswer(e){this.props.saveUserAnswer({componentId:this.props.component._id,userAnswer:e}),this.showSavedModal(),e&&o(this.showFeedback,200)},clearUserAnswer(){this.props.saveUserAnswer({componentId:this.props.component._id,userAnswer:""}),this.showClearedModal()},showFeedback(){const{component:e}=this.props;if(!e._canShowFeedback)return;const s={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};this.props.showFeedback(s)},showSavedModal(){this.props.component._saveSuccessMessage&&(this.setState({showMessageModal:!0,modalMessage:this.props.component._saveSuccessMessage}),o((()=>this.setState({showMessageModal:!1})),1e3))},showClearedModal(){const{component:e}=this.props;(e._clearSuccessMessage||e._saveSuccessMessage)&&(this.setState({showMessageModal:!0,modalMessage:e._clearSuccessMessage||e._saveSuccessMessage}),o((()=>this.setState({showMessageModal:!1})),1e3))},onTextAreaChange(e){this.setState({_userAnswer:e})},onSaveClicked(){this.saveUserAnswer(this.state._userAnswer),this.props.setAriaLive({message:this.props.component.savedAriaLiveMessage,isAssertive:!1}),this.props.setComponentAsComplete(this.props.component._id,{_isSubmitted:!0})},onClearClicked(){this.clearUserAnswer(),this.props.setAriaLive({message:this.props.component.clearedAriaLiveMessage,isAssertive:!1})},onVisibilityChange(...e){A(...e,this,this.props.setComponentAsViewed)},getIsSaveDisabled(){const{component:e}=this.props,{_userAnswer:s}=this.state;return""===s&&!e._userAnswer||s===e._userAnswer},renderButtons(){const{_isActionButtonOnRight:e}=u(this.props);return p.createElement("div",{className:l("ev-buttons",{"ev-switch-buttons":e})},p.createElement(d,{className:"ev-button-save",text:this.props.component._saveButton,isDisabled:this.getIsSaveDisabled(),onClick:this.onSaveClicked}),this.props.component._clearButton.length?p.createElement(d,{className:"ev-button-clear",text:this.props.component._clearButton,isDisabled:""===this.state._userAnswer,onClick:this.onClearClicked}):null)},render(){const{props:e}=this,s=e.component._hasMinimumHeight?e.component._minimumHeight:300;return p.createElement(c,{component:e.component,styles:e.styles,isVisibilitySensorActive:m(e),onVisibilityChange:this.onVisibilityChange},p.createElement("div",null,p.createElement("div",{className:_(e.component)},p.createElement(h,{ariaLabel:e.component.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:e.component.placeholder,minHeight:s}),p.createElement("div",{className:l("ev-openInput-message-modal",{"ev-is-visible":this.state.showMessageModal})},this.state.modalMessage)),this.renderButtons()))}});e.exports=v},8372:(e,s,t)=>{const o=t(84900);e.exports=(e,s)=>({articleStyle:o(e,s,"article")._classes})},96222:(e,s,t)=>{const{registerComponent:o}=t(60633),n=t(95657),r=t(5134),{saveUserAnswer:a}=t(63484);o("openInput",{component:n,actions:{saveUserAnswer:a},reducer:r,mapStateToProps:t(8372),trackingMap:t(92444)})},5134:(e,s,t)=>{const o=t(51371),{SAVE_USER_ANSWER:n}=t(63484);e.exports=(e,{type:s,payload:t})=>s===n?{...e,_userAnswer:t.userAnswer,_isCorrect:!0,_isSubmitted:!0,_correctAt:o()}:e},92444:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0}}},5523:(e,s,t)=>{const o=t(52898),n=t(23615),r=t(27378),a=t(90005),i=o({displayName:"TextArea",propTypes:{id:n.string,value:n.string.isRequired,label:n.string,onChange:n.func.isRequired,onFocus:n.func,onBlur:n.func,className:n.string,placeholder:n.string,minHeight:n.number,ariaLabel:n.string,isDisabled:n.bool,shouldFocus:n.bool},getDefaultProps:()=>({value:""}),componentDidUpdate(e){const{shouldFocus:s}=this.props;s&&!e.shouldFocus&&this._textArea.focus()},renderTextArea(){const{props:e}=this;return r.createElement("textarea",{id:e.id,ref:e=>this._textArea=e,"aria-label":e.ariaLabel,value:e.value,onChange:s=>e.onChange(s.target.value),onFocus:e.onFocus,onBlur:e.onBlur,placeholder:e.placeholder,className:a("ev-text-area",e.className),style:{minHeight:e.minHeight},disabled:e.isDisabled})},render(){const{props:e}=this;return e.label?r.createElement(r.Fragment,null,r.createElement("label",{className:"ev-label",htmlFor:e.id,dangerouslySetInnerHTML:{__html:e.label},style:{pointerEvents:e.isDisabled?"none":"all"}}),this.renderTextArea()):this.renderTextArea()}});e.exports=i},20687:e=>{e.exports=(e,s="_hasBeenViewed")=>{const{component:t,isPageReady:o}=e;return!0===o&&!0===t._isReady&&!0!==t[s]}},37238:(e,s,t)=>{const o=t(90005);e.exports=e=>o(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},52875:e=>{e.exports=function(e,s,t,o,n){o&&o.props&&o.props.component?(s.top&&(o.isInviewTop=!0),s.bottom&&(o.isInviewBottom=!0),o.isInviewTop&&o.isInviewBottom&&n&&n(o.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);