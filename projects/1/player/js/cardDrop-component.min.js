"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8343],{14004:(e,t)=>{t.CARD_DROP_ON_DROP="CARD_DROP_ON_DROP",t.CARD_DROP_ON_DROP_REJECT="CARD_DROP_ON_DROP_REJECT",t.CARD_DROP_ON_DROP_POST_REJECT="CARD_DROP_ON_DROP_POST_REJECT",t.CARD_DROP_ON_NEXT_CARD="CARD_DROP_ON_NEXT_CARD",t.onCardDrop=e=>({type:t.CARD_DROP_ON_DROP,payload:e}),t.onCardDropReject=e=>({type:t.CARD_DROP_ON_DROP_REJECT,payload:e}),t.onCardDropPostReject=e=>({type:t.CARD_DROP_ON_DROP_POST_REJECT,payload:e}),t.onNextCard=e=>({type:t.CARD_DROP_ON_NEXT_CARD,payload:e})},27513:(e,t,o)=>{const{registerComponent:r}=o(60633),i=o(5825),n=o(76641),{onCardDrop:s,onCardDropReject:c,onCardDropPostReject:d,onNextCard:a}=o(14004);r("cardDrop",{component:i,actions:{onCardDrop:s,onCardDropReject:c,onCardDropPostReject:d,onNextCard:a},reducer:n,trackingMap:o(14292)})},5825:(e,t,o)=>{const r=o(98779),i=o(69238),n=o(64925),s=o(55807),c=o(52898),{bool:d,func:a,object:p,string:_}=o(23615),l=o(27378),{Component:u}=o(30189),m=o(37238),h=o(98062),C=o(20687),R=o(52875),b=o(42230),D=o(64714),g=o(17852),f=c({displayName:"CardDrop",propTypes:{component:p.isRequired,styles:p,screenSize:_.isRequired,submitQuestion:a.isRequired,actionButtonClicked:a.isRequired,setComponentAsReady:a.isRequired,setComponentAsViewed:a.isRequired,showFeedback:a.isRequired,shouldHideMarking:d,onCardDrop:a.isRequired,onCardDropReject:a.isRequired,onCardDropPostReject:a.isRequired,onNextCard:a.isRequired},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback()},UNSAFE_componentWillReceiveProps(e){!this.props.component._canSubmit&&e.component._canSubmit&&this.props.submitQuestion(this.props.component._id)},getActionButtonEnabled(){const{_isSubmitted:e,_isCorrect:t,_attemptsLeft:o}=this.props.component;return e&&!t&&o>0},showFeedback(){const e=h(this.props.component);this.props.showFeedback(e)},onVisibilityChange(...e){R(...e,this,this.props.setComponentAsViewed)},onDrop(e){const{onCardDrop:t,onNextCard:o,component:i}=this.props,n=i._id;t({componentId:n,zoneId:e}),r((()=>o({componentId:n})),1e3)},onDropReject(e){const{onCardDropReject:t,onCardDropPostReject:o,component:i}=this.props,n=i._id;t({componentId:n,zoneId:e}),r((()=>o({componentId:n})),1e3)},renderCardDropItems(e){const{_id:t,_items:o,_currentItemId:r}=this.props.component;if(!r)return;let n=i(o,{_isComplete:!1,_isRejected:!1});return n=n.slice(0,5),s(n,((i,n)=>l.createElement(b,{key:i._id,id:i._id,componentId:t,isCurrentItem:r===i._id,index:n,zIndex:o.length-n,text:i.text,width:e.width,height:e.height,canFocus:i._canFocus})))},renderDropZones(e){const{_items:t,_currentItemId:o}=this.props.component,r=n(t,{_id:o});if(!r)return;const{_id:i,_dropZones:c,_shouldZonesRejectIncorrect:d,_useComponentDropZones:a,_isComplete:p,rejectedCardAriaLabel:_}=this.props.component,u=a?c:r._dropZones;return s(u,(t=>l.createElement(D,{key:`${o}-${t._id}-${r._isComplete}`,id:t._id,componentId:i,isComponentComplete:p,text:t.text,ariaLabel:t.ariaLabel,rejectedCardAriaLabel:_,isComplete:r._isComplete,isRejected:r._isRejected,isCorrectZone:a?r._correctDropZoneIds.includes(t._id):t.isCorrectZone,rejectIncorrect:d,hasDroppedItem:r._droppedZoneId===t._id||r._isRejected&&r._droppedZoneId===t._id,currentItemText:r.text,width:e.width,height:e.height,onDrop:this.onDrop,onDropReject:this.onDropReject})))},renderIndicator(){const{component:e,shouldHideMarking:t}=this.props;if(e._isComplete&&!t)return l.createElement(g,{items:e._items,indicatorLabelText:e.indicatorLabelText,shouldHideScore:e._shouldHideScore})},render(){const{props:e}=this,t=e.component._cardSizes[e.screenSize],o=`${t.width}px`,r=`${t.height}px`;return l.createElement(u,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,shouldHideActionButton:e.component._attempts<=1,onActionButtonClicked:e.actionButtonClicked,isVisibilitySensorActive:C(e),onVisibilityChange:this.onVisibilityChange,onFeedbackButtonClicked:this.showFeedback,getActionButtonState:()=>"reset",getActionButtonEnabled:this.getActionButtonEnabled},l.createElement("div",{className:m(e.component)},l.createElement("div",{className:"ev-card-drop-items",style:{width:o,height:r}},this.renderCardDropItems(t)),l.createElement("div",{className:"ev-card-drop-zones"},this.renderDropZones(t)),this.renderIndicator()))}});e.exports=f},17852:(e,t,o)=>{const r=o(69238),i=o(55807),{array:n,bool:s,string:c}=o(23615),d=o(27378),a=o(90219),p=e=>d.createElement("div",{className:"ev-card-drop-indicator"},d.createElement("div",{className:"ev-card-drop-indicator-items"},i(e.items,(e=>d.createElement("div",{key:e._id,className:"ev-card-drop-indicator-item"},d.createElement(a,{isCorrect:e._isCorrect,ariaLabel:e.text}))))),e.shouldHideScore?null:d.createElement("div",{className:"ev-label ev-card-drop-indicator-label"},(()=>{const t=r(e.items,{_isCorrect:!0});return`${e.indicatorLabelText} ${t.length}/${e.items.length}`})()));p.propTypes={items:n.isRequired,indicatorLabelText:c,shouldHideScore:s},p.defaultProps={indicatorLabelText:"",shouldHideScore:!1},e.exports=p},42230:(e,t,o)=>{const r=o(52898),{bool:i,number:n,string:s}=o(23615),c=o(27378),d=o(31542),a=o(46451),p=o(90005),_=o(40155),l=o(50998),u=r({displayName:"CardDropItem",propTypes:{id:s.isRequired,componentId:s.isRequired,text:s,isCurrentItem:i.isRequired,zIndex:n.isRequired,index:n.isRequired,width:n.isRequired,height:n.isRequired,canFocus:i.isRequired},getDefaultProps:()=>({width:300,height:150,canFocus:!1}),getInitialState:()=>({_isDragging:!1,_x:0,_y:0}),componentDidMount(){const{isCurrentItem:e,canFocus:t}=this.props;this._isMounted=!0,this._interact=a(d.findDOMNode(this)).draggable({onmove:this.onDragMove,onend:this.onDragEnd,enabled:e,autoScroll:!0,modifiers:[a.modifiers.restrict({restriction:".ev-cardDrop-widget"})]}),t&&this._button.focus({preventScroll:!0})},componentWillUnmount(){this._isMounted=!1,this._interact.unset()},componentDidUpdate({isCurrentItem:e,canFocus:t}){const{isCurrentItem:o,canFocus:r}=this.props;o&&!e&&(this._interact=this._interact.draggable(!0)),r&&!t&&this._button.focus({preventScroll:!0})},onDragMove(e){this.setState({_x:this.state._x+e.dx,_y:this.state._y+e.dy,_isDragging:!0})},onDragEnd(){this._isMounted&&this.setState({_isDragging:!1,_x:0,_y:0})},getStyle(){const{width:e,height:t,zIndex:o,index:r}=this.props,{_x:i,_y:n}=this.state;return{left:`${i}px`,top:`${n}px`,transform:`translateY(${r*(window.innerWidth<520?1:2)}%)`,position:"absolute",width:`${e}px`,height:`${t}px`,zIndex:o}},render(){const{text:e,isCurrentItem:t,id:o,componentId:r}=this.props,{_isDragging:i}=this.state;return c.createElement("button",{id:o,ref:e=>this._button=e,className:p("ev-card-drop-item ev-focusable",`ev-card-drop-item-${r}`,{"ev-is-current-item":t,"ev-is-dragging":i,"ev-is-disabled":!t}),style:this.getStyle(),tabIndex:t?0:-1},c.createElement(l,{tag:"span",innerTag:"span",body:e}),c.createElement(_,{className:"ev-card-drop-item-drag-icon",icon:"move"}))}});e.exports=u},64714:(e,t,o)=>{const r=o(52898),{bool:i,func:n,number:s,string:c}=o(23615),d=o(27378),a=o(31542),p=o(46451),_=o(90005),{isEnterKey:l}=o(13914),u=o(50998),m=o(58975),h=r({displayName:"CardDropZone",propTypes:{id:c.isRequired,componentId:c.isRequired,isComponentComplete:i.isRequired,text:c,ariaLabel:c,rejectedCardAriaLabel:c,onDrop:n.isRequired,onDropReject:n.isRequired,currentItemText:c,isComplete:i.isRequired,isRejected:i.isRequired,isCorrectZone:i.isRequired,rejectIncorrect:i.isRequired,width:s.isRequired,height:s.isRequired,hasDroppedItem:i.isRequired},getDefaultProps:()=>({isComponentComplete:!1,isComplete:!1,isRejected:!1,isCorrectZone:!1,rejectIncorrect:!1,width:300,height:150,hasDroppedItem:!1}),getInitialState:()=>({_isFocused:!1,_isDragOver:!1}),componentDidMount(){p(a.findDOMNode(this)).dropzone({accept:`.ev-card-drop-item-${this.props.componentId}`,ondrop:this.onDrop,ondragenter:this.onDragEnter,ondragleave:this.onDragLeave,overlap:.5})},componentWillUnmount(){p(a.findDOMNode(this)).unset()},onDrop(){const{id:e,onDrop:t,onDropReject:o,isCorrectZone:r,rejectIncorrect:i}=this.props;if(i&&!r)return o(e),this.onDragLeave();t(e)},onDragEnter(){this.setState({_isDragOver:!0})},onDragLeave(){this.setState({_isDragOver:!1})},onFocus(){this.setState({_isFocused:!0})},onBlur(){this.setState({_isFocused:!1})},onKeyDown(e){const{_isFocused:t}=this.state,{id:o,onDrop:r,onDropReject:i,isComplete:n,isCorrectZone:s,rejectIncorrect:c}=this.props;if(l(e))return c&&!s?i(o):void(t&&!n&&r(o))},onClick(){const{id:e,onDrop:t,onDropReject:o,isComplete:r,isCorrectZone:i,rejectIncorrect:n}=this.props;if(n&&!i)return o(e);r||t(e)},renderCardItem(){const{currentItemText:e,isComplete:t,isRejected:o,hasDroppedItem:r,width:i,height:n,rejectedCardAriaLabel:s,isComponentComplete:c}=this.props;if(!c&&(t||o)&&r)return d.createElement(m,{text:e,width:i,height:n,isRejected:o,rejectedCardAriaLabel:s})},render(){const{text:e,ariaLabel:t,width:o,height:r,isComplete:i,isRejected:n}=this.props,{_isDragOver:s}=this.state;return d.createElement("div",{className:_("ev-card-drop-zone",{"ev-is-drag-over":s,"ev-is-disabled":i,"ev-is-rejected":n}),tabIndex:i?null:0,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onClick:this.onClick,"aria-label":t,style:{width:`${o}px`,height:`${r}px`}},d.createElement(u,{tag:"span",innerTag:"span",body:e}),this.renderCardItem())}});e.exports=h},58975:(e,t,o)=>{const r=o(52898),{bool:i,number:n,string:s}=o(23615),c=o(27378),d=o(90005),a=o(50998),p=r({displayName:"CardDropZoneItem",propTypes:{text:s,rejectedCardAriaLabel:s,width:n.isRequired,height:n.isRequired,isRejected:i.isRequired},componentDidMount(){const{isRejected:e}=this.props;e&&this._button.focus({preventScroll:!0})},render(){const{text:e,rejectedCardAriaLabel:t,width:o,height:r,isRejected:i}=this.props;return c.createElement("button",{ref:e=>this._button=e,className:d("ev-card-drop-item ev-card-drop-drop-zone-item ev-is-disabled ev-focusable",{"ev-is-rejected":i}),style:{width:`${o}px`,height:`${r}px`},tabIndex:"-1","aria-label":i?t:null,"aria-hidden":!i},c.createElement(a,{tag:"span",innerTag:"span",body:e}))}});e.exports=p},76641:(e,t,o)=>{const r=o(69238),i=o(64925),n=o(55807),s=o(19193),{SETUP_COMPONENT:c,RESET_QUESTION:d,SUBMIT_QUESTION:a}=o(59345),{CARD_DROP_ON_DROP:p,CARD_DROP_ON_DROP_REJECT:_,CARD_DROP_ON_DROP_POST_REJECT:l,CARD_DROP_ON_NEXT_CARD:u}=o(14004);function m(e,t=!1){let o={};if(!e._isComplete){let r=n(e._items,(o=>({...o,_isComplete:!1,_isRejected:!1,_isCorrect:!1,_canFocus:!1,_dropZones:e._randomizeDropZones&&!t?s(o._dropZones):o._dropZones})));e._randomizeItems&&!t&&(r=s(r)),o={_canSubmit:!1,_items:r,_currentItemId:r.length?r[0]._id:null,_dropZones:e._randomizeDropZones&&!t?s(e._dropZones):e._dropZones}}return{...e,...o,_shouldDisableShowAnswer:!0}}function h(e,t,o){return o?e._correctDropZoneIds.includes(t):i(e._dropZones,{_id:t}).isCorrectZone}e.exports=function(e,t){switch(t.type){case c:return m(e);case a:return function(e){const{_items:t,_canSubmit:o}=e;if(!o)return e;const i=r(t,{_isCorrect:!0}).length,n=i===t.length,s=!n&&i>0;return{...e,_isCorrect:n,_isPartlyCorrect:s,_hasUserAnswered:!0}}(e);case d:return function(e){const t=m(e,!0);return{...e,...t,_items:n(t._items,(e=>t._currentItemId===e._id?{...e,_canFocus:!0}:e))}}(e);case p:return function(e,t){const{_items:o,_currentItemId:r,_useComponentDropZones:s}=e,c=n(o,(e=>r===e._id?{...e,_isComplete:!0,_isCorrect:h(e,t,s),_droppedZoneId:t}:e)),d=i(c,{_isComplete:!1});return d&&(d._canFocus=!0),{...e,_items:c}}(e,t.payload.zoneId);case _:return function(e,t){const{_items:o,_currentItemId:r}=e;return{...e,_items:n(o,(e=>r===e._id?{...e,_isRejected:!0,_droppedZoneId:t}:e))}}(e,t.payload.zoneId);case l:return function(e){const{_items:t,_currentItemId:o}=e;return{...e,_items:n(t,(e=>o===e._id?{...e,_canFocus:!0,_isRejected:!1}:e))}}(e,t.payload.zoneId);case u:return function(e){const{_items:t,_currentItemId:o}=e,n=i(t,{_isComplete:!1}),s=n?n._id:o;return{...e,_currentItemId:s,_canSubmit:r(t,{_isComplete:!0}).length===t.length}}(e);default:return e}}},14292:e=>{e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"String",shouldRestore:!0},_droppedZoneId:{fieldKey:"_droppedZoneId",type:"String",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0}}},98062:(e,t,o)=>{const{store:r}=o(60633),i=o(26614);function n(e,t,o){const n=e._feedback[o],s=i(n);return t&&!s?r.getState().course._globals._feedbackText[o]:s?n:null}function s(e,t){const o=e._feedbackNavigation;if(o&&o[t]&&o[t]._isEnabled&&o[t]._linkType)return{_link:o[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?r.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:n(e,t,"_correctGraphic"),feedbackNavigation:s(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,o=t._shouldUseGlobalPartlyCorrectFeedback,i=r.getState().course._globals._feedbackText;return 0===e._attemptsLeft?{feedbackMessage:(o?i.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:n(e,o,"_partlyCorrectFinalGraphic"),feedbackNavigation:s(e,"_partlyCorrect")}:{feedbackMessage:(o?i.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:n(e,o,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:s(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,o=t._shouldUseGlobalIncorrectFeedback,i=r.getState().course._globals._feedbackText;return 0===e._attemptsLeft||!t.notFinal&&!o||!i.incorrectNotFinalFeedback&&o?{feedbackMessage:(o?i.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:n(e,o,"_incorrectFinalGraphic"),feedbackNavigation:s(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}:{feedbackMessage:(o?i.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:n(e,o,"_incorrectNotFinalGraphic"),feedbackNavigation:s(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},20687:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:o,isPageReady:r}=e;return!0===r&&!0===o._isReady&&!0!==o[t]}},37238:(e,t,o)=>{const r=o(90005);e.exports=e=>r(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},52875:e=>{e.exports=function(e,t,o,r,i){r&&r.props&&r.props.component?(t.top&&(r.isInviewTop=!0),t.bottom&&(r.isInviewBottom=!0),r.isInviewTop&&r.isInviewBottom&&i&&i(r.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);