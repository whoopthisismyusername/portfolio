"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7130],{17775:(e,s)=>{s.COMPONENT_ASSESSMENT_COMPLETED="COMPONENT_ASSESSMENT_COMPLETED",s.COMPONENT_ASSESSMENT_SCORM_RESTORE="COMPONENT_ASSESSMENT_SCORM_RESTORE",s.COMPONENT_ASSESSMENT_RESET="COMPONENT_ASSESSMENT_RESET",s.componentAssessmentCompleted=e=>({type:s.COMPONENT_ASSESSMENT_COMPLETED,payload:e}),s.componentAssessmentScormRestore=e=>({type:s.COMPONENT_ASSESSMENT_SCORM_RESTORE,payload:e}),s.componentAssessmentReset=e=>({type:s.COMPONENT_ASSESSMENT_RESET,payload:e})},40216:(e,s,t)=>{const{registerEpics:n,registerReducer:o}=t(60633),m=t(79279),{componentAssessmentComponentCompleteEpic:p,componentAssessmentCompletedEpic:a,componentAssessmentResetQuestionEpic:E,registerTrackingMapEpic:_,scormRestoreEpic:S}=t(49016);n(p,a,E,_,S),o("componentAssessment",m)},49016:(e,s,t)=>{const n=t(99729),o=t(14831),{Observable:m}=t(49923),{SETUP_APP:p,APP_READY:a}=t(36329),{COMPONENT_COMPLETED:E,RESET_QUESTION:_,updateComponents:S}=t(59345),{trackableChange:r}=t(18403),{registerTrackingMap:c}=t(60633),{COMPONENT_ASSESSMENT_COMPLETED:l,componentAssessmentCompleted:i,componentAssessmentReset:d,componentAssessmentScormRestore:T}=t(17775),A=t(17578);s.componentAssessmentComponentCompleteEpic=(e,s)=>e.filter((e=>{const{componentAssessment:t}=s.getState();return t._isEnabled&&e.type===E&&e.payload.componentId===t._assessmentComponentId})).map((e=>{const{components:t,componentAssessment:o}=s.getState(),m=t[e.payload.componentId];let p=m._isPassed;if(!m._isPassed)if(m._allowAssessmentRetake){const e=n(m,"_assessmentRetakeAttempts",1);p=!n(m,"_allowUnlimitedRetakeAttempts",!1)&&o._assessmentAttemptsTaken===e}else p=!0;const a={_isComplete:p,_isPassed:m._isPassed,_assessmentScore:m._assessmentScore};return i(a)})),s.componentAssessmentCompletedEpic=e=>e.ofType(l).mapTo(r()),s.componentAssessmentResetQuestionEpic=(e,s)=>e.filter((e=>{const{componentAssessment:t}=s.getState();return t._isEnabled&&e.type===_&&e.payload.componentId===t._assessmentComponentId})).map((()=>d())),s.registerTrackingMapEpic=(e,s)=>e.filter((e=>{const{componentAssessment:t}=s.getState();return t._isEnabled&&e.type===p})).do((()=>{c("componentAssessment",A,"extensions")})).ignoreElements(),s.scormRestoreEpic=(e,s)=>e.filter((e=>{const{componentAssessment:t,scorm:n}=s.getState();return!!(n&&n._isEnabled&&t._isEnabled&&e.type===a)})).mergeMap((()=>{const{scorm:e,components:t}=s.getState(),n=[];if(e&&e.suspendData){const{_isAssessmentComplete:s,_isPassed:m,_score:p,_assessmentComponentId:a,_assessmentAttemptsTaken:E}=e.suspendData;if(s){n.push(T({_isComplete:s,_isPassed:m,_assessmentScore:p,_assessmentComponentId:a,_assessmentAttemptsTaken:E}));const e=t[a];if(e){const s=o({},e,{_isPassed:m,_assessmentScore:p});n.push(S({[a]:s}))}}}return n.length?m.of(...n):m.empty()}))},79279:(e,s,t)=>{const n=t(14831),o=t(29115),m=t(99729),p=t(64925),{SETUP_APP:a}=t(36329),{RESTORE_EXTENSION:E}=t(18403),{COMPONENT_ASSESSMENT_COMPLETED:_,COMPONENT_ASSESSMENT_RESET:S,COMPONENT_ASSESSMENT_SCORM_RESTORE:r}=t(17775),c={_isEnabled:!1,_isComplete:!1,_isPassed:!1,_assessmentScore:0,_assessmentComponentId:null,_assessmentAttemptsTaken:0};e.exports=(e=c,s)=>{switch(s.type){case a:return function(e,s){const{course:t,components:o}=s.payload;if(m(t,"_courseAssessment._isEnabled",!1))return e;const a=p(o,{_isAssessmentEnabled:!0});return a?n({},e,{_isEnabled:!0,_assessmentComponentId:a._id}):e}(e,s);case _:return n({},e,s.payload);case S:return n({},e,{_assessmentAttemptsTaken:e._assessmentAttemptsTaken+1});case r:return n({},e,s.payload);case E:if("componentAssessment"===s.payload.extensionName)return o({},e,s.payload.extensionData);default:return e}}},17578:e=>{e.exports={_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0},_isPassed:{fieldKey:"_isPassed",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_score:{fieldKey:"_assessmentScore",type:"Number",shouldRestore:!0},_isAssessmentComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentComponentId:{fieldKey:"_assessmentComponentId",type:"String",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentAttemptsTaken:{fieldKey:"_assessmentAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0}}}}]);