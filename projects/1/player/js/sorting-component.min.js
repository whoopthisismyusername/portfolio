"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7449],{23622:(e,t)=>{t.SORTING_ITEM_MOVED="SORTING_ITEM_MOVED",t.SORTING_ITEM_SELECTED="SORTING_ITEM_SELECTED",t.SORTING_ITEM_DESELECTED="SORTING_ITEM_DESELECTED",t.sortingItemMoved=(e,i,s,r)=>({type:t.SORTING_ITEM_MOVED,payload:{componentId:e,oldIndex:i,newIndex:s,itemId:r}}),t.sortingItemSelected=(e,i)=>({type:t.SORTING_ITEM_SELECTED,payload:{componentId:e,itemId:i}}),t.sortingItemDeselected=e=>({type:t.SORTING_ITEM_DESELECTED,payload:{componentId:e}})},23224:(e,t,i)=>{var s=i(7914)(i(2398));const r=i(66259),o=i(47479),n=i(52898),{bool:a,func:l,object:d,string:c}=i(23615),m=i(27378),p=i(54794),h=i(98062),u=i(37238),_=i(20687),g=i(52875),{Component:v}=i(30189),I=i(58228),b=i(65579),y=i(79110),S={vertical:"y",horizontal:"x"},E=n({displayName:"Sorting",propTypes:{component:d.isRequired,actionButtonClicked:l.isRequired,setComponentAsReady:l.isRequired,setComponentAsViewed:l.isRequired,setComponentAsStarted:l.isRequired,restoreFocus:l.isRequired,showFeedback:l.isRequired,showPrompt:l.isRequired,resetQuestion:l.isRequired,sortingItemMoved:l.isRequired,sortingItemSelected:l.isRequired,sortingItemDeselected:l.isRequired,articleStyle:c.isRequired,shouldHideMarking:a,isWindowsTouchScreen:a.isRequired,isTouch:a.isRequired,styles:d},getInitialState(){return{_sortingAxis:this.getSortingAxis(this.props)}},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback(!1)},UNSAFE_componentWillReceiveProps(e){this.setState({_sortingAxis:this.getSortingAxis(e)})},getSortingAxis(e){const{component:t,screenSize:i,isRTL:s}=e;return s||"large"!==i?S.vertical:S[t._sortinglayout]},onSortEnd(e){const{component:t,sortingItemMoved:i,setComponentAsStarted:s,restoreFocus:r}=this.props;t._hasStarted||s(t._id),i(t._id,e.oldIndex,e.newIndex),r(),document.getElementById("ev-root").classList.remove("ev-no-select")},showFeedback(e=!0){const{component:t}=this.props,i=h(t),s={};t._shouldAlwaysMarkAsCorrect&&(s._glyph=null),e&&this.props.component._isComplete&&(s.refocusSelector=".ev-buttons-feedback"),this.props.showFeedback(i,s)},onVisibilityChange(...e){g(...e,this,this.props.setComponentAsViewed)},onItemSelected(e){this.props.sortingItemSelected(this.props.component._id,e._id)},onItemDeselected(){this.props.sortingItemDeselected(this.props.component._id)},onDirectionKeyDown(e){const{props:t,state:i}=this,s=t.component._selectedItemId;if(!s)return;const o=t.component._items,n=r(o,(e=>e._id===s));let a,l=!1;"x"===i._sortingAxis&&("left"===e&&(l=!1),"right"===e&&(l=!0)),"y"===i._sortingAxis&&("up"===e&&(l=!1),"down"===e&&(l=!0)),a=l?o.length-1>n?n+1:n:0!==n?n-1:n,t.sortingItemMoved(t.component._id,n,a,s)},renderSortingTopLabel(){const{component:e}=this.props,{_sortingAxis:t}=this.state,i=e._sortingTopLabelText;if(!i||t===S.horizontal)return;const s=e._sortingVerticalLabelsAlignment;return m.createElement("div",{className:"ev-sorting-label-container",style:{textAlign:s}},m.createElement(p,{className:"ev-sorting-top-label ev-label",html:i}))},renderSortingBottomLabel(){const{component:e}=this.props,{_sortingAxis:t}=this.state,i=e._sortingBottomLabelText;if(!i||t===S.horizontal)return;const s=e._sortingVerticalLabelsAlignment;return m.createElement("div",{className:"ev-sorting-label-container",style:{textAlign:s}},m.createElement(p,{className:"ev-sorting-bottom-label ev-label",html:i}))},renderSortingLabelsHorizontal(){const{component:e}=this.props,{_sortingAxis:t}=this.state,i=e._sortingTopLabelText,s=e._sortingBottomLabelText;if(t!==S.vertical&&(i||s))return m.createElement(b,{leftLabelText:i,rightLabelText:s})},renderSortingPreview(){const{component:e}=this.props;if(!e._showVideoAudioSortPreview||0===e._items.length)return;const t=e._items[0]._mediaType;return"audio"!==t&&"video"!==t||o(e._items,{_mediaType:t})?m.createElement(y,{previewLabelText:e._videoAudioSortPreviewLabelText,previewHeight:e._videoAudioSortPreviewHeight,items:e._items,previewMode:t}):void 0},renderSortingItems(){const{component:e,isWindowsTouchScreen:t,articleStyle:i,showPrompt:r,shouldHideMarking:o,isTouch:n}=this.props,{_sortingAxis:a}=this.state,l={};n&&!t?l.pressDelay=200:t||(l.distance=5);const d=e[e._selectedAnswerState];return m.createElement(I,(0,s.default)({axis:a,layout:a,helperClass:`ev-sorting-item-helper ev-${i}`,selectedItemId:e._selectedItemId,items:d,onSortStart:()=>document.getElementById("ev-root").classList.add("ev-no-select"),onSortEnd:this.onSortEnd,onItemSelected:this.onItemSelected,onItemDeselected:this.onItemDeselected,isDisabled:!e._isEnabled,isComplete:e._isComplete,maxItemImageWidth:e._maxItemImageWidth,itemImageAlignment:e._itemImageAlignment,dialogCloseButtonText:e._sortingMediaDialogCloseButtonText,useWindowAsScrollContainer:!0,showPrompt:r,playItemVideoAriaLabel:e.playItemVideoAriaLabel,playItemAudioAriaLabel:e.playItemAudioAriaLabel,displayItemNumber:e._displayItemNumber,shouldHideMarking:o},l))},render(){const{props:e}=this;return m.createElement(v,{component:e.component,styles:e.styles,isVisibilitySensorActive:_(e),onVisibilityChange:this.onVisibilityChange,onDirectionKeyDown:this.onDirectionKeyDown,onActionButtonClicked:e.actionButtonClicked,onFeedbackButtonClicked:this.showFeedback,shouldHideMarking:e.shouldHideMarking||e.component._shouldAlwaysMarkAsCorrect},m.createElement("div",{className:u(e.component)},this.renderSortingLabelsHorizontal(),this.renderSortingTopLabel(),this.renderSortingItems(),this.renderSortingBottomLabel(),this.renderSortingPreview()))}});e.exports=E},983:(e,t,i)=>{const s=i(27378),{SortableHandle:r}=i(65307),o=i(40155);e.exports=r((({item:e,shouldHideMarking:t})=>s.createElement("div",{className:"ev-sorting-drag-handle"},s.createElement(o,{icon:!e._showMarking||t?"move":e._isCorrect?"check":"cross"}))))},66438:(e,t,i)=>{const s=i(52898),r=i(27378),{SortableElement:o}=i(65307),n=i(90005),a=i(26614),l=i(10625),d=i(55278),c=i(13914),m=i(79325),p=i(5859),h=i(54794),u=i(983),_=s({displayName:"SortingItem",getClassName(){const{props:e}=this,{item:t}=e;return n("ev-sorting-item",{"ev-is-disabled":e.isDisabled&&!(e.isComplete&&t._showMarking&&t._isCorrect),"ev-is-selected":!e.isDisabled&&e.isSelected,"ev-has-media":this.getHasMedia(),"ev-has-media-text":this.getHasMedia()&&t.text,"ev-has-item-number":e.displayItemNumber})},getHasMedia(){const{item:e}=this.props;switch(e._mediaType){case"image":return a(e._graphic);case"gif":return e._gif?.src;case"video":return e._video?.mp4;case"audio":return e._audio?.mp3;default:return!1}},getTextStyle(){const e={},{_textSettings:t}=this.props.item;return t?(t._fontSize&&(e.fontSize=`${t._fontSize}px`),t._textAlign&&(e.textAlign=t._textAlign),e):e},getMediaStyle(){const e={};return"y"===this.props.layout&&(e.maxWidth=this.props.maxItemImageWidth),"center"===this.props.itemImageAlignment?e.margin="auto":"right"===this.props.itemImageAlignment&&(e.marginLeft="auto"),e},onPlayItemAudio(){if(!this.props.item._audio?.mp3)return;const e=r.createElement(d,{src:this.props.item._audio.mp3,poster:this.props.item._audio.poster,shouldAutoPlay:!0});this.props.showPrompt({_component:e,_shouldNotShowInNavigation:!0,_hasPriority:!0,_dismiss:{text:this.props.dialogCloseButtonText}})},onPlayItemVideo(){if(!this.props.item._video?.mp4)return;const e=r.createElement(l,{src:this.props.item._video.mp4,poster:this.props.item._video.poster,subtitles:this.props.item._video._subtitles,shouldAutoPlay:!0});this.props.showPrompt({_component:e,_shouldNotShowInNavigation:!1,_hasPriority:!0,_shouldWaitForDisplay:!0,_dismiss:{text:this.props.dialogCloseButtonText}})},onKeyDown(e){const{props:t}=this;c.isEnterKey(e)&&(t.isSelected?this.props.onItemDeselected():this.props.onItemSelected(this.props.item)),c.isEscapeKey(e)&&t.isSelected&&this.props.onItemDeselected()},renderImage(){if(a(this.props.item._graphic))return r.createElement("div",{className:"ev-sorting-item-media",style:this.getMediaStyle()},r.createElement(p,{graphicSrc:this.props.item._graphic.src,graphicSrcAdvanced:this.props.item._graphic.srcAdvanced,altText:this.props.item._graphic.alt,autoSize:!0}),r.createElement("div",{className:"ev-sorting-item-media-image-blocker"}))},renderGif(){if(this.props.item._gif?.src)return r.createElement("div",{className:"ev-sorting-item-media",style:this.getMediaStyle()},r.createElement(p,{graphicSrc:this.props.item._gif.src,altText:this.props.item._gif.alt}),r.createElement("div",{className:"ev-sorting-item-media-image-blocker"}))},renderVideo(){const{item:e,playItemVideoAriaLabel:t}=this.props;if(e._video?.mp4)return r.createElement("div",{className:"ev-sorting-item-media",style:this.getMediaStyle()},e._video.poster&&r.createElement(p,{graphicSrc:e._video.poster}),r.createElement("div",{className:"ev-sorting-item-media-image-blocker"}),r.createElement(m,{icon:"play-circle",iconSize:32,"aria-label":t,onClick:this.onPlayItemVideo}))},renderAudio(){const{item:e,playItemAudioAriaLabel:t}=this.props;if(e._audio?.mp3)return r.createElement("div",{className:"ev-sorting-item-media",style:this.getMediaStyle()},e._audio.poster&&r.createElement(p,{graphicSrc:e._audio.poster}),r.createElement("div",{className:"ev-sorting-item-media-image-blocker"}),r.createElement(m,{icon:"play-circle",iconSize:32,"aria-label":t,onClick:this.onPlayItemAudio}))},renderItemNumber(){if(this.props.displayItemNumber)return r.createElement("div",{className:"ev-sorting-item-number"},this.props.itemNumber)},renderMedia(){switch(this.props.item._mediaType){case"image":return this.renderImage();case"gif":return this.renderGif();case"video":return this.renderVideo();case"audio":return this.renderAudio();default:return null}},render(){const{props:e}=this;return r.createElement("li",{className:this.getClassName(),tabIndex:e.isDisabled?-1:0,onKeyDown:this.onKeyDown},r.createElement(u,{item:this.props.item,shouldHideMarking:e.shouldHideMarking}),this.renderItemNumber(),r.createElement("div",{className:"ev-sorting-item-content"},this.renderMedia(),r.createElement(h,{style:this.getTextStyle(),html:this.props.item.text})))}});e.exports=o(_)},58228:(e,t,i)=>{const s=i(55807),r=i(27378),{SortableContainer:o}=i(65307),n=i(90005),a=i(66438);e.exports=o((e=>r.createElement("ul",{className:n("ev-sorting-items",{"ev-horizontal-layout":"x"===e.layout,"ev-vertical-layout":"y"===e.layout})},s(e.items,((t,i)=>r.createElement(a,{key:t._id,index:i,itemNumber:i+1,item:t,disabled:e.isDisabled,isDisabled:e.isDisabled,isComplete:e.isComplete,isSelected:e.selectedItemId===t._id,layout:e.layout,onItemSelected:e.onItemSelected,onItemDeselected:e.onItemDeselected,maxItemImageWidth:e.maxItemImageWidth,itemImageAlignment:e.itemImageAlignment,dialogCloseButtonText:e.dialogCloseButtonText,showPrompt:e.showPrompt,playItemVideoAriaLabel:e.playItemVideoAriaLabel,playItemAudioAriaLabel:e.playItemAudioAriaLabel,displayItemNumber:e.displayItemNumber,shouldHideMarking:e.shouldHideMarking}))))))},65579:(e,t,i)=>{const s=i(27378),r=i(54794);e.exports=({leftLabelText:e,rightLabelText:t})=>s.createElement("div",{className:"ev-sorting-labels-horizontal"},e&&s.createElement(r,{className:"ev-sorting-left-label ev-label",html:e}),t&&s.createElement(r,{className:"ev-sorting-right-label ev-label",html:t}))},79110:(e,t,i)=>{const s=i(52898),r=i(27378),o=i(13756),n=i(79325),a=i(5859),l=i(54794),d=s({displayName:"SortingPreview",getInitialState:()=>({_isPlaying:!1,_currentItemIndex:0}),UNSAFE_componentWillReceiveProps(){this.setState({_isPlaying:!1,_currentItemIndex:0},(()=>{this._audio&&(this._audio.pause?.(),this._audio.load?.()),this._video&&(this._video.pause?.(),this._video.load?.())}))},onAudioControlButtonClicked(){this.setState({_isPlaying:this.state._isPlaying=!this.state._isPlaying,_currentItemIndex:0},(()=>{this.state._isPlaying?(this._audio?.load?.(),this._audio?.play?.()):this._audio?.pause?.()}))},onAudioEnded(){const e=this.state._currentItemIndex+1;e<this.props.items.length?this.setState({_currentItemIndex:e},(()=>{this._audio?.load?.(),this._audio?.play?.()})):this.setState({_isPlaying:!1,_currentItemIndex:0})},onVideoControlButtonClicked(){this.setState({_isPlaying:this.state._isPlaying=!this.state._isPlaying,_currentItemIndex:0},(()=>{this.state._isPlaying?(this._video?.load?.(),this._video?.play?.()):this._video?.pause?.()}))},onVideoEnded(){const e=this.state._currentItemIndex+1;e<this.props.items.length?this.setState({_currentItemIndex:e},(()=>{this._video?.load?.(),this._video?.play?.()})):this.setState({_isPlaying:!1,_currentItemIndex:0})},renderControlButton(e){return r.createElement(n,{className:"ev-sorting-preview-control-button",icon:this.state._isPlaying?"cross-circle":"play-circle",iconSize:32,onClick:e})},renderAudioPoster(e){if(e._audio?.poster)return r.createElement("div",{className:"ev-sorting-audio-preview-poster",style:{height:this.props.previewHeight}},r.createElement(a,{graphicSrc:o(e._audio.poster)}))},renderAudioElement(e){if(e._audio?.mp3)return r.createElement("audio",{preload:"auto",ref:e=>this._audio=e,className:"ev-sorting-audio-preview-player",onEnded:this.onAudioEnded,controls:!0},r.createElement("source",{src:o(e._audio.mp3),type:"audio/mp3"}))},renderAudioPreview(e){return r.createElement("div",{className:"ev-sorting-audio-preview"},this.renderAudioPoster(e),this.renderAudioElement(e),this.renderControlButton(this.onAudioControlButtonClicked))},renderSubtitlesTrack(e){if(e._subtitles?.src)return r.createElement("track",{label:e._subtitles.label,kind:"subtitles",src:o(e._subtitles.src),srcLang:"en"})},renderVideoElement(e){if(e._video?.mp4)return r.createElement("video",{ref:e=>this._video=e,src:o(e._video.mp4),poster:o(e._video.poster),onEnded:this.onVideoEnded,style:{height:this.props.previewHeight},controls:!1},this.renderSubtitlesTrack(e._video))},renderVideoPreview(e){return r.createElement("div",{className:"ev-sorting-video-preview"},this.renderVideoElement(e),this.renderControlButton(this.onVideoControlButtonClicked))},renderPreview(){const e=this.props.items[this.state._currentItemIndex];switch(this.props.previewMode){case"video":return this.renderVideoPreview(e);case"audio":return this.renderAudioPreview(e);default:return null}},renderPreviewLabelText(){if(this.props.previewLabelText)return r.createElement(l,{className:"ev-sorting-preview-label ev-label",html:this.props.previewLabelText})},render(){return r.createElement("div",{className:"ev-sorting-preview"},this.renderPreviewLabelText(),this.renderPreview())}});e.exports=d},87433:(e,t,i)=>{const s=i(84900);e.exports=(e,t)=>({articleStyle:s(e,t,"article")._classes,isWindowsTouchScreen:e.device.isWindowsTouchScreen})},99707:(e,t,i)=>{const s=i(29115),r=i(19193),o=i(55807),n=i(95099),a=i(69238),{arrayMove:l}=i(65307),{SETUP_COMPONENT:d,SETUP_ANSWER_STATE:c,SUBMIT_QUESTION:m,RESET_QUESTION:p,SHOW_CORRECT_ANSWER:h,HIDE_CORRECT_ANSWER:u}=i(59345),{SORTING_ITEM_MOVED:_,SORTING_ITEM_SELECTED:g,SORTING_ITEM_DESELECTED:v}=i(23622);function I(e){return s({},e,{_selectedAnswerState:"_correctAnswer"})}e.exports=(e,t)=>{switch(t.type){case d:return function(e){if(e._isComplete)e._isComplete&&!e._hasUserAnswered&&e._isCorrect&&(e=I(e));else{const t={_items:r(e._items),_canSubmit:!0,_selectedItemId:void 0};e._shouldAlwaysMarkAsCorrect&&(t._shouldDisplayAttempts=!1),e=s({},e,t)}return e}(e);case c:return function(e){return e._correctAnswer=o(n(e._items,"itemIndex"),(e=>s({},e,{_isCorrect:!0,_showMarking:!0}))),e}(e);case _:return function(e,{oldIndex:t,newIndex:i,itemId:r}){const o=l(e._items,t,i);return s({},e,{_items:o,_selectedItemId:r})}(e,t.payload);case g:return s({},e,{_selectedItemId:t.payload.itemId});case v:return s({},e,{_selectedItemId:void 0});case m:return function(e){let t,i,r;if(e._shouldAlwaysMarkAsCorrect)r=o(e._items,(e=>s({},e,{_isCorrect:!0}))),t=!0,i=!1;else{r=o(e._items,((e,t)=>s({},e,{_isCorrect:e.itemIndex===t,_showMarking:!0})));const n=a(r,"_isCorrect").length;t=n===r.length,i=!t&&!!n}return s({},e,{_items:r,_isCorrect:t,_selectedItemId:void 0,_isPartlyCorrect:i,_hasUserAnswered:!0})}(e);case p:return function(e){const t=o(e._items,(e=>s({},e,{_isCorrect:void 0,_showMarking:!1})));return s({},e,{_items:t})}(e);case h:return I(e);case u:return function(e){return s({},e,{_selectedAnswerState:"_items"})}(e);default:return e}}},59479:(e,t,i)=>{const{registerComponent:s}=i(60633),r=i(23224),o=i(99707),{sortingItemMoved:n,sortingItemSelected:a,sortingItemDeselected:l}=i(23622);s("sorting",{component:r,actions:{sortingItemMoved:n,sortingItemSelected:a,sortingItemDeselected:l},reducer:o,mapStateToProps:i(87433),trackingMap:i(29069)})},29069:e=>{e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"Boolean",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0}}},98062:(e,t,i)=>{const{store:s}=i(60633),r=i(26614);function o(e,t,i){const o=e._feedback[i],n=r(o);return t&&!n?s.getState().course._globals._feedbackText[i]:n?o:null}function n(e,t){const i=e._feedbackNavigation;if(i&&i[t]&&i[t]._isEnabled&&i[t]._linkType)return{_link:i[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?s.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:o(e,t,"_correctGraphic"),feedbackNavigation:n(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,i=t._shouldUseGlobalPartlyCorrectFeedback,r=s.getState().course._globals._feedbackText;return 0===e._attemptsLeft?{feedbackMessage:(i?r.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:o(e,i,"_partlyCorrectFinalGraphic"),feedbackNavigation:n(e,"_partlyCorrect")}:{feedbackMessage:(i?r.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:o(e,i,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:n(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,i=t._shouldUseGlobalIncorrectFeedback,r=s.getState().course._globals._feedbackText;return 0===e._attemptsLeft||!t.notFinal&&!i||!r.incorrectNotFinalFeedback&&i?{feedbackMessage:(i?r.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:o(e,i,"_incorrectFinalGraphic"),feedbackNavigation:n(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}:{feedbackMessage:(i?r.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:o(e,i,"_incorrectNotFinalGraphic"),feedbackNavigation:n(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},20687:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:i,isPageReady:s}=e;return!0===s&&!0===i._isReady&&!0!==i[t]}},37238:(e,t,i)=>{const s=i(90005);e.exports=e=>s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},52875:e=>{e.exports=function(e,t,i,s,r){s&&s.props&&s.props.component?(t.top&&(s.isInviewTop=!0),t.bottom&&(s.isInviewBottom=!0),s.isInviewTop&&s.isInviewBottom&&r&&r(s.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);