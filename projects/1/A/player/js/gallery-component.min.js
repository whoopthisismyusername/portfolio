"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5447],{63646:(e,t)=>{t.GALLERY_ITEM_SELECTED="GALLERY_ITEM_SELECTED",t.galleryItemSelected=(e,i)=>({type:t.GALLERY_ITEM_SELECTED,payload:{componentId:e,itemId:i}})},77667:(e,t,i)=>{const s=i(69238),o=i(66259),n=i(64925),l=i(55807),a=i(52898),{func:r,object:c}=i(23615),p=i(48121),m=i(27378),d=i(90005),{Component:h}=i(30189),_=i(37238),u=i(20687),y=i(52875),g=i(26614),v=i(24748),E=i(79325),S=i(5859),A=a({displayName:"Gallery",propTypes:{component:c.isRequired,setComponentAsReady:r.isRequired,setComponentAsViewed:r.isRequired,setComponentAsComplete:r.isRequired,galleryItemSelected:r.isRequired,styles:c},mixins:[p],getInitialState:()=>({_isAutoPlaying:!0}),componentDidMount(){this.props.setComponentAsReady(this.props.component._id),this.startAutoPlay()},componentWillUnmount(){this.stopAutoPlay()},UNSAFE_componentWillReceiveProps({component:e}){e._isComplete||s(e._items,"_isVisited").length===e._items.length&&this.props.setComponentAsComplete(e._id)},componentDidUpdate(e){const{_shouldAutoplay:t}=this.props.component;if(e.component._shouldAutoplay!==t)return t?this.startAutoPlay():this.stopAutoPlay()},startAutoPlay(){this.props.component._shouldAutoplay&&(this._interval=setInterval(this.nextStage,this.props.component._autoplaySpeed))},stopAutoPlay(){this._interval&&(clearInterval(this._interval),this._interval=void 0)},nextStage(){const{_items:e}=this.props.component,t=e[o(e,"_isSelected")+1]||e[0];this.onGalleryItemSelected(t)},onGalleryItemSelected(e){this.props.galleryItemSelected(this.props.component._id,e._id)},onToggleAutoPlayClicked(){const{_isAutoPlaying:e}=this.state;this.setState({_isAutoPlaying:!e}),e?this.stopAutoPlay():this.startAutoPlay()},onVisibilityChange(...e){y(...e,this,this.props.setComponentAsViewed)},getButtonClassName(){const{_thumbnailPosition:e}=this.props.component;return d("ev-gallery-toggle-autoplay",{"ev-gallery-toggle-autoplay-top":"top"===e,"ev-gallery-toggle-autoplay-bottom":"bottom"===e})},renderPlayButton(){if(this.props.component._shouldAutoplay)return m.createElement(E,{className:this.getButtonClassName(),icon:(this.state._isAutoPlaying?"pause":"play")+"-circle",onClick:this.onToggleAutoPlayClicked})},renderGraphics(e){const{component:t}=this.props,i=n(t._items,"_isSelected"),s=l(t._items,(s=>{if(!g(s._graphic))return null;const o=i?._id===s._id;return m.createElement(v,{key:s._id,className:d("ev-gallery-image ev-clearfix",{"ev-top":!e}),animations:t._animations,startAnimation:o,ariaHidden:!o,style:{display:o?"block":"none"}},m.createElement(S,{graphicSrc:s._graphic.src,graphicSrcAdvanced:s._graphic.srcAdvanced,altText:s._graphic.alt,autoSize:!0,isLightboxEnabled:s._graphic._isLightboxEnabled,lightboxSrc:s._graphic.lightboxSrc,lightboxSrcAdvanced:s._graphic.lightboxSrcAdvanced,isMagnifierEnabled:s._graphic._isMagnifierEnabled}))}));return m.createElement("div",{className:"ev-gallery-items"},s)},renderThumbnails(e){const t=l(this.props.component._items,(e=>g(e._graphic)?m.createElement("li",{key:e._id,className:"ev-gallery-item"},m.createElement(E,{"aria-pressed":e._isSelected,image:e._graphic,imageAutoSize:!0,onClick:()=>this.onGalleryItemSelected(e)})):null));return m.createElement("div",{className:d("ev-gallery-image-select",{"ev-bottom":e})},m.createElement("ul",{className:"ev-gallery-image-select-inner ev-clearfix"},t))},render(){const{props:e}=this;return m.createElement(h,{component:e.component,styles:e.styles,isVisibilitySensorActive:u(e),onVisibilityChange:this.onVisibilityChange},"top"===e.component._thumbnailPosition?m.createElement("div",{className:_(e.component)},this.renderThumbnails(!1),this.renderGraphics(!1),this.renderPlayButton()):m.createElement("div",{className:_(e.component)},this.renderGraphics(!0),this.renderPlayButton(),this.renderThumbnails(!0)))}});e.exports=A},52147:(e,t,i)=>{const{registerComponent:s}=i(60633),o=i(77667),n=i(65428),{galleryItemSelected:l}=i(63646);s("gallery",{component:o,actions:{galleryItemSelected:l},reducer:n,trackingMap:i(82922)})},65428:(e,t,i)=>{const s=i(64925),o=i(55807),{SETUP_COMPONENT:n}=i(59345),{GALLERY_ITEM_SELECTED:l}=i(63646);e.exports=(e,t)=>{switch(t.type){case n:return function(e){const t=s(e._items,"_isSelected");if(e._items.length&&!t){const t=o(e._items,((e,t)=>({...e,_isSelected:0===t,_isVisited:0===t})));return{...e,_items:t}}return e}(e);case l:return function(e,t){const{itemId:i}=t.payload,s=o(e._items,(e=>e._id===i?{...e,_isSelected:!0,_isVisited:!0}:e._isSelected?{...e,_isSelected:!1}:e));return{...e,_items:s}}(e,t);default:return e}}},82922:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isVisited:{fieldKey:"_isVisited",type:"Boolean",shouldRestore:!0}}}}},20687:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:i,isPageReady:s}=e;return!0===s&&!0===i._isReady&&!0!==i[t]}},37238:(e,t,i)=>{const s=i(90005);e.exports=e=>s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},52875:e=>{e.exports=function(e,t,i,s,o){s&&s.props&&s.props.component?(t.top&&(s.isInviewTop=!0),t.bottom&&(s.isInviewBottom=!0),s.isInviewTop&&s.isInviewBottom&&o&&o(s.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);