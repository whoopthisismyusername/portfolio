"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4613],{43785:(e,t)=>{t.REFLECTION_COMPLETED="REFLECTION_COMPLETED",t.reflectionCompleted=e=>({type:t.REFLECTION_COMPLETED,payload:e})},29058:(e,t,n)=>{var o=n(7914)(n(11504));const s=n(52898),{array:i,bool:r,object:l,string:c}=n(23615),a=n(27378),d=n(79325),p=n(5644),m=n(77904),E=s({displayName:"ReflectionDownload",propTypes:{reflection:l.isRequired,username:c.isRequired,course:l.isRequired,components:i.isRequired,isComplete:r.isRequired,downloads:l,device:l.isRequired},onDownloadReflectionClicked(){var e=this;return(0,o.default)((function*(){const{reflection:t,course:n,components:o,username:s}=e.props;if(t._isHtmlFormat)return void m(t,n,o,s);const i=yield p(t,n,o,s);if(e.props.device.touch&&!e.props.device.isWindowsTouchScreen)return i.open();const r=t?.fileName||"Reflection";i.download(`${r}.pdf`)}))()},isLearnerNameRequired(){const{reflection:e,username:t}=this.props;return!e._shouldNotShowLearnerName&&!t},renderNameRequiredText(){if(this.props.isComplete&&this.isLearnerNameRequired())return a.createElement("span",{className:"ev-reflection-action-warning ev-label"},a.createElement("strong",null,this.props.downloads.nameRequiredText))},render(){const{reflection:e,isComplete:t}=this.props;return a.createElement("div",{className:"ev-list-item ev-reflection-download"},a.createElement("div",{className:"ev-list-item-inner ev-clearfix"},a.createElement("div",{className:"ev-list-item-left"},a.createElement("div",{className:"ev-list-item-title"},e.title),a.createElement("div",{className:"ev-list-item-content"},t?e.downloadAvailableText:e.downloadNotAvailableText)),a.createElement("div",{className:"ev-list-item-right"},this.renderNameRequiredText(),a.createElement(d,{className:"ev-reflection-download",text:e.downloadButtonText,isDisabled:!t||this.isLearnerNameRequired(),onClick:this.onDownloadReflectionClicked}))))}});e.exports=E},77031:(e,t,n)=>{var o=n(7914)(n(2398));const{connect:s}=n(13844),i=n(27378),{reflectionComponentsSelector:r}=n(12177),l=n(29058);e.exports=s((e=>({course:e.course,device:e.device,isComplete:e.reflection.isComplete,components:r(e)})))((e=>i.createElement(l,(0,o.default)({},e,{reflection:e.course._reflection}))))},59241:(e,t,n)=>{const o=n(27378),{Redirect:s}=n(57002),{Observable:i}=n(49923),r=n(45738),{SETUP_APP:l,APP_STARTED:c}=n(36329),{addElement:a}=n(15766),{COMPONENT_COMPLETED:d,COMPONENTS_UPDATED:p}=n(59345),{addPrompt:m}=n(41466),{loadPdfMake:E}=n(52098),{COURSE_ATTAINMENT_COMPONENT_COMPLETED:u,COURSE_ATTAINMENT_ACHIEVEMENTS_UPDATED:C}=n(64693),{COURSE_ASSESSMENT_COMPLETE:f}=n(95307),_=n(77031),{reflectionCompleted:O}=n(43785),{hasReflectionBeenAttained:T,isAttainedOnAssessmentMethod:N,isAttainedOnAttainmentMethod:S,isAttainedOnOpenInputComponentsCompleted:A,isAttainedOnReflectionComponentsCompleted:h}=n(76516);function R({course:e}){const t=[O(!0)];return e._reflection._hideDialog||t.push(m({title:e._reflection.title,body:e._reflection.downloadAvailableText,_action:{text:e._downloads.viewDownloadsButtonText,_link:{_link:"downloads",_linkType:"extensions"}},_glyph:{_type:"icon",_icon:"license"}})),i.of(...t)}t.registerElementsEpic=(e,t)=>e.filter(r(l,"_reflection",t)).mergeMap((()=>{const e=t.getState(),n=[E(),a({props:{},component:_,parent:"downloads",name:"reflection"}),a({parent:"router",name:"reflectionRedirect",path:"/reflection",exact:!0,render:()=>o.createElement(s,{to:"/downloads"})})];return T(e)&&n.push(O(!0)),i.of(...n)})),t.checkOnAppReadyOrComponentsUpdatedEpic=(e,t)=>e.filter(r([c,p],"_reflection",t)).mergeMap((()=>{const e=t.getState();return e.reflection.isComplete&&!T(e)?i.of(O(!1)):i.empty()})),t.checkOnCourseAttainmentMethod=(e,t)=>e.ofType(C,u).filter((()=>{const e=t.getState();return!e.reflection.isComplete&&S(e)})).mergeMap((()=>R(t.getState()))),t.checkOnCourseAssessmentMethod=(e,t)=>e.ofType(f).filter((()=>{const e=t.getState();return!e.reflection.isComplete&&N(e)})).mergeMap((()=>R(t.getState()))),t.checkOnOpenInputComponentsCompleted=(e,t)=>e.ofType(d).filter((()=>{const e=t.getState();return!e.reflection.isComplete&&(A(e)||h(e))})).mergeMap((()=>R(t.getState())))},76516:(e,t,n)=>{const o=n(47479),s=n(69238),{reflectionComponentsSelector:i}=n(12177),{COURSE_ASSESSMENT:r,COURSE_ASSESSMENT_PASSED:l,COURSE_ATTAINMENT:c,OPEN_INPUTS:a,NONE:d,REFLECTION_COMPONENTS:p}=n(16361),m=({course:e,courseAssessment:t={}})=>{const{_isEnabled:n,_obtainmentMethod:o}=e._reflection;return!(!(n&&t._isEnabled&&t._isComplete)||o===l&&!t._isPassed||o!==r)},E=({course:e,courseAttainment:t={}})=>{const{_isEnabled:n,_obtainmentMethod:o}=e._reflection;return!(!n||o!==c||!t._isEnabled)&&t._isComplete},u=({course:e,components:t})=>{const{_isEnabled:n,_obtainmentMethod:i}=e._reflection;if(!n||i!==a)return!1;const r=["openInput","linkedOpenInput"],l=s(t,(({_component:e})=>r.includes(e)));return!!l.length&&o(l,"_isComplete")},C=e=>{const{_isEnabled:t,_obtainmentMethod:n}=e.course._reflection;if(!t||n!==p)return!1;const s=i(e);return!!s.length&&o(s,"_isComplete")};e.exports={hasReflectionBeenAttained:e=>{switch(e.course._reflection._obtainmentMethod){case r:case l:return m(e);case c:return E(e);case a:return u(e);case p:return C(e);case d:return!0}return!1},isAttainedOnAssessmentMethod:m,isAttainedOnAttainmentMethod:E,isAttainedOnOpenInputComponentsCompleted:u,isAttainedOnReflectionComponentsCompleted:C}},16361:e=>{e.exports={COURSE_ASSESSMENT:"Course Assessment",COURSE_ASSESSMENT_PASSED:"Course Assessment Passed",COURSE_ATTAINMENT:"Course Attainment",OPEN_INPUTS:"Open Input Components",REFLECTION_COMPONENTS:"Reflection Components",NONE:"None"}},57494:(e,t,n)=>{const{SETUP_APP:o}=n(36329),{REFLECTION_COMPLETED:s}=n(43785),i={isComplete:!1};e.exports=(e=i,t)=>{if(t.type===o){const n=t.payload.course._reflection;return n?._isEnabled?e:i}return t.type===s?{...e,isComplete:t.payload}:e}},30328:(e,t,n)=>{const{registerEpics:o,registerReducer:s}=n(60633),{registerElementsEpic:i,checkOnCourseAttainmentMethod:r,checkOnCourseAssessmentMethod:l,checkOnOpenInputComponentsCompleted:c,checkOnAppReadyOrComponentsUpdatedEpic:a}=n(59241);s("reflection",n(57494)),o(i,r,l,c,a)},45738:(e,t,n)=>{const o=n(99729);e.exports=(e,t,n)=>(Array.isArray(e)||(e=[e]),({type:s})=>-1!==e.indexOf(s)&&o(n.getState(),["course",t,"_isEnabled"],!1))}}]);