"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6538],{82323:(e,t)=>{t.VIDEO_INTRO_METRICS="VIDEO_INTRO_METRICS",t.videoIntroMetricsChange=e=>({type:t.VIDEO_INTRO_METRICS,payload:e})},21504:(e,t,o)=>{const s=o(98779),i=o(52898),{bool:r,func:n,object:l,string:c}=o(23615),a=o(27378),d=o(90005),u=o(79325),p=o(54659),_=o(13756),h=i({displayName:"VideoIntroFullScreen",propTypes:{device:l.isRequired,closeFullScreen:n.isRequired,_metrics:l,videoIntroMetricsChange:n.isRequired,_shouldCropVideo:r,_isFullScreenCloseButtonAtBottom:r,_shouldEnableCloseButtonOnPlay:r,_video:l,_poster:l,_subtitles:l,_closeButtonText:c},getInitialState:()=>({_isVisible:!0,_hasVideoStarted:!1}),onPlay(){this.setState({_isVideoPlaying:!0,_hasVideoStarted:!0})},onPause(){this.setState({_isVideoPlaying:!1})},onMetricsChange(e){this.props.videoIntroMetricsChange(e)},onCloseClicked(e){e.preventDefault(),e.currentTarget.blur();const{closeFullScreen:t}=this.props;this.setState({_isVisible:!1},(()=>{s((()=>{t()}),300)}))},getStyle(){const{windowHeight:e,windowWidth:t}=this.props.device;return{width:`${t}px`,height:`${e}px`,opacity:this.state._isVisible?1:0}},getClassName(){return d("ev-video-intro-fullscreen ev-use-custom-play-button",{"ev-is-cropped-video":this.props._shouldCropVideo,"ev-is-centered-video":!this.props._shouldCropVideo,"ev-is-playing":this.state._isVideoPlaying})},renderVideo(){const e=_(this.props._video);if(!e)return;const{_shouldCropVideo:t,_subtitles:o,_metrics:s,_poster:i}=this.props;return a.createElement(p,{className:"ev-video-intro-fullscreen-video",src:e,posterSrc:_(i),controls:!t,hasFullScreen:!1,metrics:s,subtitlesSrc:t?null:_(o?.src),subtitlesLabel:o?.label,onPlay:this.onPlay,onPause:this.onPause,onMetricsChange:this.onMetricsChange})},render(){const{props:e,state:t}=this;return a.createElement("div",{className:this.getClassName(),style:this.getStyle()},a.createElement("div",{className:"ev-video-intro-fullscreen-video-container"},this.renderVideo()),a.createElement("div",{className:d("ev-video-intro-fullscreen-actions",{"ev-is-bottom":e._isFullScreenCloseButtonAtBottom})},a.createElement(u,{text:e._closeButtonText,isDisabled:e._shouldEnableCloseButtonOnPlay&&!t._hasVideoStarted,onClick:this.onCloseClicked})))}});e.exports=h},88993:(e,t,o)=>{const{connect:s}=o(13844),i=o(10625),{videoIntroMetricsChange:r}=o(82323);e.exports=s((({videoIntro:e,course:{_videoIntro:t}})=>({src:t._video,poster:t._poster,subtitles:t._subtitles,transcript:t._transcript,shouldAutoPlay:t._shouldAutoPlay,metrics:e._metrics})),{onMetricsChange:r})(i)},24738:(e,t,o)=>{const s=o(29115),i=o(27378),{connect:r}=o(13844),{videoIntroMetricsChange:n}=o(82323),l=o(21504);e.exports=r((e=>s({},e.course._videoIntro,e.videoIntro,{theme:e.theme})),{videoIntroMetricsChange:n})((e=>i.createElement(l,e)))},24983:(e,t,o)=>{const{connect:s}=o(13844),i=o(81469);e.exports=s((({course:{_id:e,_videoIntro:t}})=>({id:e,service:t._videoStream?._service,options:t._videoStream?._options,transcript:t._transcript})))(i)},18710:(e,t,o)=>{const s=o(27378),{SETUP_APP:i}=o(36329),{openFullScreen:r}=o(65790),{registerTrackingMap:n}=o(60633),{PAGE_OR_MENU_IS_READY:l}=o(64566),{addPrompt:c}=o(41466),a=o(24738),d=o(88993),u=o(24983),p=o(18240);t.registerTrackingMapEpic=(e,t)=>e.filter((e=>{const{_videoIntro:o}=t.getState().course;return o&&o._isEnabled&&e.type===i})).do((()=>{n("videoIntro",p,"extensions")})).ignoreElements(),t.showVideoIntroEpic=(e,t)=>e.filter((({type:e})=>{if(e!==l)return!1;const{app:{isPagePreview:o},course:s,location:i}=t.getState(),r=s._videoIntro;return!(o||!r||!r._isEnabled||r._shouldOnlyDisplayOnMenu&&"menu"!==i.currentContentType)})).take(1).map((()=>{const{course:e,device:o}=t.getState(),i=e._videoIntro;if(i._useVideoStream)return c({_component:s.createElement(u,null),_shouldNotShowInNavigation:!0,_hasPriority:!0,_sortOrder:1,_class:"ev-video-intro-prompt",_dismiss:{text:i._closeButtonText}});if(i._shouldShowFullScreen&&"small"!==o.screenSize&&(!o.touch||o.isWindowsTouchScreen))return r({component:a,props:i});const n={_component:s.createElement(d,null),_shouldNotShowInNavigation:!0,_hasPriority:!0,_sortOrder:1,_class:"ev-video-intro-prompt",_dismiss:{text:i._closeButtonText}};return i._video&&(n._shouldWaitForDisplay=!0),c(n)}))},10979:(e,t,o)=>{const s=o(29115),{VIDEO_INTRO_METRICS:i}=o(82323),{RESTORE_EXTENSION:r}=o(18403),n={_metrics:null};e.exports=(e=n,t)=>{switch(t.type){case i:return s({},e,{_metrics:t.payload});case r:return"videoIntro"===t.payload.extensionName?s({},e,t.payload.extensionData):e;default:return e}}},18240:e=>{e.exports={_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}},50912:(e,t,o)=>{const{registerEpics:s,registerReducer:i}=o(60633),{showVideoIntroEpic:r,registerTrackingMapEpic:n}=o(18710),l=o(10979);s(n,r),i("videoIntro",l)}}]);