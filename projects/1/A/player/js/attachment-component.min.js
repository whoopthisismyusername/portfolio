"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7184],{61430:(e,t)=>{t.ATTACHMENT_UPLOADED="ATTACHMENT_UPLOADED",t.attachmentUploaded=(e,n)=>({type:t.ATTACHMENT_UPLOADED,payload:{componentId:e,attachment:n}})},44861:(e,t,n)=>{const{registerComponent:i}=n(60633),{attachmentUploaded:s}=n(61430),o=n(6218);i("attachment",{component:n(15774),actions:{attachmentUploaded:s},reducer:o,mapStateToProps:e=>({buttons:e.course._buttons,isLivePreview:e.app.isLivePreview||e.course._isShareable}),trackingMap:n(56091)})},15774:(e,t,n)=>{const i=n(52898),s=n(23615),o=n(27378),{Component:r}=n(30189),a=n(37238),c=n(54794),l=n(66908),p=n(46074),u=i({displayName:"Attachment",propTypes:{component:s.object.isRequired,setComponentAsReady:s.func.isRequired,setComponentAsComplete:s.func.isRequired,setComponentAsViewed:s.func.isRequired,setComponentAsStarted:s.func.isRequired,buttons:s.object.isRequired,isLivePreview:s.bool.isRequired,attachmentUploaded:s.func.isRequired},getInitialState:function(){return this.getDefaultState()},componentDidMount:function(){const{props:e}=this;this._isMounted=!0,e.setComponentAsReady(e.component._id)},componentWillUnmount:function(){this._isMounted=!1,this._cancelToken&&this._cancelToken.cancel()},getDefaultState:function(){return{_fileSelected:null,_isUploading:!1,_progress:0}},onFileInputChanged:function(e){const{props:t}=this;t.component._hasStarted||t.setComponentAsStarted(t.component._id),this.setState({_fileSelected:e})},onCancelClicked:function(){this.setState({_fileSelected:null,_isUploading:!1}),this._cancelToken&&this._cancelToken.cancel()},onFileUploadClicked:function(){},onVisibilityChange:function(e,{top:t,bottom:n}){const{props:i}=this;t&&(this.isInviewTop=!0),n&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&i.setComponentAsViewed(i.component._id)},getIsVisibilitySensorActive:function(){const{component:e,isPageReady:t}=this.props;return!0===t&&!0===e._isReady&&!0!==e._hasBeenViewed},renderComponentNotAvailable:function(){const{props:e}=this;if(e.isLivePreview)return o.createElement("div",{className:"ev-attachment-preview-mode"},"This component is only available when taking a course")},renderPreview:function(){const{component:e}=this.props;if(e._attachment)return o.createElement(p,{attachment:e._attachment})},renderAssignmentSubmitted:function(){const{component:e}=this.props;if(e._isComplete)return o.createElement("div",{className:"ev-component-assignment-submitted"},o.createElement("div",{className:"ev-component-assignment-submitted-inner"},o.createElement("i",{className:"ev-component-assignment-submitted-icon ev-icon ev-icon-paper-plane"}),o.createElement(c,{className:"ev-component-assignment-submitted-message",html:e._assignment.submittedMessage})))},renderWidget:function(){const{props:e,state:t}=this;if(!e.isLivePreview)return o.createElement("div",null,this.renderPreview(),o.createElement(l,{ariaLabel:e.component.inputAriaLabel,isUploaded:!!e.component._attachment,isUploading:t._isUploading,uploadProgress:t._progress,submitButtonText:e.buttons._submit.buttonText,clearButtonText:e.component.clearButton,removeButtonText:e.component.removeButton,fileSelected:t._fileSelected,onFileInputChange:this.onFileInputChanged,onFileUploadClick:this.onFileUploadClicked,onCancelClick:this.onCancelClicked}),this.renderAssignmentSubmitted())},render:function(){const{props:e}=this;return o.createElement(r,{component:e.component,styles:e.styles,isVisibilitySensorActive:this.getIsVisibilitySensorActive(),onVisibilityChange:this.onVisibilityChange},o.createElement("div",{className:a(e.component)},this.renderComponentNotAvailable(),this.renderWidget()))}});e.exports=u},46074:(e,t,n)=>{const i=n(52898),s=n(27378),o=i({displayName:"AttachmentPreview",getAttachmentType:function(){return this.props.attachment.split("/")[1]},getAttachmentUrl:function(){return`../../${this.props.attachment}`},renderVideo:function(e){return s.createElement("video",{src:e,controls:!0})},renderImage:function(e){return s.createElement("img",{src:e})},renderAudio:function(e){return s.createElement("audio",{controls:!0},s.createElement("source",{src:e,type:"audio/mpeg"}))},renderFile:function(e){return s.createElement("a",{className:"ev-button ev-primary",href:e,target:"_blank"},"Click to view file")},renderPreview:function(){const e=this.getAttachmentType(),t=this.getAttachmentUrl();switch(e){case"videos":return this.renderVideo(t);case"images":return this.renderImage(t);case"audios":return this.renderAudio(t);case"files":return this.renderFile(t)}},render:function(){return s.createElement("div",{className:"ev-attachment-preview"},this.renderPreview())}});e.exports=o},66908:(e,t,n)=>{const i=n(52898),s=n(23615),o=n(27378),r=n(31542),a=i({displayName:"AttachmentUploader",propTypes:{ariaLabel:s.string,isUploaded:s.bool.isRequired,isUploading:s.bool.isRequired,uploadProgress:s.number.isRequired,fileSelected:s.object,onFileInputChange:s.func.isRequired,onFileUploadClick:s.func.isRequired,onCancelClick:s.func.isRequired,submitButtonText:s.string.isRequired,clearButtonText:s.string.isRequired,removeButtonText:s.string.isRequired},onFileInputChange:function(){const e=r.findDOMNode(this._input);let t=null;e.files.length>0&&(t=e.files[0]),this.props.onFileInputChange(t)},onFileImportClick:function(e){e.preventDefault(),e.currentTarget.blur(),this.props.onFileUploadClick()},onCancelImportClick:function(e){e.preventDefault(),e.currentTarget.blur(),this.props.onCancelClick()},renderPreviewName:function(){const{fileSelected:e}=this.props;if(e)return o.createElement("div",{className:"ev-attachment-uploader-preview"},o.createElement("div",{className:"ev-attachment-uploader-preview-name"},e.name),o.createElement("button",{className:"ev-button ev-attachment-uploader-preview-clear-button",onClick:this.onCancelImportClick},this.props.clearButtonText))},renderClearButton:function(){if(this.props.fileSelected)return o.createElement("button",{className:"ev-button",onClick:this.onCancelImportClick},this.props.clearButtonText)},renderInput:function(){const{props:e}=this;if(!e.fileSelected&&!e.isUploaded)return o.createElement("input",{className:"ev-input-text","aria-label":e.ariaLabel,ref:e=>this._input=e,type:"file",onChange:this.onFileInputChange})},renderProgressBar:function(){const{props:e}=this;if(e.isUploading)return o.createElement("div",{className:"ev-attachment-uploader-progress"},o.createElement("div",{className:"ev-attachment-uploader-progress-bar",style:{width:e.uploadProgress+"px"}}))},render:function(){const{props:e}=this;return o.createElement("div",{className:"ev-attachment-uploader"},this.renderInput(),this.renderPreviewName(),this.renderProgressBar(),o.createElement("div",{className:"ev-attachment-buttons"},o.createElement("button",{className:"ev-button",disabled:!e.fileSelected||e.isUploaded||e.isUploading,onClick:this.onFileImportClick},this.props.submitButtonText)))}});e.exports=a},6218:(e,t,n)=>{const i=n(29115),{ATTACHMENT_UPLOADED:s}=n(61430);e.exports=(e,t)=>t.type===s?i({},e,{_attachment:t.payload.attachment}):e},56091:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_attachment:{fieldKey:"_attachment",type:"String",shouldRestore:!0},_assignment:{fieldKey:"_assignment",type:"Object",shouldRestore:!0},_assignmentAttempts:{fieldKey:"_assignmentAttempts",type:"Object",shouldRestore:!0}}},37238:(e,t,n)=>{const i=n(90005);e.exports=e=>i(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}}]);