"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8211],{5717:(e,t)=>{t.SET_AUDIO_ITEM_AS_COMPLETE="SET_AUDIO_ITEM_AS_COMPLETE",t.setAudioItemAsComplete=(e,i)=>({type:t.SET_AUDIO_ITEM_AS_COMPLETE,payload:{componentId:e,itemId:i}})},47313:(e,t,i)=>{const{registerComponent:s}=i(60633),o=i(17121),n=i(81078),{setAudioItemAsComplete:r}=i(5717);s("audio",{component:o,actions:{setAudioItemAsComplete:r},reducer:n,trackingMap:i(43847)})},17121:(e,t,i)=>{const s=i(69238),o=i(55807),n=i(52898),{func:r,object:p}=i(23615),a=i(27378),d=i(90005),{Component:l}=i(30189),m=i(9184),c=i(20687),u=i(52875),h=i(37238),_=i(16131),y=n({displayName:"Audio",propTypes:{course:p.isRequired,component:p.isRequired,setAudioItemAsComplete:r.isRequired,setComponentAsReady:r.isRequired,setComponentAsViewed:r.isRequired,setComponentAsStarted:r.isRequired,setComponentAsComplete:r.isRequired,styles:p},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps(e){s(e.component._items,"_isComplete").length!==e.component._items.length||e.component._isComplete||this.props.setComponentAsComplete(this.props.component._id)},setAudioItemAsComplete(e){this.props.setAudioItemAsComplete(this.props.component._id,e)},setComponentAsStarted(){this.props.component._hasStarted||this.props.setComponentAsStarted(this.props.component._id)},onVisibilityChange(...e){u(...e,this,this.props.setComponentAsViewed)},getClassName(){const{component:e}=this.props;return d(h(e),{"ev-has-grid-layout":e._enableColumnLayout})},renderItems(){return o(this.props.component._items,(e=>a.createElement(_,{key:e._id,item:e,transcriptTitle:this.props.course._videos?.transcriptTitle,enableColumnLayout:this.props.component._enableColumnLayout,shouldDisplayControls:this.props.component._shouldDisplayControls,setComponentAsStarted:this.setComponentAsStarted,setAudioItemAsComplete:this.setAudioItemAsComplete})))},renderItemsContainer(){const{component:e}=this.props;return e._enableColumnLayout?a.createElement(m,{isList:!0,columns:e._numberOfColumns,animations:e._animations},this.renderItems()):a.createElement("ul",{className:"ev-audio-items"},this.renderItems())},render(){const{props:e}=this;return a.createElement(l,{component:e.component,styles:e.styles,isVisibilitySensorActive:c(e),onVisibilityChange:this.onVisibilityChange},a.createElement("div",{className:this.getClassName()},this.renderItemsContainer()))}});e.exports=y},16131:(e,t,i)=>{const s=i(99729),o=i(52898),{bool:n,func:r,object:p,shape:a,string:d}=i(23615),l=i(27378),{connect:m}=i(13844),c=i(90005),u=i(13756),h=i(5859),_=i(46473),y=i(99744),{addPrompt:C}=i(41466),I=o({displayName:"AudioItem",propTypes:{item:a({_audio:p,_transcript:p,_setCompletionOn:d}).isRequired,enableColumnLayout:n,shouldDisplayControls:n,setAudioItemAsComplete:r.isRequired,setComponentAsStarted:r.isRequired,transcriptTitle:d,addPrompt:r.isRequired},getInitialState:()=>({isTranscriptOpen:!1}),componentDidUpdate({item:e}){if(!this._audio)return;const{item:t}=this.props;t._audio._isExternalLink===e._audio._isExternalLink?t._audio._isExternalLink?t._audio.externalUrl!==e._audio.externalUrl&&this._audio.load?.():u(t._audio?.mp3)!==u(e._audio?.mp3)&&this._audio.load?.():this._audio.load?.()},setAudioItemAsComplete(){this.props.setAudioItemAsComplete(this.props.item._id)},onAudioButtonClicked(e){if(e.preventDefault(),this._audio.paused)return this._audio.currentTime=0,void this._audio?.play();this._audio.pause?.()},onPlay(){const{props:e}=this;"play"!==e.item._setCompletionOn||e.item._isComplete||this.setAudioItemAsComplete(),e.setComponentAsStarted()},onTranscriptButtonClicked(){const{_setCompletionOn:e,_isComplete:t,_transcript:i}=this.props.item;if("play"!==e&&"ended"!==e||t||this.setAudioItemAsComplete(),this.props.setComponentAsStarted(),s(i,"_shouldOpenTranscriptInPopup",!0))return this.props.addPrompt({title:this.props.transcriptTitle,body:i.body,_glyph:{_type:"icon",_icon:"audio-book"}});this.setState((({isTranscriptOpen:e})=>({isTranscriptOpen:!e})))},onAudioEnded(){const{props:e}=this;"ended"!==e.item._setCompletionOn||e.item._isComplete||this.setAudioItemAsComplete()},onVisibilityChanged(e,{top:t,bottom:i}){t&&(this.isInviewTop=!0),i&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&this.setAudioItemAsComplete()},getIsVisibilitySensorActive(){const{item:e}=this.props;return"inview"===s(e,"_setCompletionOn","inview")&&!e._isComplete},renderAudioSource(){const{item:e}=this.props;let t=e._audio.mp3;return t&&(t=u(t)),e._audio._isExternalLink&&(t=e._audio.externalUrl),l.createElement("source",{src:t,type:"audio/mp3"})},renderAudioElement(){const{item:e,shouldDisplayControls:t}=this.props,i=!e._audio.poster||t;return l.createElement("audio",{ref:e=>this._audio=e,preload:"auto",onPlay:this.onPlay,onEnded:this.onAudioEnded,controls:i,controlsList:"nodownload"},this.renderAudioSource())},renderAudioButton(){const{_audio:e}=this.props.item;if(e.poster)return l.createElement("button",{className:"ev-audio-player-button",onClick:this.onAudioButtonClicked},l.createElement(h,{graphicSrc:e.poster,altText:e.alt}))},renderTranscriptButton(){const{_transcript:e}=this.props.item;if(!e?.button||!e?.body)return;const t=s(e,"_shouldOpenTranscriptInPopup",!0)?"popup":"collapse";return l.createElement(_.Button,{text:e.button,transcriptType:t,isTranscriptOpen:this.state.isTranscriptOpen,onClick:this.onTranscriptButtonClicked})},renderTranscriptBody(){const{_transcript:e}=this.props.item;if(e?.body&&!s(e,"_shouldOpenTranscriptInPopup",!0))return l.createElement(_.Body,{text:e.body,className:c("ev-component-body",{"ev-display-none":!this.state.isTranscriptOpen}),innerClassName:"ev-component-body-inner"})},render(){const{props:e}=this,t=e.enableColumnLayout?"div":"li";return l.createElement(y,{active:this.getIsVisibilitySensorActive(),delay:600,partialVisibility:!0,onChange:this.onVisibilityChanged},l.createElement(t,{className:"ev-audio-item"},this.renderAudioButton(),this.renderAudioElement(),this.renderTranscriptButton(),this.renderTranscriptBody()))}});e.exports=m(null,{addPrompt:C})(I)},81078:(e,t,i)=>{const s=i(55807),{SET_AUDIO_ITEM_AS_COMPLETE:o}=i(5717);e.exports=(e,t)=>{if(t.type===o){const i=s(e._items,(e=>e._id===t.payload.itemId?{...e,_isComplete:!0}:e));return{...e,_items:i}}return e}},43847:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0}}}}},9184:(e,t,i)=>{const s=i(8921),o=i(29115),n=i(52898),r=i(27378),p=i(90005),{bool:a,func:d,object:l,number:m,string:c}=i(23615),{connect:u}=i(13844),{Trail:h,config:_,animated:y,interpolate:C}=i(24450),I=i(99744),g=i(24297),A=n({displayName:"Grid",propTypes:{isList:a.isRequired,isRTL:a.isRequired,shouldIgnoreScreenSize:a.isRequired,animations:l,gridItemStyle:l,gridItemInnerStyle:l,windowWidth:m.isRequired,getGridItemInnerStyle:d,hasGridItemInnerPadding:a,className:c,columns:m,separatorBorder:c},getDefaultProps:()=>({isList:!1,isRTL:!1,shouldIgnoreScreenSize:!1,gridItemStyle:{},gridItemInnerStyle:{},hasGridItemInnerPadding:!0,animations:{_slideInX:{_isEnabled:!1},_slideInY:{_isEnabled:!1},_fadeInItem:{_isEnabled:!1},_scaleInItem:{_isEnabled:!1},_easing:"default"}}),getInitialState(){return{columns:this.getColumns(window.innerWidth,this.props.columns),isVisible:!1}},componentDidMount(){this._isMounted=!0},componentWillUnmount(){this._isMounted=!1},UNSAFE_componentWillReceiveProps(e){const{props:t}=this,i=e.windowWidth!==t.windowWidth,s=t.columns!==e.columns;(i||s)&&this.updateColumns(e.windowWidth,e.columns)},getColumns(e,t){return this.props.shouldIgnoreScreenSize?t:e>=768?t||2:e<768&&e>=520?1===t?1:2:1},updateColumns(e,t){this._isMounted&&this.setState({columns:this.getColumns(e,t)})},getAnimationsEnabled(){const{animations:e}=this.props;return!!e&&0!==s(e).values().filter("_isEnabled").value().length},getGridItemStyle(e,t,i,s,n,r){const{isRTL:p}=this.props,a=100/this.state.columns,d=o({flex:`${a}%`,textAlign:"center",boxSizing:"border-box",margin:"10px 0"},this.props.gridItemStyle);t&&(d.opacity=i,d.transform=C([s,n,r],((e,t,i)=>`translate(${e}%,${t}%) scale(${i})`)));const l=this.props.children.length%this.state.columns;if((e+1)%this.state.columns!=0&&this.props.separatorBorder&&(d.borderRight=this.props.separatorBorder),0===l)return d;if(1===l)return e===this.props.children.length-1&&(d.margin="auto"),d;if(e===this.props.children.length-l){let e=a/2;2===l&&4===this.state.columns&&(e=a),d[p?"marginRight":"marginLeft"]=`${e}%`}return d},getGridItemInnerStyle(e){const{gridItemInnerStyle:t,getGridItemInnerStyle:i,hasGridItemInnerPadding:s}=this.props,n=i?i(e):{};return o({padding:s?"0 10px":0,boxSizing:"border-box"},t,n)},onVisibilityChange(e){e&&this.setState({isVisible:!0})},getSpringTo(){return this.state.isVisible?{opacity:1,x:0,y:0,scale:1}:g(this.props.animations)},renderTrailItem(e,t){const i=this.props.isList?y.li:y.div;return({opacity:s,x:o,y:n,scale:p})=>r.createElement(i,{key:e?.key??t,className:"ev-grid-item",style:this.getGridItemStyle(t,!0,s,o,n,p)},r.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e))},renderGridItems(e){const{isList:t,children:i,animations:s}=this.props,o=t?y.li:y.div;return e?r.createElement(h,{native:!0,key:i.length,keys:i.map(((e,t)=>e?.key??t)),items:i,config:_[s._easing]||_.default,from:g(s),to:this.getSpringTo()},this.renderTrailItem):i.map(((e,t)=>r.createElement(o,{key:e?.key??t,className:"ev-grid-item",style:this.getGridItemStyle(t,!1)},r.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e))))},render(){const e=this.props.isList?"ul":"div",t=this.getAnimationsEnabled(),i=p("ev-grid",this.props.className);return t?r.createElement(I,{active:!1===this.state.isVisible,partialVisibility:!0,scrollCheck:!0,scrollThrottle:10,intervalDelay:250,minTopValue:200,onChange:this.onVisibilityChange},r.createElement(e,{className:i},this.renderGridItems(!0))):r.createElement(e,{className:i},this.renderGridItems(!1))}});e.exports=u((({device:e,course:t})=>({windowWidth:e.windowWidth,isRTL:t._isRTL})))(A)},20687:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:i,isPageReady:s}=e;return!0===s&&!0===i._isReady&&!0!==i[t]}},37238:(e,t,i)=>{const s=i(90005);e.exports=e=>s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},52875:e=>{e.exports=function(e,t,i,s,o){s&&s.props&&s.props.component?(t.top&&(s.isInviewTop=!0),t.bottom&&(s.isInviewBottom=!0),s.isInviewTop&&s.isInviewBottom&&o&&o(s.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);