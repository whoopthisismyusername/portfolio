(self.webpackChunk=self.webpackChunk||[]).push([[5389,7130],{85874:(e,t)=>{"use strict";t.BRANCHING_OPTION_SELECTED="BRANCHING_OPTION_SELECTED",t.BRANCHING_END_ITEM="BRANCHING_END_ITEM",t.BRANCHING_DISPLAY_COMPLETE_STORY="BRANCHING_DISPLAY_COMPLETE_STORY",t.BRANCHING_CLOSE_FULLSCREEN="BRANCHING_CLOSE_FULLSCREEN",t.BRANCHING_ITEM_VIDEO_METRICS="BRANCHING_ITEM_VIDEO_METRICS",t.BRANCHING_SOFT_RESET="BRANCHING_SOFT_RESET",t.onOptionSelected=(e,s,n,r)=>({type:t.BRANCHING_OPTION_SELECTED,payload:{componentId:e,itemId:s,optionId:n,optionScore:r}}),t.onBranchingEndItem=(e,s)=>({type:t.BRANCHING_END_ITEM,payload:{componentId:e,itemId:s}}),t.branchingDisplayCompleteStory=e=>({type:t.BRANCHING_DISPLAY_COMPLETE_STORY,payload:{componentId:e}}),t.branchingCloseFullScreen=e=>({type:t.BRANCHING_CLOSE_FULLSCREEN,payload:{componentId:e}}),t.branchingSoftReset=e=>({type:t.BRANCHING_SOFT_RESET,payload:{componentId:e}}),t.branchingItemVideoMetricsChanged=e=>({type:t.BRANCHING_ITEM_VIDEO_METRICS,payload:e})},5763:(e,t,s)=>{"use strict";const{registerComponent:n,registerEpics:r}=s(60633),{openFullScreen:o}=s(90951),i=s(60916),a=s(1160),{onOptionSelected:c,onBranchingEndItem:l,branchingDisplayCompleteStory:p,branchingCloseFullScreen:m,branchingItemVideoMetricsChanged:d,branchingSoftReset:u}=s(85874),{branchingTrackableChangeEpic:h}=s(92809),_=s(44248),g=s(1052);s(40216),r(h),n("branching",{component:i,actions:{onOptionSelected:c,onBranchingEndItem:l,branchingDisplayCompleteStory:p,branchingCloseFullScreen:m,openFullScreen:o,branchingItemVideoMetricsChanged:d,branchingSoftReset:u},reducer:a,mapStateToProps:_,trackingMap:g})},2565:(e,t,s)=>{"use strict";var n=s(8528),r=s(7914)(s(2398));const o=s(72856),i=s(99729),a=s(64925),c=s(78581),l=s(55807),p=s(29115),m=s(35754),d=s(92465),u=s(23544),h=s(52898),_=s(23615),g=s(27378),S=s(31542),E=s(90005),{Link:y}=s(57002),{Component:I}=s(30189),v=s(37238),b=s(35550),C=s(64264),T=s(20687),R=s(52875),f=s(16666),N=s(1550),O=s(99123),A=s(12159),x=s(96570),B=s(58902),M=h({displayName:"Branching",propTypes:{component:_.object.isRequired,setComponentAsReady:_.func.isRequired,setComponentAsViewed:_.func.isRequired,setComponentAsStarted:_.func.isRequired,setComponentAsComplete:_.func.isRequired,onOptionSelected:_.func.isRequired,onBranchingEndItem:_.func.isRequired,branchingDisplayCompleteStory:_.func.isRequired,branchingCloseFullScreen:_.func.isRequired,branchingItemVideoMetricsChanged:_.func.isRequired,updateVariable:_.func.isRequired,resetScroll:_.func,isFullScreen:_.bool,screenSize:_.string.isRequired,navigation:_.object.isRequired,isInline:_.bool.isRequired,closeFullScreen:_.func,resetQuestion:_.func,branchingSoftReset:_.func,isPageReady:_.bool,theme:_.object.isRequired,isRTL:_.bool,setAriaLive:_.func.isRequired,assessmentAttemptsTaken:_.number,remainingAttemptsText:_.string,remainingAttemptText:_.string,buttons:_.object.isRequired,styles:_.object},componentDidMount(){this.preloadImages()},UNSAFE_componentWillReceiveProps(e){const{component:t}=this.props;!t._isComplete&&e.component._isComplete&&this._restart&&this._restart.focus({preventScroll:!0})},componentDidUpdate({component:e}){const{component:t,resetScroll:s,isFullScreen:r,screenSize:o,navigation:i,isInline:a}=this.props;if(!t._isStoryMode&&e._previousItems&&t._previousItems.length!==e._previousItems.length){if(r)return s();const e=S.findDOMNode(this);let t=parseInt(i.navigationOffset,10);"medium"!==o&&"small"!==o||(t=parseInt(i.navigationMobileOffset,10)),a&&(t=n(".appheader").height()),n.scrollTo(e,{offset:{top:-t},duration:10})}},preloadImages(){o(this.props.component._items,(e=>{e?._graphic?.src&&b(e._graphic.src),e?._gif?.src&&b(e._gif.src),e?._video?.poster&&b(e._video.poster),e?._audio?.poster&&b(e._audio.poster)}))},getAssessmentData(){const{component:e}=this.props,t=e._maximumRelativeScore,s=e._score;let n=0,r=!1;return n=s>=t?100:Math.round(s/t*100),s>=e._passMark&&(r=!0),{_assessmentScore:n,_isPassed:r}},getOptionsPerRow(){const{component:e,screenSize:t}=this.props,s=f(t);return i(e,["_itemsPerRow",s],1)||1},closeBranchingFullscreen(e){e?.preventDefault?.(),e?.currentTarget?.blur?.();const{component:t,closeFullScreen:s,branchingCloseFullScreen:n}=this.props;s(),n(t._id)},onLinkSelected(){const{props:e}=this;e.component._shouldDisplayFullscreen&&e.isFullScreen&&this.closeBranchingFullscreen()},onRestartSelected(e){e?.preventDefault?.();const{component:t,resetQuestion:s,branchingSoftReset:n,updateVariable:r}=this.props;if(t._hasReachedEndItem&&t._canSaveToVariable&&("increment"===t._variableUpdateType||"decrement"===t._variableUpdateType)&&r(t._variableId,t._score,"decrement"===t._variableUpdateType?"increment":"decrement"),t._isSoftReset&&!t._isAssessmentEnabled?n(t._id):s(t._id),t._isStoryMode&&!t._shouldDisplayFullscreen){const e=S.findDOMNode(this);e.scrollIntoView?.()}},onShowFullStorySelected(e){e?.preventDefault?.(),e?.currentTarget?.blur?.();const{component:t,branchingDisplayCompleteStory:s}=this.props;s(t._id)},onOptionSelected(e,t,s){const{component:n,onOptionSelected:r,setComponentAsStarted:o}=this.props;e&&(n._hasStarted||o(n._id),r(n._id,e,t,s))},onBranchingEndItemReached(e){const{component:t,onBranchingEndItem:s,setComponentAsComplete:n,updateVariable:r}=this.props;s(t._id,e),t._canSaveToVariable&&r(t._variableId,t._score,t._variableUpdateType),n(t._id,this.getAssessmentData())},onItemVideoMetricsChange(e,t){const{component:s,branchingItemVideoMetricsChanged:n}=this.props;n({componentId:s._id,itemId:e,metrics:t})},onVisibilityChange(...e){R(...e,this,this.props.setComponentAsViewed)},renderProgressBar(){const{component:e,isRTL:t,theme:s,screenSize:n}=this.props;if(!e._showProgessBar)return;let r=0;if("score"===e._progressBarType&&(r=e._score/e._progressBarMaxScore*100),"items"===e._progressBarType){const t=a(e._items,{_id:e._currentItemId});t?t._isInitialItem?r=0:0===t._options.length?r=100:c(t._progressMilestonePercentage)&&(r=t._progressMilestonePercentage):r=e._isComplete?100:0}return g.createElement(B,{progressBarType:e._progressBarType,currentProgressPercentage:u(r,0,100),score:e._score,progressBarMaxScore:e._progressBarMaxScore,progressBarLabelText:e.progressBarLabelText,progressBarBackgroundColor:e._progressBarBackgroundColor,progressBarHighlightColor:e._progressBarHighlightColor,progressBarTextColor:e._progressBarTextColor,isRTL:t,swatches:s._swatches,screenSize:n})},renderStoryItems(){const{component:e,theme:t}=this.props;if(e._isStoryMode||e._displayCompletedStory){let s=l(e._previousItems,(t=>{let s=a(e._items,{_id:t._id});s=p({},s);const n=a(s._options,{_id:t._selectedOptionId});return n&&(n._isSelected=!0),s}));return e._maxStoryItemsDisplayed>0&&!e._displayCompletedStory&&(s=m(s,e._maxStoryItemsDisplayed)),g.createElement(O,{componentId:e._id,items:s,timeOutText:e.timeOutText,isColumnLayout:e._isColumnLayout,optionsPerRow:this.getOptionsPerRow(),optionSelectedBackgroundColor:e._optionSelectedBackgroundColor,optionSelectedTextColor:e._optionSelectedTextColor,flowPointerIconColor:e._flowPointerIconColor,onItemVideoMetricsChange:this.onItemVideoMetricsChange,swatches:t._swatches,hideItemOptionRadioIcon:e._hideItemOptionRadioIcon})}},renderCurrentItem(){const{component:e,theme:t,isFullScreen:s,setAriaLive:n}=this.props,o=a(e._items,{_id:e._currentItemId}),i=e._restartedCount,c=e._isStoryMode;if(o)return g.createElement(N,(0,r.default)({key:`${o._id}-${i}`,componentId:e._id,onOptionSelected:this.onOptionSelected,timeOutText:e.timeOutText,timeOutRestartButtonText:e.timeOutRestartButtonText,timeRemainingText:e.timeRemainingText,secondsText:e.secondsText,onRestartSelected:this.onRestartSelected,onBranchingEndItemReached:this.onBranchingEndItemReached,isColumnLayout:e._isColumnLayout,optionsPerRow:this.getOptionsPerRow(),isStoryMode:c,isCurrentItem:!0,canAutoFocus:e._canAutoFocus,isInitialItem:o._isInitialItem,navHeight:parseInt(t._navigation._variables["@navigation-top-height"],10),animations:e._animations,swatches:t._swatches,isFullScreen:s,isComponentComplete:e._isComplete,onItemVideoMetricsChange:this.onItemVideoMetricsChange,hideItemOptionRadioIcon:e._hideItemOptionRadioIcon,setAriaLive:n},o))},renderScore(){const{component:e}=this.props;if(!e._displayScoring)return;const{_isAssessmentEnabled:t,_shouldDisplayRelativeScore:s,_maximumRelativeScore:n,_shouldLimitScoreToRelativeScore:r}=e;return g.createElement(A,{score:e._score,scoreText:e.scoreText,shouldDisplayRelativeScore:t&&s,maxRelativeScore:n,shouldLimitScoreToRelativeScore:r})},renderRestartButton(){const{component:e,assessmentAttemptsTaken:t}=this.props,s=a(e._items,{_id:e._currentItemId});let n=!1;if(e._isAssessmentEnabled?e._isComplete&&e._allowAssessmentRetake&&!e._isPassed&&(e._allowUnlimitedRetakeAttempts||t<e._assessmentRetakeAttempts)&&(n=!0):(e._alwaysAllowRestart&&!s._isInitialItem||e._isComplete&&e._hasReachedEndItem&&e._allowsRestartOnEnd)&&(n=!0),n)return g.createElement("button",{ref:e=>this._restart=e,className:"ev-button ev-restart-button",onClick:this.onRestartSelected},g.createElement("i",{className:"ev-icon ev-icon-arrow-left"}),g.createElement("span",null,e.restartButtonText))},renderAssessmentAttemptsRemaining(){const{component:e,assessmentAttemptsTaken:t,buttons:s}=this.props,{remainingAttemptsText:n,remainingAttemptText:r}=s;if(e._isAssessmentEnabled&&e._isComplete&&!e._isPassed&&e._allowAssessmentRetake&&!e._allowUnlimitedRetakeAttempts){const s=e._assessmentRetakeAttempts-t,o=s>1?n:r;if(s)return g.createElement("div",{className:"ev-branching-assessment-retakes-remaining ev-label"},s," ",o)}},renderShowFullStoryButton(){const{component:e}=this.props;if(e._isComplete&&e._hasReachedEndItem&&e._displayFullStoryOnEnd&&!e._displayCompletedStory)return g.createElement("button",{className:"ev-button ev-has-icon ev-show-full-story-button",onClick:this.onShowFullStorySelected},g.createElement("i",{className:"ev-icon ev-icon-arrow-down"}),g.createElement("span",null,e.displayFullStoryButtonText))},renderPageLinkButton(){const{component:e}=this.props;if(e._isComplete&&e._hasReachedEndItem&&e._hasLink){const t=a(e._items,{_id:e._currentItemId}),s=t._linkType,n=t._linkUrl,r=t._linkedPageId,o=t.linkButtonText;if("page"===s){if(!r)return;const e=C(r);if(!e)return;return g.createElement(y,{to:`/${e._type}/${e._id}`,onClick:this.onLinkSelected,className:"ev-button ev-link-button"},o)}return g.createElement("a",{href:n,target:"_blank",className:"ev-button ev-link-button",rel:"noreferrer"},o)}},renderMarkingIcon(){const{component:e}=this.props;if(e._isComplete&&e._shouldDisplayMarkingIcon){const t=E("ev-buttons-marking-icon ev-icon",{"ev-icon-check":e._isCorrect,"ev-icon-cross":!e._isCorrect});return g.createElement("div",{className:t})}},renderCloseFullscreenButton(){const{props:e}=this;if(e.component._shouldDisplayFullscreen&&e.isFullScreen)return g.createElement("button",{className:"ev-button ev-has-icon",onClick:this.closeBranchingFullscreen},g.createElement("i",{className:"ev-icon ev-icon-cross"}),g.createElement("span",null,e.component.exitFullScreenButtonText||"Exit"))},renderAssessmentResults(){const{component:e}=this.props;if(e._isAssessmentEnabled&&e._isComplete){const{_assessmentScore:t,_isPassed:s,_shouldDisplayAssessmentScore:n}=e,r=!!d(n)||n,o=s?e.passedFeedbackText:e.failedFeedbackText;return g.createElement(x,{score:t,isPassed:s,feedback:o,displayScore:r,assessmentScoreText:e.assessmentScoreText})}},render(){const{props:e}=this;return g.createElement(I,{component:e.component,styles:e.styles,isVisibilitySensorActive:T(e),onVisibilityChange:this.onVisibilityChange,shouldHideQuestionButtons:!0},g.createElement("div",{className:v(e.component)},this.renderProgressBar(),this.renderStoryItems(),this.renderCurrentItem(),this.renderScore(),this.renderMarkingIcon(),this.renderAssessmentResults(),this.renderAssessmentAttemptsRemaining(),g.createElement("div",{className:"ev-branching-buttons"},this.renderCloseFullscreenButton(),this.renderRestartButton(),this.renderShowFullStoryButton(),this.renderPageLinkButton())))}});e.exports=M},96570:(e,t,s)=>{"use strict";const n=s(52898),r=s(23615),o=s(27378),i=s(90005),{Motion:a,spring:c}=s(59439),l=s(50998),p=n({displayName:"BranchingAssessmentResults",propTypes:{score:r.number.isRequired,isPassed:r.bool.isRequired,feedback:r.string,assessmentScoreText:r.string,displayScore:r.bool.isRequired},renderScore(){if(!this.props.displayScore)return;const{score:e,isPassed:t,assessmentScoreText:s}=this.props;return o.createElement("div",{className:"ev-branching-assessment-score"},o.createElement("div",{className:"ev-info-detail"},o.createElement("div",{className:i("ev-icon ev-info-detail-display",{"ev-icon-cross":!t,"ev-icon-check":t})}),o.createElement("div",{className:"ev-info-detail-label"},s,": ",o.createElement("strong",null,e,"%"))))},getDefaultMotionStyle:()=>({opacity:0}),getMotionStyle:()=>({opacity:c(1)}),render(){return o.createElement(a,{defaultStyle:this.getDefaultMotionStyle(),style:this.getMotionStyle()},(e=>o.createElement("div",{className:"ev-branching-assessment-results"},o.createElement("div",{className:"ev-branching-assessment-results-content"},this.renderScore(),o.createElement(l,{className:"ev-branching-assessment-results-feedback",body:this.props.feedback})))))}});e.exports=p},60916:(e,t,s)=>{"use strict";const n=s(52898),r=s(23615),o=s(27378),i=s(2565),a=s(77466),c=n({displayName:"BranchingController",propTypes:{component:r.object.isRequired,setComponentAsReady:r.func.isRequired,setComponentAsViewed:r.func.isRequired,setComponentAsStarted:r.func.isRequired,setComponentAsComplete:r.func.isRequired,onOptionSelected:r.func.isRequired,onBranchingEndItem:r.func.isRequired,branchingDisplayCompleteStory:r.func.isRequired,branchingCloseFullScreen:r.func.isRequired,isFullScreen:r.bool},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},render(){const{props:e}=this;return e.component._shouldDisplayFullscreen&&!e.isFullScreen?o.createElement(a,e):o.createElement(i,e)}});e.exports=c},78831:(e,t,s)=>{"use strict";const n=s(48159),r=s(52898),o=s(27378),{connect:i}=s(13844),{getComponent:a}=s(60633),c=r({displayName:"BranchingFullscreen",componentDidMount(){this.props.resetScroll()},render(){const e=a("branching");return o.createElement("div",{className:"ev-branching-fullscreen"},o.createElement("div",{className:"ev-page"},o.createElement("div",{className:"ev-page-inner"},o.createElement("div",{className:`ev-article ev-${this.props.articleStyle}`},o.createElement("div",{className:"ev-article-inner"},o.createElement("div",{className:"ev-block"},o.createElement("div",{className:"ev-block-inner"},o.createElement("div",{className:"ev-component-container"},o.createElement(e,{component:this.props.component,closeFullScreen:this.props.closeFullScreen,isFullScreen:!0,resetScroll:this.props.resetScroll})))))))))}});e.exports=i(((e,t)=>{const s=n(e.components[t.componentId],["displayTitle","body","instruction"]);return s._isInteractionLabelEnabled=!1,{component:s}}))(c)},1550:(e,t,s)=>{"use strict";var n=s(7914)(s(2398));const r=s(64925),o=s(52898),i=s(27378),a=s(90005),c=s(24748),l=s(42382),p=s(26614),m=s(54794),d=s(51757),u=s(9232),h=s(49530),_=s(82803),g=o({displayName:"BranchingItem",getInitialState(){return{_timeElapsed:0,_isTimeOut:!1,_canShowOptions:this.getCanShowOptions()}},getClassName(e,t){return a("ev-branching-item","ev-clearfix",`ev-branching-item-layout-${this.props._itemLayout}`,{"ev-is-story-item":this.props.isStoryItem,"ev-is-column-layout":t,"ev-has-timer":this.props._hasTimer,"ev-has-body":this.props.body,"ev-has-instruction":this.props.instruction,"ev-has-media":e})},getHasMedia(){switch(this.props._mediaType){case"image":return p(this.props._graphic);case"gif":return this.props._gif?.src;case"video":return this.props._video?.mp4;case"audio":return this.props._audio?.mp3;case"videoStream":return this.props._videoStream?._options?._source;default:return!1}},getCanShowOptions(){const{_hideOptionsUntilMediaEnd:e,isStoryItem:t,_canAutoPlay:s,_mediaType:n}=this.props;return!(e&&!t)||("video"!==n&&"audio"!==n||(!this.getHasMedia()||!s||(!e||!s)&&void 0))},getIsColumnLayout(){const{isColumnLayout:e,_options:t}=this.props;return!!e&&(!!(e&&t.length>0)||void 0)},shouldComponentUpdate(){return!this.props.isStoryItem},componentDidMount(){this.startTimer(),this.checkIfEndItem(),this.setAriaLive()},componentWillUnmount(){this._timer&&clearInterval(this._timer)},onMediaEnded(){this.state._canShowOptions||this.setState({_canShowOptions:!0},function(){this.startTimer(),this.checkIfEndItem()}.bind(this))},startTimer(){const{_hasTimer:e,isStoryItem:t}=this.props,{_canShowOptions:s}=this.state;e&&!t&&s&&(this._timer=setInterval(this.updateTimeElapsed,1e3))},checkIfEndItem(){const{isStoryItem:e,_isInitialItem:t,_options:s}=this.props,{_canShowOptions:n}=this.state;t||e||0!==s.length||!n||this.props.onBranchingEndItemReached(this.props._id)},setAriaLive(){const{isInitialItem:e,isStoryItem:t,body:s,_options:n,setAriaLive:r}=this.props;e||t||!s||0!==n.length||r({message:s})},updateTimeElapsed(){const e=this.props._timerDuration,t=this.state._timeElapsed+1;if(t===e){clearInterval(this._timer),this._timer=null;const e=r(this.props._options,{_automaticallySelectOnTimerEnd:!0});return e&&e._itemId?this.props.onOptionSelected(e._itemId,e._id,e._score):this.setState({_isTimeOut:!0,_timeElapsed:t})}this.setState({_timeElapsed:t})},getAnimations(){const{isStoryItem:e,isInitialItem:t,animations:s}=this.props;if(!e&&!t)return s||{_fadeIn:{_isEnabled:!0,_from:0},easing:"slow"}},renderTimer(){const{_isTimeOut:e,_canShowOptions:t}=this.state,{_hasTimer:s,isStoryItem:n}=this.props;if(s&&!e&&!n&&t)return i.createElement(_,{timerDuration:this.props._timerDuration,timeElapsed:this.state._timeElapsed,timeRemainingText:this.props.timeRemainingText,secondsText:this.props.secondsText})},renderOptions(){if(this.state._canShowOptions)return i.createElement(h,{options:this.props._options,onOptionSelected:this.props.onOptionSelected,onRestartSelected:this.props.onRestartSelected,hasTimer:this.props._hasTimer,isTimeOut:this.state._isTimeOut,timeOutText:this.props.timeOutText,timeOutRestartButtonText:this.props.timeOutRestartButtonText,isStoryItem:this.props.isStoryItem,isStoryMode:this.props.isStoryMode,optionSelectedBackgroundColor:this.props.optionSelectedBackgroundColor,optionSelectedTextColor:this.props.optionSelectedTextColor,optionsAriaLabel:this.props.optionsAriaLabel,swatches:this.props.swatches,optionsPerRow:this.props.optionsPerRow,hideItemOptionRadioIcon:this.props.hideItemOptionRadioIcon})},renderContent(e){const{_isTimeOut:t}=this.state,{_hasTimer:s,isStoryItem:r}=this.props;return s&&t&&!r?i.createElement(u,{timeOutText:this.props.timeOutText}):i.createElement(d,(0,n.default)({},this.props,{hasMedia:e,onMediaEnded:this.onMediaEnded,canAutoFocus:this.props.canAutoFocus}))},renderInstruction(){const{_isTimeOut:e,_canShowOptions:t}=this.state,{_hasTimer:s,isStoryItem:n,instruction:r}=this.props;if((!s||!e||n)&&r&&t)return i.createElement(m,{className:"ev-branching-item-instruction",html:r})},renderItemInner(e,t){return t?i.createElement("div",{className:"ev-branching-item-inner ev-clearfix"},i.createElement("div",{className:"ev-branching-item-inner-left"},this.renderContent(e)),i.createElement("div",{className:"ev-branching-item-inner-right"},this.renderInstruction(),this.renderTimer(),this.renderOptions())):i.createElement("div",{className:"ev-branching-item-inner ev-clearfix"},this.renderContent(e),this.renderInstruction(),this.renderTimer(),this.renderOptions())},renderStoryFlowPointer(){if(!this.props.isStoryItem)return;const{flowPointerIconColor:e,swatches:t}=this.props,s={};return e&&"transparent"!==e&&(s.color=l(e,t)),i.createElement(c,{className:"ev-branching-item-story-flow-pointer ev-icon ev-icon-arrow-down",tag:"i",startAnimation:!0,style:s,animations:{_fadeIn:{_isEnabled:!0,_from:0},_slideInY:{_isEnabled:!0,_isReverseDirection:!0,_from:100},easing:"slow"},ariaHidden:!1})},render(){const e=this.getHasMedia(),t=this.getIsColumnLayout();return i.createElement(c,{className:this.getClassName(e,t),startAnimation:!0,animations:this.getAnimations(),ariaHidden:!1},this.renderItemInner(e,t),this.renderStoryFlowPointer())}});e.exports=g},51757:(e,t,s)=>{"use strict";const n=s(52898),r=s(27378),o=s(50998),i=s(48510),a=n({displayName:"BranchingItemContent",componentDidMount(){this.props.canAutoFocus&&this._content.focus()},renderBody(){if(this.props.body)return r.createElement(o,{className:"ev-branching-item-body",body:this.props.body})},renderMedia(){if(this.props.hasMedia)return r.createElement(i,this.props)},render(){const e=["top","left"].includes(this.props._itemLayout);return r.createElement("div",{ref:e=>this._content=e,className:"ev-branching-item-content ev-clearfix ev-focusable",tabIndex:"-1"},e?this.renderMedia():this.renderBody(),e?this.renderBody():this.renderMedia())}});e.exports=a},48510:(e,t,s)=>{"use strict";const n=s(52898),r=s(27378),o=s(26614),i=s(13756),a=s(35550),c=s(5859),l=s(54659),p=s(37217),m=s(22972),d=n({displayName:"BranchingItemMedia",onItemVideoMetricsChange(e){const{_id:t,onItemVideoMetricsChange:s}=this.props;s(t,e)},renderImage(){if(o(this.props._graphic))return r.createElement("div",{className:"ev-branching-item-media"},r.createElement(c,{graphicSrc:this.props._graphic.src,graphicSrcAdvanced:this.props._graphic.srcAdvanced,altText:this.props._graphic.alt,autoSize:!0}))},renderGif(){return this.props._gif?.src?r.createElement("div",{className:"ev-branching-item-media"},r.createElement(c,{graphicSrc:this.props._gif.src,altText:this.props._gif.alt})):null},renderVideo(){if(!this.props._video?.mp4)return null;const{_video:e,_canAutoPlay:t,onMediaEnded:s,isStoryItem:n,_metrics:o}=this.props;return r.createElement("div",{className:"ev-branching-item-media"},r.createElement(l,{src:i(e.mp4),posterSrc:a(e.poster),subtitlesSrc:i(e._subtitles?.src),subtitlesLabel:e._subtitles?.label,transcriptType:"popup",transcriptText:e._transcript?.body,transcriptButtonText:e._transcript?.button,playsFromStart:!0,autoPlay:t&&!n,onEnded:s,metrics:o,onMetricsChange:this.onItemVideoMetricsChange}))},renderAudio(){return this.props._audio?.mp3?r.createElement("div",{className:"ev-branching-item-media"},r.createElement(p,{src:i(this.props._audio.mp3),poster:this.props._audio.poster,transcriptText:this.props._audio._transcript?.body,transcriptButtonText:this.props._audio._transcript?.button,autoPlay:this.props._canAutoPlay&&!this.props.isStoryItem,onEnded:this.props.onMediaEnded,controls:!0})):null},renderVideoStream(){return this.props._videoStream?._options?._source?r.createElement("div",{className:"ev-branching-item-media"},r.createElement(m,{id:`${this.props.componentId}-${this.props._id}`,service:this.props._videoStream._service,options:this.props._videoStream._options,transcriptText:this.props._videoStream._transcript?.body,transcriptType:"popup",transcriptButtonText:this.props._videoStream._transcript?.button})):null},render(){switch(this.props._mediaType){case"image":return this.renderImage();case"gif":return this.renderGif();case"video":return this.renderVideo();case"audio":return this.renderAudio();case"videoStream":return this.renderVideoStream();default:return null}}});e.exports=d},3198:(e,t,s)=>{"use strict";const n=s(52898),r=s(27378),o=s(42382),i=n({displayName:"BranchingItemOption",onButtonClick(e){e.preventDefault(),this.props.onOptionSelected(this.props._itemId,this.props._id,this.props._score)},getStyle(){const{isStoryOption:e,isRetryOption:t,_backgroundColor:s,_textColor:n,optionSelectedBackgroundColor:r,optionSelectedTextColor:i,swatches:a}=this.props,c={};return e||t||(s&&"transparent"!==s&&(c.backgroundColor=o(s,a)),n&&"transparent"!==n&&(c.color=o(n,a))),e&&(r&&"transparent"!==r&&(c.backgroundColor=o(r,a)),i&&"transparent"!==i&&(c.color=o(i,a))),c},render(){const e=this.getStyle();if(this.props.isStoryOption)return r.createElement("div",{className:"ev-branching-item-option ev-is-selected",style:e,"aria-selected":"true"},!this.props.hideItemOptionRadioIcon&&r.createElement("i",{className:"ev-branching-item-option-icon ev-icon ev-icon-radio-button",style:{color:e.color}}),r.createElement("span",{className:"ev-branching-item-option-text"},this.props.optionText));let t="ev-branching-item-option-icon ev-icon";return this.props.isRetryOption&&this.props.isStoryMode?t+=" ev-icon-arrow-up":this.props.isRetryOption?t+=" ev-icon-arrow-left":t+=" ev-icon-circle",r.createElement("button",{ref:e=>this._button=e,className:"ev-branching-item-option",onClick:this.onButtonClick,style:e},!this.props.hideItemOptionRadioIcon&&r.createElement("i",{className:t,style:{color:e.color}}),r.createElement("span",{className:"ev-branching-item-option-text"},this.props.optionText))}});e.exports=i},49530:(e,t,s)=>{"use strict";var n=s(7914)(s(2398));const r=s(64925),o=s(29115),i=s(69238),a=s(55807),c=s(52898),l=s(27378),p=s(9184),m=s(3198),d=c({displayName:"BranchingItemOptions",renderOptions(){const{options:e,hasTimer:t,isTimeOut:s,isStoryItem:c}=this.props;if(!e||0===e.length)return;if(c){let e=r(this.props.options,{_isSelected:!0});return e&&e._automaticallySelectOnTimerEnd&&e._shouldHideOption&&(e=o({},e,{optionText:this.props.timeOutText})),l.createElement(m,(0,n.default)({key:"storyOption",isStoryOption:!0,optionSelectedBackgroundColor:this.props.optionSelectedBackgroundColor,optionSelectedTextColor:this.props.optionSelectedTextColor,swatches:this.props.swatches,hideItemOptionRadioIcon:this.props.hideItemOptionRadioIcon},e))}if(t&&s)return l.createElement(m,{key:"restartOption",onOptionSelected:this.props.onRestartSelected,optionText:this.props.timeOutRestartButtonText,isRetryOption:!0,isStoryMode:this.props.isStoryMode,swatches:this.props.swatches,hideItemOptionRadioIcon:!1});let d=i(e,(e=>!e._shouldHideOption));d=a(d,(e=>l.createElement(m,(0,n.default)({key:e._id,onOptionSelected:this.props.onOptionSelected,isStoryMode:this.props.isStoryMode,swatches:this.props.swatches,hideItemOptionRadioIcon:this.props.hideItemOptionRadioIcon},e))));let{optionsPerRow:u}=this.props;return u>d.length&&(u=d.length),l.createElement(p,{columns:u,shouldIgnoreScreenSize:!0,className:`ev-column-layout-${u}`},d)},render(){const{props:e}=this;return l.createElement("div",{className:"ev-branching-item-options",role:"group","aria-label":e.optionsAriaLabel},this.renderOptions())}});e.exports=d},9232:(e,t,s)=>{"use strict";const n=s(52898),r=s(27378),o=n({displayName:"BranchingItemTimeOut",render(){return r.createElement("div",{className:"ev-branching-item-content ev-branching-item-time-out"},r.createElement("div",{className:"ev-branching-item-timeout-text"},this.props.timeOutText))}});e.exports=o},82803:(e,t,s)=>{"use strict";const n=s(52898),r=s(27378),o=n({displayName:"BranchingItemTimer",render(){const{timeRemainingText:e,timerDuration:t,timeElapsed:s,secondsText:n}=this.props;return r.createElement("div",{className:"ev-branching-item-timer ev-label"},`${e}: ${t-s} ${n}`)}});e.exports=o},58902:(e,t,s)=>{"use strict";const n=s(52898),r=s(27378),o=s(90005),i=s(42382),a=n({displayName:"BranchingProgressBar",renderLabel(){if(this.props.progressBarLabelText)return r.createElement("div",{className:"ev-branching-progress-bar-label ev-label"},r.createElement("div",{className:"ev-branching-score-text"},this.props.progressBarLabelText))},getBarStyle(){const{progressBarBackgroundColor:e,swatches:t}=this.props,s={};return e&&"transparent"!==e&&(s.backgroundColor=i(e,t)),s},getHighlightStyle(e){const{progressBarHighlightColor:t,swatches:s}=this.props,n={width:`${e}%`};return t&&"transparent"!==t&&(n.backgroundColor=i(t,s)),n},getCounterStyle(e){const{progressBarHighlightColor:t,progressBarTextColor:s,isRTL:n,swatches:r,screenSize:o}=this.props,a={};return"small"!==o&&(a[n?"right":"left"]=`${e}%`),t&&"transparent"!==t&&(a.backgroundColor=i(t,r)),s&&"transparent"!==s&&(a.color=i(s,r)),a},renderCounter(e){const{score:t,progressBarType:s,progressBarLabelText:n,screenSize:i}=this.props,a="items"===s?`${e}%`:t;return r.createElement("div",{className:o("ev-branching-progress-bar-counter ev-label",{"ev-branching-progress-bar-counter-near-end":"small"!==i&&e>25}),style:this.getCounterStyle(e),role:"progressbar","aria-valuetext":`${n} ${a}`},r.createElement("span",{className:"ev-branching-progress-bar-counter-text"},a),r.createElement("span",{className:"ev-branching-progress-bar-counter-text-hidden","aria-hidden":!0},"100%"))},render(){const{currentProgressPercentage:e,screenSize:t}=this.props;return r.createElement("div",{className:o("ev-branching-progress-bar-container",{"ev-branching-progress-bar-container-mobile-layout":"small"===t})},this.renderLabel(),r.createElement("div",{className:"ev-branching-progress-bar-container-inner"},r.createElement("div",{className:"ev-branching-progress-bar",style:this.getBarStyle()},r.createElement("div",{className:"ev-branching-progress-bar-highlight",style:this.getHighlightStyle(e)}),"small"!==t&&this.renderCounter(e)),"small"===t&&this.renderCounter(e)))}});e.exports=a},12159:(e,t,s)=>{"use strict";const n=s(52898),r=s(27378),o=n({displayName:"BranchingScore",getScoreText(){let{score:e,scoreText:t}=this.props;const{shouldLimitScoreToRelativeScore:s,maxRelativeScore:n,shouldDisplayRelativeScore:r}=this.props;return s&&e>n&&(e=n),t=`${t}: ${e}`,r&&(t=`${t}/${n}`),t},render(){return r.createElement("div",{className:"ev-branching-score-container"},r.createElement("div",{className:"ev-branching-score-label ev-label"},r.createElement("div",{className:"ev-branching-score-text"},this.getScoreText())))}});e.exports=o},77466:(e,t,s)=>{"use strict";const n=s(52898),r=s(23615),o=s(27378),i=s(90005),{Component:a}=s(30189),c=s(5859),l=s(26614),p=s(37238),m=s(78831),d=n({displayName:"BranchingStart",propTypes:{component:r.object.isRequired,openFullScreen:r.func.isRequired,articleStyle:r.string.isRequired,styles:r.object},openBranchingFullscreen(e){e?.preventDefault?.(),e?.currentTarget?.blur?.();const{props:t}=this,s=t.component._id;t.openFullScreen({component:m,props:{componentId:s,articleStyle:t.articleStyle}})},renderWidget(){const{component:e}=this.props;let t;return l(e._posterGraphic)&&(t=o.createElement(c,{className:"ev-branching-poster-image",graphicSrc:e._posterGraphic.src,graphicSrcAdvanced:e._posterGraphic.srcAdvanced,altText:e._posterGraphic.alt,autoSize:!0})),o.createElement("div",{className:p(e)},o.createElement("div",{className:i("ev-branching-poster",{"ev-has-image":t})},t,o.createElement("button",{id:`ev-branching-component-open-fullscreen-${e._id}`,className:"ev-button ev-has-icon ev-branching-poster-button ev-button-icon-position-left",onClick:this.openBranchingFullscreen},o.createElement("i",{className:"ev-icon ev-icon-play-circle"}),o.createElement("span",null,e.startFullScreenButtonText||"Start"))))},render(){return o.createElement(a,{component:this.props.component,styles:this.props.styles,shouldHideQuestionButtons:!0},this.renderWidget())}});e.exports=d},99123:(e,t,s)=>{"use strict";var n=s(7914)(s(2398));const r=s(55807),o=s(27378),i=s(1550);e.exports=e=>o.createElement("div",{className:"ev-branching-story-items"},r(e.items,(t=>o.createElement(i,(0,n.default)({key:`${e.componentId}-${t._id}`,componentId:e.componentId,isStoryItem:!0,isStoryMode:!0,isColumnLayout:e.isColumnLayout,timeOutText:e.timeOutText,optionSelectedBackgroundColor:e.optionSelectedBackgroundColor,optionSelectedTextColor:e.optionSelectedTextColor,flowPointerIconColor:e.flowPointerIconColor,swatches:e.swatches,onItemVideoMetricsChange:e.onItemVideoMetricsChange,hideItemOptionRadioIcon:e.hideItemOptionRadioIcon},t)))))},92809:(e,t,s)=>{"use strict";const{componentTrackableChange:n}=s(59345),{BRANCHING_OPTION_SELECTED:r,BRANCHING_RESTART:o,BRANCHING_END_ITEM:i}=s(85874);t.branchingTrackableChangeEpic=e=>e.ofType(r,o,i).map((e=>n(e.payload.componentId)))},44248:(e,t,s)=>{"use strict";const n=s(84900);e.exports=(e,t)=>{const{theme:s,course:r,componentAssessment:o,navigation:i}=e,a={theme:s,buttons:r._buttons,articleStyle:n(e,t,"article")._classes,navigation:i};return t._isAssessmentEnabled&&o&&o._assessmentComponentId===t._id&&(a.assessmentAttemptsTaken=o._assessmentAttemptsTaken),a}},1160:(e,t,s)=>{"use strict";const n=s(64925),r=s(69238),o=s(95099),i=s(31159),a=s(55807),c=s(19193),l=s(29115),p=s(51371),{SETUP_COMPONENT:m,RESET_QUESTION:d}=s(59345),{BRANCHING_OPTION_SELECTED:u,BRANCHING_END_ITEM:h,BRANCHING_DISPLAY_COMPLETE_STORY:_,BRANCHING_CLOSE_FULLSCREEN:g,BRANCHING_ITEM_VIDEO_METRICS:S,BRANCHING_SOFT_RESET:E}=s(85874);function y(e){return n(e._items,(function(e){return e._isInitialItem}))||{}}function I(e,t){return n(e._items,(function(e){return e._id===t}))}function v(e,t,s){if(0===t._options.length)return null;const a=r(t._options,(function(e){return s>=e._scoreRequired}));if(0===a.length)return null;const c=o(a,"_scoreRequired"),l=i(c)._itemId;if(!l)return;const p=n(e._items,(function(e){return e._id===l}));return p._isScoreItem?v(e,p,s):p}function b(e,{itemId:t,optionId:s,optionScore:n}){const r=y(e),o=I(e,e._currentItemId);let i=I(e,t),a=e._score;const c=e._shouldResetScoreOnStart;if(!i)return e;c&&r._id===i._id?a=0:a+=n,i._isScoreItem&&(i=v(e,i,a));const p={_id:o._id,_selectedOptionId:s};return l({},e,{_currentItemId:i._id,_previousItems:[...e._previousItems,p],_score:a,_canAutoFocus:!0})}function C(e,t){const s=a(e._items,(e=>l({},e,{_options:a(e._options,(e=>l({},e,{_isSelected:!1})))})));return l({},e,{_currentItemId:y(e)._id,_restartedCount:e._restartedCount+1,_previousItems:[],_isComplete:!!t&&e._isComplete,_hasReachedEndItem:!1,_score:0,_hasLink:!1,_displayCompletedStory:!1,_items:s})}e.exports=(e,t)=>{switch(t.type){case m:return function(e){const t=e._currentItemId,s=e._previousItems,n=e._score;let r=!1;const o=I(e,t);o&&"none"!==o._linkType&&(o._linkedPageId||o._linkUrl)&&0===o._options.length&&(r=!0);const i=a(e._items,(t=>{if(e._shouldRandomiseOptions||t._shouldRandomiseOptions&&!t._isScoreItem){const e=c(t._options);return l({},t,{_options:e})}return t}));return e._canResumeOnRevisit||e._isComplete?l({},e,{_currentItemId:t||(e._isComplete&&e._isAssessmentEnabled?null:y(e)._id),_previousItems:s||[],_items:e._isComplete?e._items:i,_restartedCount:0,_score:void 0!==n?n:0,_hasLink:r,_hasReachedEndItem:e._hasReachedEndItem,_canAutoFocus:!1}):l({},e,{_currentItemId:y(e)._id,_items:i,_previousItems:[],_restartedCount:0,_isComplete:!1,_isCorrect:!1,_hasReachedEndItem:!1,_score:0,_hasLink:!1,_displayCompletedStory:!1,_canAutoFocus:!1,_isPassed:!1,_assessmentScore:0})}(e);case d:return C(e);case E:return C(e,!0);case u:return b(e,t.payload);case h:return function(e,{itemId:t}){const s=e._shouldAlwaysMarkAsCorrect,n=I(e,t);let r=!1;(s||n._isCorrectItem)&&(r=!0);const o={_isCorrect:r,_hasReachedEndItem:!0};return r&&(o._correctAt=p()),"none"!==n._linkType&&(n._linkedPageId||n._linkUrl)&&(o._hasLink=!0),l({},e,o)}(e,t.payload);case _:return function(e){return e._isComplete&&e._hasReachedEndItem?l({},e,{_displayCompletedStory:!0}):e}(e);case g:return function(e){return l({},e,{_displayCompletedStory:!1})}(e);case S:return function(e,{itemId:t,metrics:s}){const n=a(e._items,(e=>e._id===t?l({},e,{_metrics:s}):e));return l({},e,{_items:n})}(e,t.payload);default:return e}}},1052:e=>{"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!1},_options:{fieldKey:"_options",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!1},_isSelected:{fieldKey:"_isSelected",type:"Boolean",shouldRestore:!0}}},_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}},_currentItemId:{fieldKey:"_currentItemId",type:"String",shouldRestore:!0},_previousItems:{fieldKey:"_previousItems",type:"Array",shouldRestore:!0},_score:{fieldKey:"_score",type:"Number",shouldRestore:!0},_restartedCount:{fieldKey:"_restartedCount",type:"Number",shouldRestore:!0},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0},_isPassed:{fieldKey:"_isPassed",type:"Boolean",shouldRestore:!0},_hasReachedEndItem:{fieldKey:"_hasReachedEndItem",type:"Boolean",shouldRestore:!0},_assessmentScore:{fieldKey:"_assessmentScore",type:"Number",shouldRestore:!0}}},9184:(e,t,s)=>{"use strict";const n=s(8921),r=s(29115),o=s(52898),i=s(27378),a=s(90005),{bool:c,func:l,object:p,number:m,string:d}=s(23615),{connect:u}=s(13844),{Trail:h,config:_,animated:g,interpolate:S}=s(24450),E=s(99744),y=s(24297),I=o({displayName:"Grid",propTypes:{isList:c.isRequired,isRTL:c.isRequired,shouldIgnoreScreenSize:c.isRequired,animations:p,gridItemStyle:p,gridItemInnerStyle:p,windowWidth:m.isRequired,getGridItemInnerStyle:l,hasGridItemInnerPadding:c,className:d,columns:m,separatorBorder:d},getDefaultProps:()=>({isList:!1,isRTL:!1,shouldIgnoreScreenSize:!1,gridItemStyle:{},gridItemInnerStyle:{},hasGridItemInnerPadding:!0,animations:{_slideInX:{_isEnabled:!1},_slideInY:{_isEnabled:!1},_fadeInItem:{_isEnabled:!1},_scaleInItem:{_isEnabled:!1},_easing:"default"}}),getInitialState(){return{columns:this.getColumns(window.innerWidth,this.props.columns),isVisible:!1}},componentDidMount(){this._isMounted=!0},componentWillUnmount(){this._isMounted=!1},UNSAFE_componentWillReceiveProps(e){const{props:t}=this,s=e.windowWidth!==t.windowWidth,n=t.columns!==e.columns;(s||n)&&this.updateColumns(e.windowWidth,e.columns)},getColumns(e,t){return this.props.shouldIgnoreScreenSize?t:e>=768?t||2:e<768&&e>=520?1===t?1:2:1},updateColumns(e,t){this._isMounted&&this.setState({columns:this.getColumns(e,t)})},getAnimationsEnabled(){const{animations:e}=this.props;return!!e&&0!==n(e).values().filter("_isEnabled").value().length},getGridItemStyle(e,t,s,n,o,i){const{isRTL:a}=this.props,c=100/this.state.columns,l=r({flex:`${c}%`,textAlign:"center",boxSizing:"border-box",margin:"10px 0"},this.props.gridItemStyle);t&&(l.opacity=s,l.transform=S([n,o,i],((e,t,s)=>`translate(${e}%,${t}%) scale(${s})`)));const p=this.props.children.length%this.state.columns;if((e+1)%this.state.columns!=0&&this.props.separatorBorder&&(l.borderRight=this.props.separatorBorder),0===p)return l;if(1===p)return e===this.props.children.length-1&&(l.margin="auto"),l;if(e===this.props.children.length-p){let e=c/2;2===p&&4===this.state.columns&&(e=c),l[a?"marginRight":"marginLeft"]=`${e}%`}return l},getGridItemInnerStyle(e){const{gridItemInnerStyle:t,getGridItemInnerStyle:s,hasGridItemInnerPadding:n}=this.props,o=s?s(e):{};return r({padding:n?"0 10px":0,boxSizing:"border-box"},t,o)},onVisibilityChange(e){e&&this.setState({isVisible:!0})},getSpringTo(){return this.state.isVisible?{opacity:1,x:0,y:0,scale:1}:y(this.props.animations)},renderTrailItem(e,t){const s=this.props.isList?g.li:g.div;return({opacity:n,x:r,y:o,scale:a})=>i.createElement(s,{key:e?.key??t,className:"ev-grid-item",style:this.getGridItemStyle(t,!0,n,r,o,a)},i.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e))},renderGridItems(e){const{isList:t,children:s,animations:n}=this.props,r=t?g.li:g.div;return e?i.createElement(h,{native:!0,key:s.length,keys:s.map(((e,t)=>e?.key??t)),items:s,config:_[n._easing]||_.default,from:y(n),to:this.getSpringTo()},this.renderTrailItem):s.map(((e,t)=>i.createElement(r,{key:e?.key??t,className:"ev-grid-item",style:this.getGridItemStyle(t,!1)},i.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e))))},render(){const e=this.props.isList?"ul":"div",t=this.getAnimationsEnabled(),s=a("ev-grid",this.props.className);return t?i.createElement(E,{active:!1===this.state.isVisible,partialVisibility:!0,scrollCheck:!0,scrollThrottle:10,intervalDelay:250,minTopValue:200,onChange:this.onVisibilityChange},i.createElement(e,{className:s},this.renderGridItems(!0))):i.createElement(e,{className:s},this.renderGridItems(!1))}});e.exports=u((({device:e,course:t})=>({windowWidth:e.windowWidth,isRTL:t._isRTL})))(I)},17775:(e,t)=>{"use strict";t.COMPONENT_ASSESSMENT_COMPLETED="COMPONENT_ASSESSMENT_COMPLETED",t.COMPONENT_ASSESSMENT_SCORM_RESTORE="COMPONENT_ASSESSMENT_SCORM_RESTORE",t.COMPONENT_ASSESSMENT_RESET="COMPONENT_ASSESSMENT_RESET",t.componentAssessmentCompleted=e=>({type:t.COMPONENT_ASSESSMENT_COMPLETED,payload:e}),t.componentAssessmentScormRestore=e=>({type:t.COMPONENT_ASSESSMENT_SCORM_RESTORE,payload:e}),t.componentAssessmentReset=e=>({type:t.COMPONENT_ASSESSMENT_RESET,payload:e})},40216:(e,t,s)=>{"use strict";const{registerEpics:n,registerReducer:r}=s(60633),o=s(79279),{componentAssessmentComponentCompleteEpic:i,componentAssessmentCompletedEpic:a,componentAssessmentResetQuestionEpic:c,registerTrackingMapEpic:l,scormRestoreEpic:p}=s(49016);n(i,a,c,l,p),r("componentAssessment",o)},49016:(e,t,s)=>{"use strict";const n=s(99729),r=s(14831),{Observable:o}=s(49923),{SETUP_APP:i,APP_READY:a}=s(36329),{COMPONENT_COMPLETED:c,RESET_QUESTION:l,updateComponents:p}=s(59345),{trackableChange:m}=s(18403),{registerTrackingMap:d}=s(60633),{COMPONENT_ASSESSMENT_COMPLETED:u,componentAssessmentCompleted:h,componentAssessmentReset:_,componentAssessmentScormRestore:g}=s(17775),S=s(17578);t.componentAssessmentComponentCompleteEpic=(e,t)=>e.filter((e=>{const{componentAssessment:s}=t.getState();return s._isEnabled&&e.type===c&&e.payload.componentId===s._assessmentComponentId})).map((e=>{const{components:s,componentAssessment:r}=t.getState(),o=s[e.payload.componentId];let i=o._isPassed;if(!o._isPassed)if(o._allowAssessmentRetake){const e=n(o,"_assessmentRetakeAttempts",1);i=!n(o,"_allowUnlimitedRetakeAttempts",!1)&&r._assessmentAttemptsTaken===e}else i=!0;const a={_isComplete:i,_isPassed:o._isPassed,_assessmentScore:o._assessmentScore};return h(a)})),t.componentAssessmentCompletedEpic=e=>e.ofType(u).mapTo(m()),t.componentAssessmentResetQuestionEpic=(e,t)=>e.filter((e=>{const{componentAssessment:s}=t.getState();return s._isEnabled&&e.type===l&&e.payload.componentId===s._assessmentComponentId})).map((()=>_())),t.registerTrackingMapEpic=(e,t)=>e.filter((e=>{const{componentAssessment:s}=t.getState();return s._isEnabled&&e.type===i})).do((()=>{d("componentAssessment",S,"extensions")})).ignoreElements(),t.scormRestoreEpic=(e,t)=>e.filter((e=>{const{componentAssessment:s,scorm:n}=t.getState();return!!(n&&n._isEnabled&&s._isEnabled&&e.type===a)})).mergeMap((()=>{const{scorm:e,components:s}=t.getState(),n=[];if(e&&e.suspendData){const{_isAssessmentComplete:t,_isPassed:o,_score:i,_assessmentComponentId:a,_assessmentAttemptsTaken:c}=e.suspendData;if(t){n.push(g({_isComplete:t,_isPassed:o,_assessmentScore:i,_assessmentComponentId:a,_assessmentAttemptsTaken:c}));const e=s[a];if(e){const t=r({},e,{_isPassed:o,_assessmentScore:i});n.push(p({[a]:t}))}}}return n.length?o.of(...n):o.empty()}))},79279:(e,t,s)=>{"use strict";const n=s(14831),r=s(29115),o=s(99729),i=s(64925),{SETUP_APP:a}=s(36329),{RESTORE_EXTENSION:c}=s(18403),{COMPONENT_ASSESSMENT_COMPLETED:l,COMPONENT_ASSESSMENT_RESET:p,COMPONENT_ASSESSMENT_SCORM_RESTORE:m}=s(17775),d={_isEnabled:!1,_isComplete:!1,_isPassed:!1,_assessmentScore:0,_assessmentComponentId:null,_assessmentAttemptsTaken:0};e.exports=(e=d,t)=>{switch(t.type){case a:return function(e,t){const{course:s,components:r}=t.payload;if(o(s,"_courseAssessment._isEnabled",!1))return e;const a=i(r,{_isAssessmentEnabled:!0});return a?n({},e,{_isEnabled:!0,_assessmentComponentId:a._id}):e}(e,t);case l:return n({},e,t.payload);case p:return n({},e,{_assessmentAttemptsTaken:e._assessmentAttemptsTaken+1});case m:return n({},e,t.payload);case c:if("componentAssessment"===t.payload.extensionName)return r({},e,t.payload.extensionData);default:return e}}},17578:e=>{"use strict";e.exports={_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0},_isPassed:{fieldKey:"_isPassed",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_score:{fieldKey:"_assessmentScore",type:"Number",shouldRestore:!0},_isAssessmentComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentComponentId:{fieldKey:"_assessmentComponentId",type:"String",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentAttemptsTaken:{fieldKey:"_assessmentAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0}}},20687:e=>{"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:s,isPageReady:n}=e;return!0===n&&!0===s._isReady&&!0!==s[t]}},37238:(e,t,s)=>{"use strict";const n=s(90005);e.exports=e=>n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},52875:e=>{"use strict";e.exports=function(e,t,s,n,r){n&&n.props&&n.props.component?(t.top&&(n.isInviewTop=!0),t.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&r&&r(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},78581:(e,t,s)=>{var n=s(99736),r=s(92360);e.exports=function(e){return"number"==typeof e||r(e)&&"[object Number]"==n(e)}},35754:(e,t,s)=>{var n=s(75733),r=s(47991);e.exports=function(e,t,s){var o=null==e?0:e.length;return o?(t=s||void 0===t?1:r(t),n(e,(t=o-t)<0?0:t,o)):[]}}}]);